import{defineComponent as e,inject as l,reactive as c,createVNode as t,Fragment as r,h as a,resolveComponent as s}from"vue";import{ElOption as u}from"element-plus";import{withDefineType as n,dateUtil as o,useRender as m,makeSlots as i,definePropType as p}from"@fast-china/utils";import{isString as d}from"lodash-unified";import{getTableDefaultSlots as h}from"./table.type.mjs";import{tableStateKey as E,enumMapKey as S}from"./useTable.mjs";const f=["el-input","ELInput","el-input-number","ELInputNumber","el-select","ElSelect","el-select-v2","ElSelectV2","el-tree-select","ElTreeSelect","el-cascader","ElCascader","el-date-picker","ElDatePicker","el-time-picker","ElTimePicker","el-time-select","ElTimeSelect"],b=["el-select","ElSelect","el-select-v2","ElSelectV2","el-tree-select","ElTreeSelect"],g=["el-input","ELInput","el-input-number","ELInputNumber"],T=["el-select","ElSelect","el-select-v2","ElSelectV2","el-tree-select","ElTreeSelect","el-cascader","ElCascader"],k=/* @__PURE__ */e({name:"FaTableSearchFormItem",props:{column:{type:p(Object),required:!0,default:{}},search:{type:p(Function),required:!0}},slots:i(),setup(e,{slots:i}){const p=l(E),k=l(S),P=c({enumDict:n([])}),v=l=>{d(l)&&(l=l.trim()),p.searchParam[e.column?.search?.key??e.column.prop]=l},y=l=>{e.search()},D=()=>{const l=e.column.search,c={};if(f.includes(l?.el)&&(c.clearable=!0),b.includes(l?.el)&&(c.filterable=!0),g.includes(l?.el)&&(c.placeholder="请输入"),T.includes(l?.el)&&(c.placeholder="请选择"),["el-date-picker","ElDatePicker"].includes(l?.el)&&(c.unlinkPanels=!0,["datetimerange","daterange","monthrange","yearrange"].includes(l?.props?.type)?(c.defaultTime=o.getDefaultTime(),c.shortcuts=o.getShortcuts(),c.rangeSeparator="至",c.startPlaceholder="开始时间",c.endPlaceholder="结束时间"):(c.defaultTime=o.getSimpleTime(),c.shortcuts=o.getSimpleShortcuts())),["el-time-picker","ElTimePicker"].includes(l?.el)&&l?.props?.isRange&&(c.rangeSeparator="至",c.startPlaceholder="开始时间",c.endPlaceholder="结束时间"),["el-select","ElSelect","el-select-v2","ElSelectV2","el-cascader","ElCascader","el-tree-select","ElTreeSelect"].includes(l?.el)){let l;l=e.column.enum&&d(e.column.enum)?k.get(e.column.enum):k.get(e.column.prop??e.column.search?.key),l=l.filter(e=>!1!==e?.show),P.enumDict=l??[]}return["el-select-v2","ElSelectV2","el-cascader","ElCascader"].includes(l?.el)&&(c.options=P.enumDict),["el-tree-select","ElTreeSelect"].includes(l?.el)&&(c.data=P.enumDict),c};m(()=>t(r,null,[e.column.search?.el&&a(s(e.column.search.el),{...D(),...e.column.search.props,modelValue:p.searchParam[e.column?.search?.key??e.column.prop],"onUpdate:modelValue":v,onChange:y},{default:()=>["el-select","ElSelect"].includes(e.column.search.el)?P.enumDict.map((l,c)=>a(u,{key:c,label:l[e.column.search.props?.label??"label"],value:l[e.column.search.props?.value??"value"],disabled:l[e.column.search.props?.disabled??"disabled"]})):i.default&&i.default({column:e.column,search:e.search,...h(p)})})]))}});export{k as default};
//# sourceMappingURL=tableSearchFormItem.mjs.map
