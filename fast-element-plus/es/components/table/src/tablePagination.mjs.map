{"version":3,"file":"tablePagination.mjs","sources":["../../../../../packages/components/table/src/tablePagination.tsx"],"sourcesContent":["import { defineComponent, inject } from \"vue\";\nimport { ElMessageBox, ElPagination } from \"element-plus\";\nimport { definePropType, useRender } from \"@fast-china/utils\";\nimport { isNull, isNumber } from \"lodash-unified\";\nimport { tableStateKey } from \"./useTable\";\n\nexport default defineComponent({\n\tname: \"FaTablePagination\",\n\tprops: {\n\t\t/** @description 页码 */\n\t\tpageSizes: {\n\t\t\ttype: definePropType<number[]>(Array),\n\t\t\tdefault: [20, 30, 50, 100, 200, 300, 500, 1000],\n\t\t},\n\t},\n\temits: {\n\t\t/** @description 页码改变 */\n\t\tsizeChange: (pageSize: number) => isNumber(pageSize) || isNull(pageSize),\n\t\t/** @description 当前页数改变 */\n\t\tcurrentChange: (currentPage: number) => isNumber(currentPage) || isNull(currentPage),\n\t},\n\tsetup(props, { emit }) {\n\t\tconst tableState = inject(tableStateKey);\n\n\t\tconst handleSizeChange = (pageSize: number): void => {\n\t\t\tif (pageSize > 100) {\n\t\t\t\tElMessageBox.confirm(\"当前页码已经超过100条/页，可能会造成页面卡顿，是否继续？\", {\n\t\t\t\t\tconfirmButtonText: \"继续\",\n\t\t\t\t\ttype: \"warning\",\n\t\t\t\t}).then(() => {\n\t\t\t\t\temit(\"sizeChange\", pageSize);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\temit(\"sizeChange\", pageSize);\n\t\t\t}\n\t\t};\n\n\t\tuseRender(() => (\n\t\t\t<ElPagination\n\t\t\t\tclass=\"fa-table-pagination\"\n\t\t\t\tsize=\"small\"\n\t\t\t\tvModel:currentPage={tableState.tablePagination.pageIndex}\n\t\t\t\tvModel:pageSize={tableState.tablePagination.pageSize}\n\t\t\t\tpageSizes={props.pageSizes}\n\t\t\t\tbackground\n\t\t\t\tlayout=\"jumper, prev, pager, next, sizes, total\"\n\t\t\t\ttotal={tableState.tablePagination.totalRows}\n\t\t\t\tonSizeChange={handleSizeChange}\n\t\t\t\tonCurrentChange={(currentPage: number) => emit(\"currentChange\", currentPage)}\n\t\t\t/>\n\t\t));\n\t},\n});\n"],"names":["name","props","pageSizes","type","definePropType","Array","default","emits","sizeChange","pageSize","isNumber","isNull","currentChange","currentPage","setup","emit","tableState","inject","tableStateKey","handleSizeChange","ElMessageBox","confirm","confirmButtonText","then","useRender","_createVNode","ElPagination","tablePagination","pageIndex","$event","totalRows"],"mappings":";;;;;AAMA,MAAA,kDAA+B;AAAA,EAC9BA,MAAM;AAAA,EACNC,OAAO;AAAA;AAAA,IAENC,WAAW;AAAA,MACVC,MAAMC,eAAyBC,KAAK;AAAA,MACpCC,SAAS,CAAC,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,GAAI;AAAA,IAC/C;AAAA;EAEDC,OAAO;AAAA;AAAA,IAENC,YAAaC,cAAqBC,SAASD,QAAQ,KAAKE,OAAOF,QAAQ;AAAA;AAAA,IAEvEG,eAAgBC,iBAAwBH,SAASG,WAAW,KAAKF,OAAOE,WAAW;AAAA;EAEpFC,MAAMb,OAAO;AAAA,IAAEc;AAAAA,EAAK,GAAG;AACtB,UAAMC,aAAaC,OAAOC,aAAa;AAEvC,UAAMC,mBAAoBV,cAA2B;AACpD,UAAIA,WAAW,KAAK;AACnBW,qBAAaC,QAAQ,kCAAkC;AAAA,UACtDC,mBAAmB;AAAA,UACnBnB,MAAM;AAAA,QACP,CAAC,EAAEoB,KAAK,MAAM;AACbR,eAAK,cAAcN,QAAQ;AAAA,QAC5B,CAAC;AAAA,MACF,OAAO;AACNM,aAAK,cAAcN,QAAQ;AAAA,MAC5B;AAAA,IACD;AAEAe,cAAU,MAAAC,YAAAC,cAAA;AAAA,MAAA,SAAA;AAAA,MAAA,QAAA;AAAA,MAAA,eAIYV,WAAWW,gBAAgBC;AAAAA,MAAS,wBAAAC,YAApCb,WAAWW,gBAAgBC,YAASC;AAAAA,MAAA,YACvCb,WAAWW,gBAAgBlB;AAAAA,MAAQ,qBAAAoB,YAAnCb,WAAWW,gBAAgBlB,WAAQoB;AAAAA,MAAA,aACzC5B,MAAMC;AAAAA,MAAS,cAAA;AAAA,MAAA,UAAA;AAAA,MAAA,SAGnBc,WAAWW,gBAAgBG;AAAAA,MAAS,gBAC7BX;AAAAA,MAAgB,mBACZN,iBAAwBE,KAAK,iBAAiBF,WAAW;AAAA,IAAC,GAAA,IAAA,CAE7E;AAAA,EACF;AACD,CAAC;"}