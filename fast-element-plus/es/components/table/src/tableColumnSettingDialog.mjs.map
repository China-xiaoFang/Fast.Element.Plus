{"version":3,"file":"tableColumnSettingDialog.mjs","sources":["../../../../../packages/components/table/src/tableColumnSettingDialog.tsx"],"sourcesContent":["import { Fragment, defineComponent, inject, reactive, ref } from \"vue\";\nimport { ElInput, ElInputNumber, ElMessage, ElNotification, ElRadio, ElRadioGroup, ElSwitch, ElTable, ElTableColumn } from \"element-plus\";\nimport { FaDialog } from \"@fast-element-plus/components/dialog\";\nimport { definePropType, stringUtil, useExpose, useRender } from \"@fast-china/utils\";\nimport Sortable from \"sortablejs\";\nimport { tableStateKey } from \"./useTable\";\nimport type { FaTableColumnCtx } from \"./table.type\";\nimport type { FaDialogInstance } from \"@fast-element-plus/components/dialog\";\nimport type { TableColumnCtx } from \"element-plus\";\n\nexport default defineComponent({\n\tname: \"FaTableColumnsSettingDialog\",\n\tprops: {\n\t\t/** @description 改变 */\n\t\tchange: {\n\t\t\ttype: definePropType<(columns: FaTableColumnCtx[]) => Promise<void>>(Function),\n\t\t},\n\t},\n\tsetup(props, { expose }) {\n\t\tconst tableState = inject(tableStateKey);\n\n\t\tconst state = reactive({\n\t\t\ttableKey: stringUtil.generateRandomString(8),\n\t\t\tsortableInstance: undefined,\n\t\t\tchange: false,\n\t\t});\n\n\t\tconst faDialogRef = ref<FaDialogInstance>();\n\n\t\tconst indexMethod = (index: number): number => {\n\t\t\treturn index + 1;\n\t\t};\n\n\t\t// /**\n\t\t//  * 处理固定行ClassName\n\t\t//  */\n\t\t// const handleFixedRowClassName = (row: FaTableColumnCtx) => {\n\t\t// \tif (row.fixed) {\n\t\t// \t\treturn \"fa-table__setting-fixed-column\";\n\t\t// \t}\n\t\t// };\n\n\t\tconst tableRowDrop = (): void => {\n\t\t\tconst tBody = document.querySelector(`.fa-table__column-setting-${state.tableKey} .el-table__body-wrapper tbody`) as any;\n\n\t\t\t// 销毁现有Sortable实例（如果存在）\n\t\t\tif (state.sortableInstance) {\n\t\t\t\tstate.sortableInstance.destroy();\n\t\t\t}\n\n\t\t\tstate.sortableInstance = new Sortable(tBody, {\n\t\t\t\t// ms, number 单位：ms，定义排序动画的时间\n\t\t\t\tanimation: 150,\n\t\t\t\tdelay: 0,\n\t\t\t\t// filter: \".fa-table__setting-fixed-column\",\n\t\t\t\t// onMove(evt: any) {\n\t\t\t\t// \tconst { related } = evt;\n\t\t\t\t// \treturn !related.classList.contains(\"fa-table__setting-fixed-column\");\n\t\t\t\t// },\n\t\t\t\tonEnd(evt: any): void {\n\t\t\t\t\tconst { newIndex, oldIndex } = evt;\n\t\t\t\t\tif (newIndex !== oldIndex) {\n\t\t\t\t\t\tstate.change = true;\n\t\t\t\t\t\tconst curRow = tableState.orgColumns.splice(oldIndex, 1)[0];\n\t\t\t\t\t\ttableState.orgColumns.splice(newIndex, 0, curRow);\n\t\t\t\t\t\ttableState.orgColumns = tableState.orgColumns.map((item, index) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\torder: index + 1,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t};\n\n\t\tconst open = (): void => {\n\t\t\tfaDialogRef.value.open(() => {\n\t\t\t\ttableRowDrop();\n\t\t\t\tElNotification({\n\t\t\t\t\tmessage: \"点击保存才会进行数据缓存，点击取消为本此生效\",\n\t\t\t\t\ttype: \"info\",\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\tconst handleChange = async (): Promise<void> => {\n\t\t\tif (state.change) {\n\t\t\t\tprops.change && (await props.change(tableState.orgColumns));\n\t\t\t} else {\n\t\t\t\tElMessage.info(\"列配置未发生变化\");\n\t\t\t}\n\t\t};\n\n\t\tconst handleConfirmClick = (): void => {\n\t\t\tfaDialogRef.value.close(async () => {\n\t\t\t\tawait handleChange();\n\t\t\t});\n\t\t};\n\n\t\tconst handleOrderChange = (): void => {\n\t\t\tstate.change = true;\n\t\t\tlet orderColumns = tableState.orgColumns.filter((f) => !f?.pureSearch);\n\t\t\torderColumns = orderColumns.sort((a, b) => {\n\t\t\t\tif (a.order !== b.order) {\n\t\t\t\t\treturn a.order - b.order;\n\t\t\t\t} else {\n\t\t\t\t\treturn orderColumns.indexOf(b) - orderColumns.indexOf(a);\n\t\t\t\t}\n\t\t\t});\n\t\t\ttableState.orgColumns = [...orderColumns, ...tableState.orgColumns.filter((f) => f?.pureSearch)];\n\t\t\ttableState.orgColumns.forEach((item, index) => {\n\t\t\t\titem.order = index + 1;\n\t\t\t});\n\t\t};\n\n\t\tconst handleColumnChange = (): void => {\n\t\t\tstate.change = true;\n\t\t};\n\n\t\tconst autoWidthDisabled = (\n\t\t\trow: FaTableColumnCtx,\n\t\t\tswitchEl = false\n\t\t): {\n\t\t\tmodelValue: any;\n\t\t\tdisabled: boolean;\n\t\t\tplaceholder: any;\n\t\t} => {\n\t\t\tconst result = { modelValue: undefined, disabled: false, placeholder: undefined };\n\t\t\tif (row?.type) {\n\t\t\t\tswitch (row?.type) {\n\t\t\t\t\tcase \"expand\":\n\t\t\t\t\t\tresult.disabled = true;\n\t\t\t\t\t\tresult.placeholder = \"暂不支持宽度配置\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"image\":\n\t\t\t\t\t\tresult.disabled = true;\n\t\t\t\t\t\tresult.placeholder = \"图片列无需配置\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"date\":\n\t\t\t\t\tcase \"time\":\n\t\t\t\t\tcase \"dateTime\":\n\t\t\t\t\t\tresult.disabled = true;\n\t\t\t\t\t\tresult.placeholder = \"时间/日期列无需配置\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"submitInfo\":\n\t\t\t\t\t\tresult.disabled = true;\n\t\t\t\t\t\tresult.placeholder = \"当前列无需配置\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (row?.tag) {\n\t\t\t\tresult.disabled = true;\n\t\t\t\tresult.placeholder = \"标签列无需配置\";\n\t\t\t} else if (row?.autoWidth) {\n\t\t\t\tresult.disabled = true;\n\t\t\t\tresult.placeholder = \"自动列宽无需配置\";\n\t\t\t}\n\t\t\tif (!result.disabled) {\n\t\t\t\tdelete result.disabled;\n\t\t\t\tdelete result.modelValue;\n\t\t\t\tdelete result.placeholder;\n\t\t\t}\n\t\t\tif (switchEl) {\n\t\t\t\tdelete result.placeholder;\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\n\t\tconst pureSearchDisabled = (\n\t\t\trow: FaTableColumnCtx,\n\t\t\tswitchEl = false,\n\t\t\torderEl = false,\n\t\t\tradioEl = false\n\t\t): {\n\t\t\tmodelValue: any;\n\t\t\tdisabled: boolean;\n\t\t\tplaceholder: any;\n\t\t} => {\n\t\t\tconst result = { modelValue: undefined, disabled: false, placeholder: undefined };\n\t\t\tif (row?.pureSearch) {\n\t\t\t\tresult.disabled = true;\n\t\t\t\tresult.placeholder = \"搜索列无需配置\";\n\t\t\t}\n\t\t\tif (!result.disabled) {\n\t\t\t\tdelete result.disabled;\n\t\t\t\tdelete result.modelValue;\n\t\t\t\tdelete result.placeholder;\n\t\t\t} else {\n\t\t\t\tif (radioEl) {\n\t\t\t\t\tdelete result.modelValue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (switchEl) {\n\t\t\t\tdelete result.placeholder;\n\t\t\t}\n\t\t\tif (orderEl) {\n\t\t\t\tresult.placeholder = \"999\";\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\n\t\tuseRender(() => (\n\t\t\t<FaDialog\n\t\t\t\tref={faDialogRef}\n\t\t\t\tclass=\"fa-table__column-setting-dialog\"\n\t\t\t\tonConfirmClick={handleConfirmClick}\n\t\t\t\tshowFullscreen={false}\n\t\t\t\tconfirmButtonText={state.change ? \"保存更改\" : \"确认\"}\n\t\t\t\tfillHeight\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\theader: () => (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t列表配置（留空则恢复默认配置）\n\t\t\t\t\t\t\t<el-text type=\"info\">点击保存才会进行数据缓存，点击取消为本此生效</el-text>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t),\n\t\t\t\t\tdefault: () => (\n\t\t\t\t\t\t<ElTable\n\t\t\t\t\t\t\tclass={[\"fa-table__column-setting\", `fa-table__column-setting-${state.tableKey}`]}\n\t\t\t\t\t\t\tdata={tableState.orgColumns}\n\t\t\t\t\t\t\trowKey=\"prop\"\n\t\t\t\t\t\t\tborder\n\t\t\t\t\t\t\t// rowClassName={handleFixedRowClassName}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tdefault: () => (\n\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t<ElTableColumn type=\"index\" fixed=\"left\" align=\"center\" width={45} index={indexMethod} />\n\t\t\t\t\t\t\t\t\t\t<ElTableColumn label=\"列显示名称\" minWidth={200}>\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\tdefault: ({ row }: { row: FaTableColumnCtx; column: TableColumnCtx<any>; $index: number }) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\trow.type === \"image\" ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ElInput\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treadonly\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvModel={row.label}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入列显示名称\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleColumnChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ElInput\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvModel={row.label}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入列显示名称\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...pureSearchDisabled(row)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleColumnChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t\t\t\t\t\t<ElTableColumn label=\"固定\" width={230}>\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\tdefault: ({ row }: { row: FaTableColumnCtx; column: TableColumnCtx<any>; $index: number }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ElRadioGroup\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvModel={row.fixed}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...pureSearchDisabled(row, false, false, true)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleColumnChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ElRadio value={false}>无</ElRadio>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ElRadio value=\"left\">左侧</ElRadio>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ElRadio value=\"right\">右侧</ElRadio>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ElRadioGroup>\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t\t\t\t\t\t<ElTableColumn label=\"宽度\" width={200}>\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\tdefault: ({ row }: { row: FaTableColumnCtx; column: TableColumnCtx<any>; $index: number }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ElInputNumber\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvModel={row.width}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax={999}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstepStrictly\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrols={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclearable\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入宽度\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...autoWidthDisabled(row)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...pureSearchDisabled(row)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleColumnChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t\t\t\t\t\t<ElTableColumn label=\"小的宽度\" width={200}>\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\tdefault: ({ row }: { row: FaTableColumnCtx; column: TableColumnCtx<any>; $index: number }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ElInputNumber\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvModel={row.smallWidth}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax={999}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstepStrictly\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrols={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclearable\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入小的宽度\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...autoWidthDisabled(row)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...pureSearchDisabled(row)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleColumnChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t\t\t\t\t\t<ElTableColumn label=\"顺序\" width={100}>\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\tdefault: ({ row }: { row: FaTableColumnCtx; column: TableColumnCtx<any>; $index: number }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ElInputNumber\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvModel={row.order}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax={999}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstepStrictly\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrols={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclearable\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入顺序\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...pureSearchDisabled(row, false, true)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleOrderChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t\t\t\t\t\t<ElTableColumn label=\"排序\" width={65}>\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\tdefault: ({ row }: { row: FaTableColumnCtx; column: TableColumnCtx<any>; $index: number }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ElSwitch\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvModel={row.sortable}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinlinePrompt\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactiveText=\"是\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinactiveText=\"否\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={row.disabledSortable || row?.type === \"image\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...pureSearchDisabled(row, true)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleColumnChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t\t\t\t\t\t<ElTableColumn label=\"复制\" width={65}>\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\tdefault: ({ row }: { row: FaTableColumnCtx; column: TableColumnCtx<any>; $index: number }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ElSwitch\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvModel={row.copy}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinlinePrompt\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactiveText=\"是\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinactiveText=\"否\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!!row?.type || !!row?.slot}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...pureSearchDisabled(row, true)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleColumnChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t\t\t\t\t\t<ElTableColumn label=\"自动宽度\" width={85}>\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\tdefault: ({ row }: { row: FaTableColumnCtx; column: TableColumnCtx<any>; $index: number }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ElSwitch\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvModel={row.autoWidth}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinlinePrompt\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactiveText=\"是\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinactiveText=\"否\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!!row?.type}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...pureSearchDisabled(row, true)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleColumnChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t\t\t\t\t\t<ElTableColumn label=\"显示\" width={75}>\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\tdefault: ({ row }: { row: FaTableColumnCtx; column: TableColumnCtx<any>; $index: number }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ElSwitch\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvModel={row.show}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinlinePrompt\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactiveText=\"显示\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinactiveText=\"隐藏\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleColumnChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t\t\t\t\t\t<ElTableColumn label=\"搜索框名称\" minWidth={200}>\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\tdefault: ({ row }: { row: FaTableColumnCtx; column: TableColumnCtx<any>; $index: number }) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\trow.search ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ElInput\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvModel={row.search.label}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入搜索框名称\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleColumnChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ElInput disabled placeholder=\"当前列暂无搜索项配置\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t\t\t\t\t\t<ElTableColumn label=\"搜索框顺序\" width={200}>\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\tdefault: ({ row }: { row: FaTableColumnCtx; column: TableColumnCtx<any>; $index: number }) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\trow.search ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ElInputNumber\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvModel={row.search.order}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax={999}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstepStrictly\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrols={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclearable\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入搜索框顺序\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleColumnChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ElInputNumber\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax={999}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstepStrictly\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrols={false}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclearable\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"当前列暂无搜索项配置\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ElTable>\n\t\t\t\t\t),\n\t\t\t\t}}\n\t\t\t</FaDialog>\n\t\t));\n\n\t\treturn useExpose(expose, {\n\t\t\t/** @description 打开 */\n\t\t\topen,\n\t\t\t/** @description 列改变 */\n\t\t\tchange: handleChange,\n\t\t});\n\t},\n});\n"],"names":["TableColumnsSettingDialog","name","props","change","type","definePropType","Function","setup","expose","tableState","inject","tableStateKey","state","reactive","tableKey","stringUtil","generateRandomString","sortableInstance","undefined","faDialogRef","ref","indexMethod","index","handleChange","async","orgColumns","ElMessage","info","handleConfirmClick","value","close","handleOrderChange","orderColumns","filter","f","pureSearch","sort","a","b","order","indexOf","forEach","item","handleColumnChange","autoWidthDisabled","row","switchEl","result","modelValue","disabled","placeholder","tag","autoWidth","pureSearchDisabled","orderEl","radioEl","useRender","_createVNode","FaDialog","class","onConfirmClick","showFullscreen","confirmButtonText","fillHeight","header","_Fragment","_createTextVNode","_resolveComponent","default","ElTable","data","rowKey","border","ElTableColumn","fixed","align","width","label","minWidth","ElInput","readonly","$event","onChange","_mergeProps","ElRadioGroup","ElRadio","ElInputNumber","min","max","stepStrictly","controls","clearable","smallWidth","ElSwitch","sortable","inlinePrompt","activeText","inactiveText","disabledSortable","copy","slot","show","search","useExpose","open","tableRowDrop","tBody","document","querySelector","destroy","Sortable","animation","delay","onEnd","evt","newIndex","oldIndex","curRow","splice","map","ElNotification","message"],"mappings":"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"}