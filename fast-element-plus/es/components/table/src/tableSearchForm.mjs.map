{"version":3,"file":"tableSearchForm.mjs","sources":["../../../../../packages/components/table/src/tableSearchForm.tsx"],"sourcesContent":["import { computed, defineComponent, inject, reactive, ref, watch } from \"vue\";\nimport { ElButton, ElIcon, useGlobalSize } from \"element-plus\";\nimport { ArrowDown, ArrowUp, Eleme, Refresh, Search } from \"@element-plus/icons-vue\";\nimport { FaDrawer } from \"@fast-element-plus/components/drawer\";\nimport { FaLayoutGrid, FaLayoutGridItem } from \"@fast-element-plus/components/layoutGrid\";\nimport { Brush } from \"@fast-element-plus/icons-vue\";\nimport { definePropType, makeSlots, useRender, withDefineType } from \"@fast-china/utils\";\nimport { getTableDefaultSlots } from \"./table.type\";\nimport FaTableSearchFormItem from \"./tableSearchFormItem\";\nimport { tableStateKey } from \"./useTable\";\nimport type { FaTableColumnCtx, FaTableDefaultSlotsResult, FaTableSearchColumnCtx } from \"./table.type\";\nimport type { FaDrawerInstance } from \"@fast-element-plus/components/drawer\";\nimport type { FaLayoutGridBreakPoint, FaLayoutGridInstance, FaLayoutGridItemResponsive } from \"@fast-element-plus/components/layoutGrid\";\n\ntype FaTableSearchFormSlots = {\n\t[key: string]: FaTableDefaultSlotsResult & {\n\t\tcolumn?: FaTableColumnCtx;\n\t\tsearch?: () => void;\n\t};\n};\n\nexport default defineComponent({\n\tname: \"FaTableSearchForm\",\n\tprops: {\n\t\t/** @description 显示 */\n\t\tshow: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\t/** @description 折叠搜素 */\n\t\tcollapsedSearch: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\t/** @description 高级搜素抽屉 */\n\t\tadvancedSearchDrawer: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\t/** @description Grid布局列配置 */\n\t\tcols: {\n\t\t\ttype: definePropType<string | number | Record<FaLayoutGridBreakPoint, number>>([String, Number, Object]),\n\t\t\tdefault: () => ({ xs: 2, sm: 3, md: 4, lg: 5, xl: 6 }),\n\t\t},\n\t\t/** @description 搜索 */\n\t\tsearch: {\n\t\t\ttype: definePropType<() => void>(Function),\n\t\t\trequired: true,\n\t\t},\n\t\t/** @description 重置 */\n\t\treset: {\n\t\t\ttype: definePropType<() => void>(Function),\n\t\t\trequired: true,\n\t\t},\n\t},\n\tslots: makeSlots<FaTableSearchFormSlots>(),\n\tsetup(props, { slots, expose }) {\n\t\tconst _globalSize = useGlobalSize();\n\n\t\t// 获取响应式断点\n\t\tconst gridRef = ref<FaLayoutGridInstance>();\n\n\t\tconst tableState = inject(tableStateKey);\n\n\t\tconst breakPoint = computed<FaLayoutGridBreakPoint>(() => gridRef.value?.breakPoint);\n\n\t\tconst state = reactive({\n\t\t\trefreshing: false,\n\t\t\theight: \"auto\",\n\t\t\t/** 折叠 */\n\t\t\tcollapsed: true,\n\t\t\t/** 显示折叠 */\n\t\t\tshowCollapsed: computed(() => {\n\t\t\t\tlet show = false;\n\t\t\t\ttableState.searchColumns.reduce((prev, current) => {\n\t\t\t\t\tprev +=\n\t\t\t\t\t\t(current.search[breakPoint.value]?.span ?? current.search?.span ?? 1) +\n\t\t\t\t\t\t(current.search[breakPoint.value]?.offset ?? current.search?.offset ?? 0);\n\t\t\t\t\tif (typeof props.cols !== \"number\") {\n\t\t\t\t\t\tif (prev >= props.cols[breakPoint.value]) show = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (prev >= props.cols) show = true;\n\t\t\t\t\t}\n\t\t\t\t\treturn prev;\n\t\t\t\t}, 0);\n\t\t\t\treturn show;\n\t\t\t}),\n\t\t\tsearchColumns: withDefineType<FaTableColumnCtx[]>([]),\n\t\t\tadvancedSearchColumns: withDefineType<FaTableColumnCtx[]>([]),\n\t\t\tbreakPoint: undefined,\n\t\t});\n\n\t\tconst faTableSearchFormRef = ref<HTMLElement>();\n\t\tconst advancedSearchRef = ref<FaDrawerInstance>();\n\n\t\t// 获取响应式设置\n\t\tconst getResponsive = (\n\t\t\titem: FaTableSearchColumnCtx\n\t\t): {\n\t\t\tspan: number;\n\t\t\toffset: number;\n\t\t\txs: FaLayoutGridItemResponsive;\n\t\t\tsm: FaLayoutGridItemResponsive;\n\t\t\tmd: FaLayoutGridItemResponsive;\n\t\t\tlg: FaLayoutGridItemResponsive;\n\t\t\txl: FaLayoutGridItemResponsive;\n\t\t} => {\n\t\t\treturn {\n\t\t\t\tspan: item?.span,\n\t\t\t\toffset: item?.offset ?? 0,\n\t\t\t\txs: item?.xs,\n\t\t\t\tsm: item?.sm,\n\t\t\t\tmd: item?.md,\n\t\t\t\tlg: item?.lg,\n\t\t\t\txl: item?.xl,\n\t\t\t};\n\t\t};\n\n\t\tconst handleBreakPointChange = ({ breakPoint }: { breakPoint: FaLayoutGridBreakPoint }): void => {\n\t\t\t// 这里 -1 是排除固定的\n\t\t\tstate.breakPoint = props.cols[breakPoint] - 1;\n\t\t\tstate.searchColumns = tableState.searchColumns.filter((f) => f?.show).slice(0, state.breakPoint);\n\t\t\tstate.advancedSearchColumns = tableState.searchColumns.filter((f) => f?.show).slice(state.breakPoint);\n\t\t};\n\n\t\twatch(\n\t\t\t() => tableState.searchColumns,\n\t\t\t() => {\n\t\t\t\tif (state.breakPoint) {\n\t\t\t\t\tstate.searchColumns = tableState.searchColumns.filter((f) => f?.show).slice(0, state.breakPoint);\n\t\t\t\t\tstate.advancedSearchColumns = tableState.searchColumns.filter((f) => f?.show).slice(state.breakPoint);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tconst searchColumns = computed(() => (props.advancedSearchDrawer ? state.searchColumns : tableState.searchColumns));\n\n\t\twatch(\n\t\t\t() => props.advancedSearchDrawer,\n\t\t\t(newValue) => {\n\t\t\t\tif (newValue) {\n\t\t\t\t\t// 抽屉默认折叠\n\t\t\t\t\tstate.collapsed = true;\n\t\t\t\t} else {\n\t\t\t\t\tstate.collapsed = props.collapsedSearch;\n\t\t\t\t}\n\t\t\t\tstate.refreshing = true;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tstate.refreshing = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.collapsedSearch,\n\t\t\t(newValue) => {\n\t\t\t\tif (!props.collapsedSearch) {\n\t\t\t\t\tstate.collapsed = newValue;\n\t\t\t\t} else {\n\t\t\t\t\t// 抽屉默认折叠\n\t\t\t\t\tstate.collapsed = true;\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\timmediate: true,\n\t\t\t}\n\t\t);\n\n\t\tuseRender(\n\t\t\t() =>\n\t\t\t\ttableState.searchColumns.length > 0 && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tref={faTableSearchFormRef}\n\t\t\t\t\t\tclass={[\n\t\t\t\t\t\t\t\"el-card fa-table__search\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"fa-table__search-hidden\": !props.show,\n\t\t\t\t\t\t\t\t\"fa-table__search__disable\": tableState.loading,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<form class=\"el-form el-form--default el-form--label-right\">\n\t\t\t\t\t\t\t{!state.refreshing && (\n\t\t\t\t\t\t\t\t<FaLayoutGrid\n\t\t\t\t\t\t\t\t\tref={gridRef}\n\t\t\t\t\t\t\t\t\tcollapsed={state.collapsed}\n\t\t\t\t\t\t\t\t\tgap={_globalSize.value === \"small\" ? [20, 0] : [20, 10]}\n\t\t\t\t\t\t\t\t\tcols={props.cols}\n\t\t\t\t\t\t\t\t\tonBreakPointChange={handleBreakPointChange}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{searchColumns.value.map((item, index) => (\n\t\t\t\t\t\t\t\t\t\t<FaLayoutGridItem key={item?.search?.key ?? item.prop} {...getResponsive(item.search)} index={index}>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"el-form-item el-form-item--default el-form-item--label-right\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"el-form-item__label\">{item.search.label}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"el-form-item__content\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.search?.slot ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tslots[item.search.slot] &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tslots[item.search.slot]({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn: item,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsearch: props.search,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...getTableDefaultSlots(tableState),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FaTableSearchFormItem column={item} search={props.search} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</FaLayoutGridItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t<FaLayoutGridItem suffix>\n\t\t\t\t\t\t\t\t\t\t<div class=\"fa-table__search-operation\">\n\t\t\t\t\t\t\t\t\t\t\t<ElButton\n\t\t\t\t\t\t\t\t\t\t\t\tloading={tableState.loading}\n\t\t\t\t\t\t\t\t\t\t\t\tloadingIcon={Eleme}\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"搜索\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tplain\n\t\t\t\t\t\t\t\t\t\t\t\ticon={Refresh}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => props.search()}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t搜索\n\t\t\t\t\t\t\t\t\t\t\t</ElButton>\n\t\t\t\t\t\t\t\t\t\t\t<ElButton\n\t\t\t\t\t\t\t\t\t\t\t\tloading={tableState.loading}\n\t\t\t\t\t\t\t\t\t\t\t\tloadingIcon={Eleme}\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"重置\"\n\t\t\t\t\t\t\t\t\t\t\t\ticon={Brush}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => props.reset()}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t重置\n\t\t\t\t\t\t\t\t\t\t\t</ElButton>\n\t\t\t\t\t\t\t\t\t\t\t{props.advancedSearchDrawer\n\t\t\t\t\t\t\t\t\t\t\t\t? state.advancedSearchColumns.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ElButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloading={tableState.loading}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloadingIcon={Eleme}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"高级搜索\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"info\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplain\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon={Search}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => advancedSearchRef.value.open()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t高级搜索\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ElButton>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t: state.showCollapsed && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ElButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloading={tableState.loading}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloadingIcon={Eleme}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={state.collapsed ? \"展开\" : \"折叠\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlink\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.collapsed = !state.collapsed;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{state.collapsed ? \"展开\" : \"折叠\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ElIcon>{state.collapsed ? <ArrowDown /> : <ArrowUp />}</ElIcon>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ElButton>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</FaLayoutGridItem>\n\t\t\t\t\t\t\t\t</FaLayoutGrid>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</form>\n\t\t\t\t\t\t{props.advancedSearchDrawer && state.advancedSearchColumns.length > 0 && (\n\t\t\t\t\t\t\t<FaDrawer\n\t\t\t\t\t\t\t\tref={advancedSearchRef}\n\t\t\t\t\t\t\t\tclass=\"fa-table__search-advanced\"\n\t\t\t\t\t\t\t\tsize=\"20%\"\n\t\t\t\t\t\t\t\ttitle=\"高级搜索\"\n\t\t\t\t\t\t\t\tappendToBody={false}\n\t\t\t\t\t\t\t\tshowCloseButton={false}\n\t\t\t\t\t\t\t\tshowConfirmButton={false}\n\t\t\t\t\t\t\t\tshowFullscreen={false}\n\t\t\t\t\t\t\t\tshowRefresh={false}\n\t\t\t\t\t\t\t\tonConfirmClick={() => props.search()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<form class=\"el-form el-form--default el-form--label-top\">\n\t\t\t\t\t\t\t\t\t<FaLayoutGrid gap={[20, 0]} cols={{ xs: 2, sm: 3, md: 4, lg: 5, xl: 6 }}>\n\t\t\t\t\t\t\t\t\t\t{state.advancedSearchColumns.map((item, index) => (\n\t\t\t\t\t\t\t\t\t\t\t<FaLayoutGridItem key={item.prop ?? item?.search?.key} {...getResponsive(item.search)} index={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"el-form-item el-form-item--default el-form-item--label-top\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"el-form-item__label\">{item.search.label}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"el-form-item__content\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.search.slot ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tslots[item.search.slot] &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tslots[item.search.slot]({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn: item,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsearch: props.search,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...getTableDefaultSlots(tableState),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FaTableSearchFormItem column={item} search={props.search} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</FaLayoutGridItem>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</FaLayoutGrid>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</FaDrawer>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t);\n\t},\n});\n"],"names":["_isSlot","s","Object","prototype","toString","call","_isVNode","name","props","show","type","Boolean","required","collapsedSearch","advancedSearchDrawer","cols","definePropType","String","Number","default","xs","sm","md","lg","xl","search","Function","reset","slots","makeSlots","setup","expose","_globalSize","useGlobalSize","gridRef","ref","tableState","inject","tableStateKey","breakPoint","computed","value","state","reactive","refreshing","height","collapsed","showCollapsed","searchColumns","reduce","prev","current","span","offset","withDefineType","advancedSearchColumns","undefined","faTableSearchFormRef","advancedSearchRef","getResponsive","item","handleBreakPointChange","filter","f","slice","watch","newValue","setTimeout","immediate","useRender","_slot","length","_createVNode","loading","FaLayoutGrid","map","index","FaLayoutGridItem","_mergeProps","key","prop","label","slot","column","getTableDefaultSlots","FaTableSearchFormItem","ElButton","Eleme","Refresh","onClick","_createTextVNode","Brush","Search","open","ElIcon","ArrowDown","ArrowUp","FaDrawer","onConfirmClick"],"mappings":"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"}