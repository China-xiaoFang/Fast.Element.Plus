{"version":3,"file":"dialog.mjs","sources":["../../../../../packages/components/dialog/src/dialog.tsx"],"sourcesContent":["import type { VNode } from \"vue\";\nimport { Fragment, computed, defineComponent, nextTick, reactive, ref, watch } from \"vue\";\nimport { Close, Eleme, FullScreen, Refresh } from \"@element-plus/icons-vue\";\nimport { FullScreenExit } from \"@fast-element-plus/icons-vue\";\nimport { consoleError, definePropType, execFunction, makeSlots, useExpose, useProps, useRender } from \"@fast-element-plus/utils\";\nimport type { DialogInstance } from \"element-plus\";\nimport { ElButton, ElDialog, ElIcon, ElMessage, ElMessageBox, ElScrollbar, dialogEmits, dialogProps } from \"element-plus\";\nimport { isBoolean, isNumber } from \"lodash-unified\";\n\nexport const faDialogProps = {\n\t...dialogProps,\n\t/** @description whether to append Dialog itself to body. A nested Dialog should have this attribute set to `true` */\n\tappendToBody: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description enable dragging feature for Dialog */\n\tdraggable: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description destroy elements in Dialog when closed */\n\tdestroyOnClose: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description draggable Dialog can overflow the viewport */\n\toverflow: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description 高度 */\n\theight: {\n\t\ttype: [String, Number],\n\t},\n\t/** @description 显示刷新按钮 */\n\tshowRefresh: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description 显示全屏图标 */\n\tshowFullscreen: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description 显示关闭按钮 */\n\tshowCloseButton: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description 显示确认按钮 */\n\tshowConfirmButton: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description 禁用确认按钮 */\n\tdisabledConfirmButton: Boolean,\n\t/** @description 关闭按钮文字，默认取消 */\n\tcloseButtonText: {\n\t\ttype: String,\n\t\tdefault: \"取消\",\n\t},\n\t/** @description 确认按钮文字，默认确认 */\n\tconfirmButtonText: {\n\t\ttype: String,\n\t\tdefault: \"确认\",\n\t},\n\t/** @description 隐藏底部操作 */\n\thideFooter: Boolean,\n\t/** @description 撑满高度 */\n\tfillHeight: Boolean,\n\t/** @description 显示关闭回调 */\n\tshowBeforeClose: Boolean,\n\t/** @description 打开之后 */\n\tafterOpen: {\n\t\ttype: definePropType<() => void>(Function),\n\t},\n};\n\nexport const faDialogEmits = {\n\t...dialogEmits,\n\t/** @description v-model 回调 */\n\t\"update:modelValue\": (value: boolean): boolean => isBoolean(value),\n\t/** @description 确认按钮点击事件 */\n\tconfirmClick: (): boolean => true,\n};\n\ntype FaDialogSlots = {\n\t/** @description 默认内容插槽 */\n\tdefault: { loading: boolean };\n\t/** @description 头部插槽 */\n\theader: { loading: boolean; close: () => void };\n\t/** @description 底部插槽 */\n\tfooter: { loading: boolean; close: () => void };\n};\n\nexport default defineComponent({\n\tname: \"FaDialog\",\n\tprops: faDialogProps,\n\temits: faDialogEmits,\n\tslots: makeSlots<FaDialogSlots>(),\n\tsetup(props, { attrs, slots, emit, expose }) {\n\t\tconst state = reactive({\n\t\t\tloading: false,\n\t\t\tvisible: false,\n\t\t\tfullscreen: false,\n\t\t\twidth: computed(() => {\n\t\t\t\tif (!props.width) return \"auto\";\n\t\t\t\tif (isNumber(props.width)) return `${props.width}px`;\n\t\t\t\treturn props.width;\n\t\t\t}),\n\t\t\theight: computed(() => {\n\t\t\t\tif (!props.height) return \"auto\";\n\t\t\t\tif (isNumber(props.height)) return `${props.height}px`;\n\t\t\t\treturn props.height;\n\t\t\t}),\n\t\t\tmaxHeight: computed(() => {\n\t\t\t\tlet maxHeight = \"calc(\";\n\t\t\t\tif (state.fullscreen) {\n\t\t\t\t\tmaxHeight += \"100vh\";\n\t\t\t\t} else {\n\t\t\t\t\tmaxHeight += \"var(--fa-dialog-height)\";\n\t\t\t\t}\n\t\t\t\tmaxHeight += \" - var(--fa-dialog-header-height)\";\n\n\t\t\t\tif (!props.hideFooter) {\n\t\t\t\t\tmaxHeight += \" - var(--fa-dialog-footer-height)\";\n\t\t\t\t}\n\t\t\t\t// 16px(内容padding高度) - 2px(线条高度)\n\t\t\t\tmaxHeight += \" - 18px)\";\n\t\t\t\treturn maxHeight;\n\t\t\t}),\n\t\t\trefreshing: false,\n\t\t});\n\n\t\tconst dialogRef = ref<DialogInstance>();\n\n\t\tlet cacheOpenFunction = undefined;\n\n\t\tconst handleOpen = (openFunction?: () => void | Promise<void>): void => {\n\t\t\tstate.visible = true;\n\t\t\tcacheOpenFunction = openFunction;\n\t\t\tnextTick(() => {\n\t\t\t\tstate.loading = true;\n\t\t\t\texecFunction(props.afterOpen ?? openFunction)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\temit(\"open\");\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tconsoleError(\"FaDialog\", error);\n\t\t\t\t\t\t// 自动关闭\n\t\t\t\t\t\tstate.visible = false;\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tstate.loading = false;\n\t\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\tconst handleClose = (closeFunction?: () => void | Promise<void>): void => {\n\t\t\tstate.loading = true;\n\t\t\texecFunction(closeFunction)\n\t\t\t\t.then(() => {\n\t\t\t\t\temit(\"close\");\n\t\t\t\t\tstate.visible = false;\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsoleError(\"FaDialog\", error);\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tstate.loading = false;\n\t\t\t\t});\n\t\t};\n\n\t\tconst handleLoading = (loadingFunction: () => void | Promise<void>): void => {\n\t\t\tstate.loading = true;\n\t\t\texecFunction(loadingFunction)\n\t\t\t\t.then()\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsoleError(\"FaDialog\", error);\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tstate.loading = false;\n\t\t\t\t});\n\t\t};\n\n\t\tconst handleRefresh = (): void => {\n\t\t\tstate.refreshing = true;\n\t\t\tstate.loading = true;\n\t\t\tsetTimeout(() => {\n\t\t\t\tstate.refreshing = false;\n\t\t\t\thandleOpen(cacheOpenFunction);\n\t\t\t\tElMessage.success(\"刷新成功\");\n\t\t\t}, 500);\n\t\t};\n\n\t\tconst handleBeforeClose = (done: () => void): void => {\n\t\t\tif (state.loading) return;\n\t\t\t// 解决 image 预览摁下 ese 会关闭弹窗的问题\n\t\t\tif (document.querySelector(\".el-image-viewer__wrapper\")) return;\n\n\t\t\tconst newDone = (): void => {\n\t\t\t\texecFunction(props.beforeClose)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\temit(\"close\");\n\t\t\t\t\t\tdone();\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tconsoleError(\"FaDialog\", error);\n\t\t\t\t\t});\n\t\t\t};\n\n\t\t\tif (props.showBeforeClose) {\n\t\t\t\tElMessageBox.confirm(\"确定关闭？\", { type: \"warning\" }).then(() => {\n\t\t\t\t\tnewDone();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tnewDone();\n\t\t\t}\n\t\t};\n\n\t\tconst handleFullscreen = (): void => {\n\t\t\tif (state.loading) return;\n\t\t\tstate.fullscreen = !state.fullscreen;\n\t\t};\n\n\t\tconst handleConfirmClick = (): void => {\n\t\t\tif (state.loading) return;\n\t\t\temit(\"confirmClick\");\n\t\t};\n\n\t\tconst handleCloseClick = (): void => {\n\t\t\tif (state.loading) return;\n\t\t\thandleClose();\n\t\t};\n\n\t\twatch(\n\t\t\t() => state.visible,\n\t\t\t(newValue) => {\n\t\t\t\temit(\"update:modelValue\", newValue);\n\t\t\t}\n\t\t);\n\n\t\tconst elDialogProps = useProps(props, dialogProps, [\"modelValue\", \"fullscreen\", \"showClose\", \"beforeClose\"]);\n\n\t\tuseRender(() => (\n\t\t\t<ElDialog\n\t\t\t\t{...elDialogProps.value}\n\t\t\t\tref={dialogRef}\n\t\t\t\tclass={[\"fa-dialog\", { \"fa-dialog__fill-height\": props.fillHeight, \"fa-dialog__fullscreen\": state.fullscreen }]}\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: state.width,\n\t\t\t\t\tmaxWidth: state.width,\n\t\t\t\t\theight: state.height,\n\t\t\t\t\tmaxHeight: state.height,\n\t\t\t\t}}\n\t\t\t\tvModel={state.visible}\n\t\t\t\tfullscreen={state.fullscreen}\n\t\t\t\tshowClose={false}\n\t\t\t\tbeforeClose={handleBeforeClose}\n\t\t\t\tonOpened={() => emit(\"opened\")}\n\t\t\t\tonClosed={() => emit(\"closed\")}\n\t\t\t\tonOpenAutoFocus={() => emit(\"openAutoFocus\")}\n\t\t\t\tonCloseAutoFocus={() => emit(\"closeAutoFocus\")}\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\theader: () => (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<div class=\"fa-dialog__header-title\">\n\t\t\t\t\t\t\t\t{props.title}\n\t\t\t\t\t\t\t\t{slots.header && slots.header({ loading: state.loading, close: handleCloseClick })}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{props.showRefresh && (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\ttitle=\"刷新\"\n\t\t\t\t\t\t\t\t\tclass={[\n\t\t\t\t\t\t\t\t\t\t\"fa-dialog__header-icon\",\n\t\t\t\t\t\t\t\t\t\tstate.loading ? \"fa__click__disabled fa__click__disabled__cursor \" : \"fa__hover__twinkle\",\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\tonClick={handleRefresh}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ElIcon>\n\t\t\t\t\t\t\t\t\t\t<Refresh />\n\t\t\t\t\t\t\t\t\t</ElIcon>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{props.showFullscreen && (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\ttitle={state.fullscreen ? \"关闭全屏显示\" : \"全屏显示\"}\n\t\t\t\t\t\t\t\t\tclass={[\n\t\t\t\t\t\t\t\t\t\t\"fa-dialog__header-icon\",\n\t\t\t\t\t\t\t\t\t\tstate.loading ? \"fa__click__disabled fa__click__disabled__cursor \" : \"fa__hover__twinkle\",\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\tonClick={handleFullscreen}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ElIcon>{state.fullscreen ? <FullScreenExit /> : <FullScreen />}</ElIcon>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{props.showClose && (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\ttitle=\"关闭\"\n\t\t\t\t\t\t\t\t\tclass={[\n\t\t\t\t\t\t\t\t\t\t\"fa-dialog__header-icon\",\n\t\t\t\t\t\t\t\t\t\tstate.loading ? \"fa__click__disabled fa__click__disabled__cursor \" : \"fa__hover__twinkle\",\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\tonClick={handleCloseClick}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ElIcon>\n\t\t\t\t\t\t\t\t\t\t<Close />\n\t\t\t\t\t\t\t\t\t</ElIcon>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t),\n\t\t\t\t\tdefault: () => (\n\t\t\t\t\t\t<ElScrollbar\n\t\t\t\t\t\t\tclass=\"fa-dialog__scrollbar\"\n\t\t\t\t\t\t\twrapStyle={{ \"--fa-dialog-scrollbar__max-height\": state.maxHeight, maxHeight: \"var(--fa-dialog-scrollbar__max-height)\" }}\n\t\t\t\t\t\t\tvLoading={state.loading}\n\t\t\t\t\t\t\telement-loading-text=\"加载中...\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{state.refreshing ? null : slots.default && slots.default(state)}\n\t\t\t\t\t\t</ElScrollbar>\n\t\t\t\t\t),\n\t\t\t\t\t...(!props.hideFooter && {\n\t\t\t\t\t\tfooter: (): VNode[] => (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t{slots.footer && slots.footer({ loading: state.loading, close: handleCloseClick })}\n\t\t\t\t\t\t\t\t{props.showCloseButton && (\n\t\t\t\t\t\t\t\t\t<ElButton disabled={state.loading} onClick={handleCloseClick}>\n\t\t\t\t\t\t\t\t\t\t{props.closeButtonText}\n\t\t\t\t\t\t\t\t\t</ElButton>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{props.showConfirmButton && (\n\t\t\t\t\t\t\t\t\t<ElButton\n\t\t\t\t\t\t\t\t\t\tloading={state.loading}\n\t\t\t\t\t\t\t\t\t\tloadingIcon={Eleme}\n\t\t\t\t\t\t\t\t\t\tdisabled={props.disabledConfirmButton}\n\t\t\t\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleConfirmClick}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{state.loading ? \"加载中...\" : props.confirmButtonText}\n\t\t\t\t\t\t\t\t\t</ElButton>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t),\n\t\t\t\t\t}),\n\t\t\t\t}}\n\t\t\t</ElDialog>\n\t\t));\n\n\t\treturn useExpose(expose, {\n\t\t\t...computed(() => ({\n\t\t\t\tdialogContentRef: dialogRef.value?.dialogContentRef,\n\t\t\t\tresetPosition: dialogRef.value?.resetPosition,\n\t\t\t})).value,\n\t\t\t/** @description 加载状态 */\n\t\t\tloading: state.loading,\n\t\t\t/** @description 是否显示 */\n\t\t\tvisible: state.visible,\n\t\t\t/** @description 打开弹窗 */\n\t\t\topen: handleOpen,\n\t\t\t/** @description 关闭弹窗 */\n\t\t\tclose: handleClose,\n\t\t\t/** @description 刷新弹窗 */\n\t\t\trefresh: handleRefresh,\n\t\t\t/** @description 弹窗加载 */\n\t\t\tdoLoading: handleLoading,\n\t\t});\n\t},\n});\n"],"names":["faDialogProps","dialogProps","appendToBody","type","Boolean","default","draggable","destroyOnClose","overflow","height","String","Number","showRefresh","showFullscreen","showCloseButton","showConfirmButton","disabledConfirmButton","closeButtonText","confirmButtonText","hideFooter","fillHeight","showBeforeClose","afterOpen","definePropType","Function","faDialogEmits","dialogEmits","value","isBoolean","confirmClick","defineComponent","name","props","emits","slots","makeSlots","setup","attrs","emit","expose","state","reactive","loading","visible","fullscreen","width","computed","isNumber","maxHeight","refreshing","dialogRef","ref","cacheOpenFunction","undefined","handleOpen","openFunction","nextTick","execFunction","then","catch","error","consoleError","finally","handleClose","closeFunction","handleLoading","loadingFunction","handleRefresh","setTimeout","ElMessage","success","handleBeforeClose","done","document","querySelector","newDone","beforeClose","ElMessageBox","confirm","handleFullscreen","handleConfirmClick","handleCloseClick","watch","newValue","elDialogProps","useProps","useRender","_createVNode","ElDialog","_mergeProps","maxWidth","$event","onOpened","onClosed","onOpenAutoFocus","onCloseAutoFocus","header","_Fragment","title","close","ElIcon","Refresh","FullScreenExit","FullScreen","showClose","Close","_withDirectives","ElScrollbar","_resolveDirective","footer","ElButton","Eleme","useExpose","dialogContentRef","resetPosition","open","refresh","doLoading"],"mappings":";;;;;;;;;;;;AASO,MAAMA,gBAAgB;AAAA,EAC5B,GAAGC;AAAAA;AAAAA,EAEHC,cAAc;AAAA,IACbC,MAAMC;AAAAA,IACNC,SAAS;AAAA,EACT;AAAA;AAAA,EAEDC,WAAW;AAAA,IACVH,MAAMC;AAAAA,IACNC,SAAS;AAAA,EACT;AAAA;AAAA,EAEDE,gBAAgB;AAAA,IACfJ,MAAMC;AAAAA,IACNC,SAAS;AAAA,EACT;AAAA;AAAA,EAEDG,UAAU;AAAA,IACTL,MAAMC;AAAAA,IACNC,SAAS;AAAA,EACT;AAAA;AAAA,EAEDI,QAAQ;AAAA,IACPN,MAAM,CAACO,QAAQC,MAAM;AAAA,EACrB;AAAA;AAAA,EAEDC,aAAa;AAAA,IACZT,MAAMC;AAAAA,IACNC,SAAS;AAAA,EACT;AAAA;AAAA,EAEDQ,gBAAgB;AAAA,IACfV,MAAMC;AAAAA,IACNC,SAAS;AAAA,EACT;AAAA;AAAA,EAEDS,iBAAiB;AAAA,IAChBX,MAAMC;AAAAA,IACNC,SAAS;AAAA,EACT;AAAA;AAAA,EAEDU,mBAAmB;AAAA,IAClBZ,MAAMC;AAAAA,IACNC,SAAS;AAAA,EACT;AAAA;AAAA,EAEDW,uBAAuBZ;AAAAA;AAAAA,EAEvBa,iBAAiB;AAAA,IAChBd,MAAMO;AAAAA,IACNL,SAAS;AAAA,EACT;AAAA;AAAA,EAEDa,mBAAmB;AAAA,IAClBf,MAAMO;AAAAA,IACNL,SAAS;AAAA,EACT;AAAA;AAAA,EAEDc,YAAYf;AAAAA;AAAAA,EAEZgB,YAAYhB;AAAAA;AAAAA,EAEZiB,iBAAiBjB;AAAAA;AAAAA,EAEjBkB,WAAW;AAAA,IACVnB,MAAMoB,eAA2BC,QAAQ;AAAA,EAC1C;AACD;AAEO,MAAMC,gBAAgB;AAAA,EAC5B,GAAGC;AAAAA;AAAAA,EAEH,qBAAsBC,WAA4BC,UAAUD,KAAK;AAAA;AAAA,EAEjEE,cAAcA,MAAe;AAC9B;AAWA,MAAeC,yCAAgB;AAAA,EAC9BC,MAAM;AAAA,EACNC,OAAOhC;AAAAA,EACPiC,OAAOR;AAAAA,EACPS,OAAOC,UAA0B;AAAA,EACjCC,MAAMJ,OAAO;AAAA,IAAEK;AAAAA,IAAOH;AAAAA,IAAOI;AAAAA,IAAMC;AAAAA,EAAO,GAAG;AAC5C,UAAMC,QAAQC,SAAS;AAAA,MACtBC,SAAS;AAAA,MACTC,SAAS;AAAA,MACTC,YAAY;AAAA,MACZC,OAAOC,SAAS,MAAM;AACrB,YAAI,CAACd,MAAMa,MAAO,QAAO;AACzB,YAAIE,SAASf,MAAMa,KAAK,EAAG,QAAO,GAAGb,MAAMa,KAAK;AAChD,eAAOb,MAAMa;AAAAA,MACd,CAAC;AAAA,MACDpC,QAAQqC,SAAS,MAAM;AACtB,YAAI,CAACd,MAAMvB,OAAQ,QAAO;AAC1B,YAAIsC,SAASf,MAAMvB,MAAM,EAAG,QAAO,GAAGuB,MAAMvB,MAAM;AAClD,eAAOuB,MAAMvB;AAAAA,MACd,CAAC;AAAA,MACDuC,WAAWF,SAAS,MAAM;AACzB,YAAIE,YAAY;AAChB,YAAIR,MAAMI,YAAY;AACrBI,uBAAa;AAAA,QACd,OAAO;AACNA,uBAAa;AAAA,QACd;AACAA,qBAAa;AAEb,YAAI,CAAChB,MAAMb,YAAY;AACtB6B,uBAAa;AAAA,QACd;AAEAA,qBAAa;AACb,eAAOA;AAAAA,MACR,CAAC;AAAA,MACDC,YAAY;AAAA,IACb,CAAC;AAED,UAAMC,YAAYC;AAElB,QAAIC,oBAAoBC;AAExB,UAAMC,aAAcC,kBAAoD;AACvEf,YAAMG,UAAU;AAChBS,0BAAoBG;AACpBC,eAAS,MAAM;AACdhB,cAAME,UAAU;AAChBe,qBAAazB,MAAMV,aAAaiC,YAAY,EAC1CG,KAAK,MAAM;AACXpB,eAAK,MAAM;AAAA,QACZ,CAAC,EACAqB,MAAOC,WAAU;AACjBC,uBAAa,YAAYD,KAAK;AAE9BpB,gBAAMG,UAAU;AAAA,QACjB,CAAC,EACAmB,QAAQ,MAAM;AACdtB,gBAAME,UAAU;AAAA,QACjB,CAAC;AAAA,MACH,CAAC;AAAA;AAGF,UAAMqB,cAAeC,mBAAqD;AACzExB,YAAME,UAAU;AAChBe,mBAAaO,aAAa,EACxBN,KAAK,MAAM;AACXpB,aAAK,OAAO;AACZE,cAAMG,UAAU;AAAA,MACjB,CAAC,EACAgB,MAAOC,WAAU;AACjBC,qBAAa,YAAYD,KAAK;AAAA,MAC/B,CAAC,EACAE,QAAQ,MAAM;AACdtB,cAAME,UAAU;AAAA,MACjB,CAAC;AAAA;AAGH,UAAMuB,gBAAiBC,qBAAsD;AAC5E1B,YAAME,UAAU;AAChBe,mBAAaS,eAAe,EAC1BR,KAAI,EACJC,MAAOC,WAAU;AACjBC,qBAAa,YAAYD,KAAK;AAAA,MAC/B,CAAC,EACAE,QAAQ,MAAM;AACdtB,cAAME,UAAU;AAAA,MACjB,CAAC;AAAA;AAGH,UAAMyB,gBAAgBA,MAAY;AACjC3B,YAAMS,aAAa;AACnBT,YAAME,UAAU;AAChB0B,iBAAW,MAAM;AAChB5B,cAAMS,aAAa;AACnBK,mBAAWF,iBAAiB;AAC5BiB,kBAAUC,QAAQ,MAAM;AAAA,MACxB,GAAE,GAAG;AAAA;AAGP,UAAMC,oBAAqBC,UAA2B;AACrD,UAAIhC,MAAME,QAAS;AAEnB,UAAI+B,SAASC,cAAc,2BAA2B,EAAG;AAEzD,YAAMC,UAAUA,MAAY;AAC3BlB,qBAAazB,MAAM4C,WAAW,EAC5BlB,KAAK,MAAM;AACXpB,eAAK,OAAO;AACZkC;QACD,CAAC,EACAb,MAAOC,WAAU;AACjBC,uBAAa,YAAYD,KAAK;AAAA,QAC/B,CAAC;AAAA;AAGH,UAAI5B,MAAMX,iBAAiB;AAC1BwD,qBAAaC,QAAQ,SAAS;AAAA,UAAE3E,MAAM;AAAA,QAAU,CAAC,EAAEuD,KAAK,MAAM;AAC7DiB;QACD,CAAC;AAAA,MACF,OAAO;AACNA;MACD;AAAA;AAGD,UAAMI,mBAAmBA,MAAY;AACpC,UAAIvC,MAAME,QAAS;AACnBF,YAAMI,aAAa,CAACJ,MAAMI;AAAAA;AAG3B,UAAMoC,qBAAqBA,MAAY;AACtC,UAAIxC,MAAME,QAAS;AACnBJ,WAAK,cAAc;AAAA;AAGpB,UAAM2C,mBAAmBA,MAAY;AACpC,UAAIzC,MAAME,QAAS;AACnBqB;;AAGDmB,UACC,MAAM1C,MAAMG,SACXwC,cAAa;AACb7C,WAAK,qBAAqB6C,QAAQ;AAAA,IACnC,CACD;AAEA,UAAMC,gBAAgBC,SAASrD,OAAO/B,aAAa,CAAC,cAAc,cAAc,aAAa,aAAa,CAAC;AAE3GqF,cAAU,MAAAC,YAAAC,UAAAC,WAEJL,cAAczD,OAAK;AAAA,MAAA,OAClBuB;AAAAA,MAAS,SACP,CAAC,aAAa;AAAA,QAAE,0BAA0BlB,MAAMZ;AAAAA,QAAY,yBAAyBoB,MAAMI;AAAAA,MAAW,CAAC;AAAA,MAAC,SACxG;AAAA,QACNC,OAAOL,MAAMK;AAAAA,QACb6C,UAAUlD,MAAMK;AAAAA,QAChBpC,QAAQ+B,MAAM/B;AAAAA,QACduC,WAAWR,MAAM/B;AAAAA,MACjB;AAAA,MAAA,cACO+B,MAAMG;AAAAA,MAAO,uBAAAgD,YAAbnD,MAAMG,UAAOgD;AAAAA,MAAA,cACTnD,MAAMI;AAAAA,MAAU,aACjB;AAAA,MAAK,eACH2B;AAAAA,MAAiB,YACpBqB,MAAMtD,KAAK,QAAQ;AAAA,MAAC,YACpBuD,MAAMvD,KAAK,QAAQ;AAAA,MAAC,mBACbwD,MAAMxD,KAAK,eAAe;AAAA,MAAC,oBAC1ByD,MAAMzD,KAAK,gBAAgB;AAAA,IAAC,CAAA,GAAA;AAAA,MAG7C0D,QAAQA,MAAAT,YAAAU,iBAAAV,YAAA,OAAA;AAAA,QAAA,SAAA;AAAA,SAGJvD,CAAAA,MAAMkE,OACNhE,MAAM8D,UAAU9D,MAAM8D,OAAO;AAAA,QAAEtD,SAASF,MAAME;AAAAA,QAASyD,OAAOlB;AAAAA,MAAkB,CAAA,CAAC,CAElFjD,GAAAA,MAAMpB,eAAW2E,YAAA,OAAA;AAAA,QAAA,SAAA;AAAA,QAAA,SAGT,CACN,0BACA/C,MAAME,UAAU,qDAAqD,oBAAoB;AAAA,QACzF,WACQyB;AAAAA,SAAaoB,CAAAA,YAAAa,QAAA,MAAA;AAAA,QAAA/F,SAAAA,MAAAkF,CAAAA,YAAAc,SAAA,MAAA,IAAA,CAAA;AAAA,MAAA,CAAA,CAAA,CAAA,GAOvBrE,MAAMnB,kBAAc0E,YAAA,OAAA;AAAA,QAAA,SAEZ/C,MAAMI,aAAa,WAAW;AAAA,QAAM,SACpC,CACN,0BACAJ,MAAME,UAAU,qDAAqD,oBAAoB;AAAA,QACzF,WACQqC;AAAAA,SAAgBQ,CAAAA,YAAAa,QAAA,MAAA;AAAA,QAAA/F,SAAAA,MAEhBmC,CAAAA,MAAMI,aAAU2C,YAAAe,gBAAA,MAAA,IAAA,IAAAf,YAAAgB,YAAsC,MAAA,IAAA,CAAA;AAAA,MAAA,CAAA,CAAA,CAAA,GAGhEvE,MAAMwE,aAASjB,YAAA,OAAA;AAAA,QAAA,SAAA;AAAA,QAAA,SAGP,CACN,0BACA/C,MAAME,UAAU,qDAAqD,oBAAoB;AAAA,QACzF,WACQuC;AAAAA,SAAgBM,CAAAA,YAAAa,QAAA,MAAA;AAAA,QAAA/F,SAAAA,MAAAkF,CAAAA,YAAAkB,OAAA,MAAA,IAAA,CAAA;AAAA,MAAA,CAAA,CAAA,CAAA,CAM1B,CAEF;AAAA,MACDpG,SAASA,MAAAqG,eAAAnB,YAAAoB,aAAA;AAAA,QAAA,SAAA;AAAA,QAAA,aAGI;AAAA,UAAE,qCAAqCnE,MAAMQ;AAAAA,UAAWA,WAAW;AAAA,QAA0C;AAAA,QAAA,wBAAA;AAAA,MAAA,GAAA;AAAA,QAAA3C,SAAAA,MAAA,CAIvHmC,MAAMS,aAAa,OAAOf,MAAM7B,WAAW6B,MAAM7B,QAAQmC,KAAK,CAAC;AAAA,MAAA,CAAA,GAAA,CAAA,CAAAoE,iBAAA,SAAA,GAHtDpE,MAAME,OAAO,CAKxB,CAAA;AAAA,MACD,GAAI,CAACV,MAAMb,cAAc;AAAA,QACxB0F,QAAQA,MAAAtB,YAAAU,UAAA,MAAA,CAEL/D,MAAM2E,UAAU3E,MAAM2E,OAAO;AAAA,UAAEnE,SAASF,MAAME;AAAAA,UAASyD,OAAOlB;AAAAA,QAAkB,CAAA,GAChFjD,MAAMlB,mBAAeyE,YAAAuB,UAAA;AAAA,UAAA,YACDtE,MAAME;AAAAA,UAAO,WAAWuC;AAAAA,QAAgB,GAAA;AAAA,UAAA5E,SAAAA,MAC1D2B,CAAAA,MAAMf,eAAe;AAAA,QAAA,CAAA,GAGvBe,MAAMjB,qBAAiBwE,YAAAuB,UAAA;AAAA,UAAA,WAEbtE,MAAME;AAAAA,UAAO,eACTqE;AAAAA,UAAK,YACR/E,MAAMhB;AAAAA,UAAqB,QAAA;AAAA,UAAA,WAE5BgE;AAAAA,QAAkB,GAAA;AAAA,UAAA3E,SAAAA,MAAA,CAE1BmC,MAAME,UAAU,WAAWV,MAAMd,iBAAiB;AAAA,QAEpD,CAAA,CAAA,CAAA;AAAA;IAGF,CAAA,CAGJ;AAED,WAAO8F,UAAUzE,QAAQ;AAAA,MACxB,GAAGO,SAAS,MAAO;;AAAA;AAAA,UAClBmE,mBAAkB/D,eAAUvB,UAAVuB,mBAAiB+D;AAAAA,UACnCC,gBAAehE,eAAUvB,UAAVuB,mBAAiBgE;AAAAA,QAChC;AAAA,OAAC,EAAEvF;AAAAA;AAAAA,MAEJe,SAASF,MAAME;AAAAA;AAAAA,MAEfC,SAASH,MAAMG;AAAAA;AAAAA,MAEfwE,MAAM7D;AAAAA;AAAAA,MAEN6C,OAAOpC;AAAAA;AAAAA,MAEPqD,SAASjD;AAAAA;AAAAA,MAETkD,WAAWpD;AAAAA,IACZ,CAAC;AAAA,EACF;AACD,CAAC;"}