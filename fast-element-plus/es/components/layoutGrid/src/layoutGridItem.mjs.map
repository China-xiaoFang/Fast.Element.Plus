{"version":3,"file":"layoutGridItem.mjs","sources":["../../../../../packages/components/layoutGrid/src/layoutGridItem.tsx"],"sourcesContent":["import { computed, defineComponent, inject, reactive, ref, watch } from \"vue\";\nimport { definePropType, makeSlots, useExpose, useRender } from \"@fast-china/utils\";\nimport type { FaLayoutGridItemResponsive } from \"./layoutGrid.type\";\nimport type { FaLayoutGridBreakPoint } from \"@fast-element-plus/components/layoutGrid\";\nimport type { Ref } from \"vue\";\n\ntype FaLayoutGridItemSlots = {\n\t/** @description 默认内容插槽 */\n\tdefault: never;\n};\n\nexport default defineComponent({\n\tname: \"FaLayoutGridItem\",\n\tprops: {\n\t\t/** @description 偏移 */\n\t\toffset: { type: Number, default: 0 },\n\t\t/** @description 占位 */\n\t\tspan: { type: Number, default: 1 },\n\t\t/** @description 后缀 */\n\t\tsuffix: { type: Boolean, default: false },\n\t\t/** @description 响应式，小于480px屏幕配置 */\n\t\txs: {\n\t\t\ttype: definePropType<FaLayoutGridItemResponsive>(Object),\n\t\t\tdefault: undefined as FaLayoutGridItemResponsive,\n\t\t},\n\t\t/** @description 响应式，平板竖屏配置 */\n\t\tsm: {\n\t\t\ttype: definePropType<FaLayoutGridItemResponsive>(Object),\n\t\t\tdefault: undefined as FaLayoutGridItemResponsive,\n\t\t},\n\t\t/** @description 响应式，平板横屏配置 */\n\t\tmd: {\n\t\t\ttype: definePropType<FaLayoutGridItemResponsive>(Object),\n\t\t\tdefault: undefined as FaLayoutGridItemResponsive,\n\t\t},\n\t\t/** @description 响应式，小型桌面配置 */\n\t\tlg: {\n\t\t\ttype: definePropType<FaLayoutGridItemResponsive>(Object),\n\t\t\tdefault: undefined as FaLayoutGridItemResponsive,\n\t\t},\n\t\t/** @description 响应式，大型桌面配置 */\n\t\txl: {\n\t\t\ttype: definePropType<FaLayoutGridItemResponsive>(Object),\n\t\t\tdefault: undefined as FaLayoutGridItemResponsive,\n\t\t},\n\t},\n\tslots: makeSlots<FaLayoutGridItemSlots>(),\n\tsetup(props, { attrs, slots, emit, expose }) {\n\t\tconst state = reactive({\n\t\t\tshow: true,\n\t\t});\n\n\t\tconst attrsObj = attrs as any;\n\n\t\t// 注入断点\n\t\tconst breakPoint = inject<Ref<FaLayoutGridBreakPoint>>(\"breakPoint\", ref(\"xl\"));\n\t\tconst shouldHiddenIndex = inject<Ref<number>>(\"shouldHiddenIndex\", ref(-1));\n\n\t\twatch(\n\t\t\t() => [shouldHiddenIndex.value, breakPoint.value],\n\t\t\t(n) => {\n\t\t\t\tif (~~attrsObj.index) {\n\t\t\t\t\tstate.show = !(n[0] !== -1 && parseInt(attrsObj.index) >= Number(n[0]));\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ immediate: true }\n\t\t);\n\n\t\tconst gap = inject(\"gap\", 0);\n\t\tconst cols = inject<Ref<number>>(\"cols\", ref(5));\n\n\t\tconst style = computed(() => {\n\t\t\tconst breakPointObk = props[breakPoint.value] as FaLayoutGridItemResponsive;\n\t\t\tconst span = breakPointObk?.span ?? props.span;\n\t\t\tconst offset = breakPointObk?.offset ?? props.offset;\n\t\t\tif (props.suffix) {\n\t\t\t\treturn {\n\t\t\t\t\tgridColumnStart: cols.value - span - offset + 1,\n\t\t\t\t\tgridColumnEnd: `span ${span + offset}`,\n\t\t\t\t\tmarginLeft: offset !== 0 ? `calc(((100% + ${gap}px) / ${span + offset}) * ${offset})` : \"unset\",\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tgridColumn: `span ${span + offset > cols.value ? cols.value : span + offset}/span ${\n\t\t\t\t\t\tspan + offset > cols.value ? cols.value : span + offset\n\t\t\t\t\t}`,\n\t\t\t\t\tmarginLeft: offset !== 0 ? `calc(((100% + ${gap}px) / ${span + offset}) * ${offset})` : \"unset\",\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\tuseRender(() => (\n\t\t\t<div style={style.value} vShow={state.show}>\n\t\t\t\t{slots.default && slots.default()}\n\t\t\t</div>\n\t\t));\n\n\t\treturn useExpose(expose, {\n\t\t\tshow: state.show,\n\t\t});\n\t},\n});\n"],"names":["name","props","offset","type","Number","default","span","suffix","Boolean","xs","definePropType","Object","undefined","sm","md","lg","xl","slots","makeSlots","setup","attrs","emit","expose","state","reactive","show","attrsObj","breakPoint","inject","ref","shouldHiddenIndex","watch","value","n","index","parseInt","immediate","gap","cols","style","computed","breakPointObk","gridColumnStart","gridColumnEnd","marginLeft","gridColumn","useRender","_withDirectives","_createVNode","_vShow","useExpose"],"mappings":";;AAWA,MAAA,iDAA+B;AAAA,EAC9BA,MAAM;AAAA,EACNC,OAAO;AAAA;AAAA,IAENC,QAAQ;AAAA,MAAEC,MAAMC;AAAAA,MAAQC,SAAS;AAAA;;IAEjCC,MAAM;AAAA,MAAEH,MAAMC;AAAAA,MAAQC,SAAS;AAAA;;IAE/BE,QAAQ;AAAA,MAAEJ,MAAMK;AAAAA,MAASH,SAAS;AAAA;;IAElCI,IAAI;AAAA,MACHN,MAAMO,eAA2CC,MAAM;AAAA,MACvDN,SAASO;AAAAA;;IAGVC,IAAI;AAAA,MACHV,MAAMO,eAA2CC,MAAM;AAAA,MACvDN,SAASO;AAAAA;;IAGVE,IAAI;AAAA,MACHX,MAAMO,eAA2CC,MAAM;AAAA,MACvDN,SAASO;AAAAA;;IAGVG,IAAI;AAAA,MACHZ,MAAMO,eAA2CC,MAAM;AAAA,MACvDN,SAASO;AAAAA;;IAGVI,IAAI;AAAA,MACHb,MAAMO,eAA2CC,MAAM;AAAA,MACvDN,SAASO;AAAAA,IACV;AAAA;EAEDK,OAAOC,UAAS;AAAA,EAChBC,MAAMlB,OAAO;AAAA,IAAEmB;AAAAA,IAAOH;AAAAA,IAAOI;AAAAA,IAAMC;AAAAA,EAAO,GAAG;AAC5C,UAAMC,QAAQC,SAAS;AAAA,MACtBC,MAAM;AAAA,IACP,CAAC;AAED,UAAMC,WAAWN;AAGjB,UAAMO,aAAaC,OAAoC,cAAcC,IAAI,IAAI,CAAC;AAC9E,UAAMC,oBAAoBF,OAAoB,qBAAqBC,IAAI,EAAE,CAAC;AAE1EE,UACC,MAAM,CAACD,kBAAkBE,OAAOL,WAAWK,KAAK,GAC/CC,OAAM;AACN,UAAI,CAAC,CAACP,SAASQ,OAAO;AACrBX,cAAME,OAAO,EAAEQ,EAAE,CAAC,MAAM,MAAME,SAAST,SAASQ,KAAK,KAAK9B,OAAO6B,EAAE,CAAC,CAAC;AAAA,MACtE;AAAA,IACD,GACA;AAAA,MAAEG,WAAW;AAAA,IAAK,CACnB;AAEA,UAAMC,MAAMT,OAAO,OAAO,CAAC;AAC3B,UAAMU,OAAOV,OAAoB,QAAQC,IAAI,CAAC,CAAC;AAE/C,UAAMU,QAAQC,SAAS,MAAM;AAC5B,YAAMC,gBAAgBxC,MAAM0B,WAAWK,KAAK;AAC5C,YAAM1B,OAAOmC,eAAenC,QAAQL,MAAMK;AAC1C,YAAMJ,SAASuC,eAAevC,UAAUD,MAAMC;AAC9C,UAAID,MAAMM,QAAQ;AACjB,eAAO;AAAA,UACNmC,iBAAiBJ,KAAKN,QAAQ1B,OAAOJ,SAAS;AAAA,UAC9CyC,eAAe,QAAQrC,OAAOJ,MAAM;AAAA,UACpC0C,YAAY1C,WAAW,IAAI,iBAAiBmC,GAAG,SAAS/B,OAAOJ,MAAM,OAAOA,MAAM,MAAM;AAAA;MAE1F,OAAO;AACN,eAAO;AAAA,UACN2C,YAAY,QAAQvC,OAAOJ,SAASoC,KAAKN,QAAQM,KAAKN,QAAQ1B,OAAOJ,MAAM,SAC1EI,OAAOJ,SAASoC,KAAKN,QAAQM,KAAKN,QAAQ1B,OAAOJ,MAAM;AAAA,UAExD0C,YAAY1C,WAAW,IAAI,iBAAiBmC,GAAG,SAAS/B,OAAOJ,MAAM,OAAOA,MAAM,MAAM;AAAA;MAE1F;AAAA,IACD,CAAC;AAED4C,cAAU,MAAAC,eAAAC,YAAA,OAAA;AAAA,MAAA,SACGT,MAAMP;AAAAA,IAAK,GAAA,CACrBf,MAAMZ,WAAWY,MAAMZ,QAAO,CAAE,CAAA,GAAA,CAAA,CAAA4C,OADF1B,MAAME,IAAI,GAG1C;AAED,WAAOyB,UAAU5B,QAAQ;AAAA,MACxBG,MAAMF,MAAME;AAAAA,IACb,CAAC;AAAA,EACF;AACD,CAAC;"}