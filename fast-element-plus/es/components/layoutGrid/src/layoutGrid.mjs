import{defineComponent as e,ref as s,provide as a,computed as o,onMounted as t,nextTick as r,watch as l,onActivated as p,onUnmounted as n,onDeactivated as i,createVNode as u}from"vue";import{useRender as m,useExpose as c,makeSlots as d,definePropType as f}from"@fast-china/utils";import{isArray as v,isObject as b,isNumber as g}from"lodash-unified";const x=/* @__PURE__ */e({name:"FaLayoutGrid",props:{cols:{type:f([String,Number,Object]),default:()=>({xs:1,sm:2,md:3,lg:4,xl:5})},collapsed:Boolean,collapsedRows:{type:[String,Number],default:1},gap:{type:f([Number,Array]),default:0}},emits:{breakPointChange:({breakPoint:e})=>!0},slots:d(),setup(e,{attrs:d,slots:f,emit:x,expose:y}){const h=s();a("gap",v(e.gap)?e.gap[0]:e.gap);const w=s("xl");a("breakPoint",w);const k=s(-1);a("shouldHiddenIndex",k);const N=o(()=>b(e.cols)?e.cols[w.value]??e.cols:e.cols);a("cols",N);const P=g(e.collapsedRows)?e.collapsedRows:Number(e.collapsedRows),R={xs:{min:0,max:479},sm:{min:480,max:768},md:{min:768,max:1024},lg:{min:1024,max:1440},xl:{min:1440,max:1/0}},O=e=>{if(1!==e.length)throw new Error("未知的多个El");const s=e[0].target.scrollWidth;for(const[a,{min:o,max:t}]of Object.entries(R))if(s>=o&&s<=t){w.value=a;break}};let $=null;t(()=>{r(()=>{$=new ResizeObserver(O),$.observe(h.value)}),l(()=>w.value,e=>{x("breakPointChange",{breakPoint:e})},{immediate:!0})}),p(()=>{r(()=>{$=new ResizeObserver(O),$.observe(h.value)})}),n(()=>{$?.disconnect()}),i(()=>{$?.disconnect()});const j=o(()=>g(e.gap)?`${e.gap}px`:v(e.gap)?`${e.gap[1]}px ${e.gap[0]}px`:"unset"),A=o(()=>({display:"grid",gridGap:j.value,gridTemplateColumns:`repeat(${N.value}, minmax(0, 1fr))`}));return m(()=>{const s=f?.default()??[];if(e.collapsed){const e=[];let a=null;s.forEach(s=>{"object"==typeof s.type&&"FaLayoutGridItem"===s.type.name&&void 0!==s.props?.suffix&&(a=s),"symbol"==typeof s.type&&Array.isArray(s?.children)&&e.push(...s.children)});let o=0;a&&(o=(a.props[w.value]?.span??a.props?.span??1)+(a.props[w.value]?.offset??a.props?.offset??0));try{let s=!1;e.reduce((e=0,a,t)=>{if(e+=(a.props[w.value]?.span??a.props?.span??1)+(a.props[w.value]?.offset??a.props?.offset??0),Number(e)>P*Number(N.value)-o)throw k.value=t,s=!0,"find it";return e},0),s||(k.value=-1)}catch{}}else k.value=-1;return u("div",{ref:h,style:A.value},[s])}),c(y,{breakPoint:w})}});export{x as default};
//# sourceMappingURL=layoutGrid.mjs.map
