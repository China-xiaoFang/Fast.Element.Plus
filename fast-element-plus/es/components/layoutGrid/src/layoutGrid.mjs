import{defineComponent as e,ref as o,provide as s,computed as a,onMounted as t,nextTick as r,watch as l,onActivated as p,onUnmounted as n,onDeactivated as i,createVNode as u}from"vue";import{useRender as m,useExpose as c,makeSlots as d,definePropType as f}from"@fast-china/utils";import{isArray as v,isObject as b,isNumber as g}from"lodash-unified";const x=/* @__PURE__ */e({name:"FaLayoutGrid",props:{cols:{type:f([String,Number,Object]),default:()=>({xs:1,sm:2,md:3,lg:4,xl:5})},collapsed:Boolean,collapsedRows:{type:[String,Number],default:1},gap:{type:f([Number,Array]),default:0}},emits:{breakPointChange:({breakPoint:e})=>!0},slots:d(),setup(e,{slots:d,emit:f,expose:x}){const y=o();s("gap",v(e.gap)?e.gap[0]:e.gap);const h=o("xl");s("breakPoint",h);const w=o(-1);s("shouldHiddenIndex",w);const k=a(()=>b(e.cols)?e.cols[h.value]??e.cols:e.cols);s("cols",k);const N=g(e.collapsedRows)?e.collapsedRows:Number(e.collapsedRows),P={xs:{min:0,max:479},sm:{min:480,max:768},md:{min:768,max:1024},lg:{min:1024,max:1440},xl:{min:1440,max:1/0}},R=e=>{if(1!==e.length)throw new Error("未知的多个El");const o=e[0].target.scrollWidth;for(const[s,{min:a,max:t}]of Object.entries(P))if(o>=a&&o<=t){h.value=s;break}};let O=null;t(()=>{r(()=>{O=new ResizeObserver(R),O.observe(y.value)}),l(()=>h.value,e=>{f("breakPointChange",{breakPoint:e})},{immediate:!0})}),p(()=>{r(()=>{O=new ResizeObserver(R),O.observe(y.value)})}),n(()=>{O?.disconnect()}),i(()=>{O?.disconnect()});const $=a(()=>g(e.gap)?`${e.gap}px`:v(e.gap)?`${e.gap[1]}px ${e.gap[0]}px`:"unset"),j=a(()=>({display:"grid",gridGap:$.value,gridTemplateColumns:`repeat(${k.value}, minmax(0, 1fr))`}));return m(()=>{const o=d?.default()??[];if(e.collapsed){const e=[];let s=null;o.forEach(o=>{"object"==typeof o.type&&"FaLayoutGridItem"===o.type.name&&void 0!==o.props?.suffix&&(s=o),"symbol"==typeof o.type&&Array.isArray(o?.children)&&e.push(...o.children)});let a=0;s&&(a=(s.props[h.value]?.span??s.props?.span??1)+(s.props[h.value]?.offset??s.props?.offset??0));try{let o=!1;e.reduce((e=0,s,t)=>{if(e+=(s.props[h.value]?.span??s.props?.span??1)+(s.props[h.value]?.offset??s.props?.offset??0),Number(e)>N*Number(k.value)-a)throw w.value=t,o=!0,"find it";return e},0),o||(w.value=-1)}catch{}}else w.value=-1;return u("div",{ref:y,style:j.value},[o])}),c(x,{breakPoint:h})}});export{x as default};
//# sourceMappingURL=layoutGrid.mjs.map
