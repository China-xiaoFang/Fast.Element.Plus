{"version":3,"file":"selectPage.mjs","sources":["../../../../../packages/components/selectPage/src/selectPage.tsx"],"sourcesContent":["import { Fragment, computed, defineComponent, onMounted, reactive, ref, watch } from \"vue\";\nimport { ElButton, ElInput, ElOption, ElPagination, ElSelect, selectEmits, useGlobalSize } from \"element-plus\";\nimport { Search } from \"@element-plus/icons-vue\";\nimport { FaSelectOption, SelectProps } from \"@fast-element-plus/components/select\";\nimport { type SelectComponentProps } from \"@fast-element-plus/components/select/src/select\";\nimport { addUnit, consoleError, definePropType, makeSlots, useEmits, useExpose, useProps, useRender, withDefineType } from \"@fast-china/utils\";\nimport { useVModel } from \"@vueuse/core\";\nimport { isArray, isBoolean, isEqual, isFunction, isNil, isNull, isNumber, isObject, isString } from \"lodash-unified\";\nimport type { ElSelectorOutput } from \"@fast-element-plus/components/select\";\nimport type { PagedInput, PagedResult } from \"@fast-element-plus/components/table\";\nimport type { VNode } from \"vue\";\n\nexport const faSelectPageProps = {\n\t...SelectProps,\n\t/** @description whether Select is disabled 重载使其支持 ElForm*/\n\tdisabled: {\n\t\ttype: Boolean,\n\t\tdefault: undefined,\n\t},\n\t/** @description displayed text while loading data from server, default is 'Loading' */\n\tloadingText: {\n\t\ttype: String,\n\t\tdefault: \"加载中...\",\n\t},\n\t/** @description displayed text when no data matches the filtering query, you can also use slot `empty`, default is 'No matching data' */\n\tnoMatchText: {\n\t\ttype: String,\n\t\tdefault: \"暂无匹配的数据\",\n\t},\n\t/** @description displayed text when there is no options, you can also use slot `empty`, default is 'No data' */\n\tnoDataText: {\n\t\ttype: String,\n\t\tdefault: \"暂无数据\",\n\t},\n\t/** @description whether to collapse tags to a text when multiple selecting */\n\tcollapseTags: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description whether show all selected tags when mouse hover text of collapse-tags. To use this, `collapse-tags` must be true */\n\tcollapseTagsTooltip: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description v-model绑定值 */\n\tmodelValue: {\n\t\ttype: definePropType<string | number | boolean | object | (string | number | boolean | object)[]>([String, Number, Boolean, Object, Array]),\n\t\tdefault: undefined,\n\t},\n\t/** @description v-model:label绑定值 */\n\tlabel: definePropType<string | string[]>([String, Array]),\n\t/** @description 宽度 */\n\twidth: {\n\t\ttype: [String, Number],\n\t\tdefault: \"100%\",\n\t},\n\t/** @description 更多细节，只有使用slot的时候有用 */\n\tmoreDetail: Boolean,\n\t/** @description 配置选项 */\n\tprops: {\n\t\ttype: definePropType<SelectComponentProps>(Object),\n\t\tdefault: (): Partial<SelectComponentProps> => ({\n\t\t\tlabel: \"label\",\n\t\t\thide: \"hide\",\n\t\t\tdisabled: \"disabled\",\n\t\t\tchildren: \"children\",\n\t\t}),\n\t},\n\t/** @description 请求api */\n\trequestApi: {\n\t\ttype: definePropType<(params?: PagedInput) => Promise<PagedResult<ElSelectorOutput>>>(Function),\n\t},\n\t/** 初始化参数 */\n\tinitParam: definePropType<string | number | any>([String, Number, Object]),\n};\n\nexport const faSelectPageEmits = {\n\t...selectEmits,\n\t/** @description v-model 回调 */\n\t\"update:modelValue\": (value: string | number | boolean | object | (string | number | boolean | object)[]): boolean =>\n\t\tisString(value) || isNumber(value) || isBoolean(value) || isObject(value) || isArray(value) || isNull(value),\n\t/** @description v-model:label 回调 */\n\t\"update:label\": (value: string | string[]): boolean => isString(value) || isArray(value) || isNull(value),\n\t/** @description 数据改变 */\n\tdataChangeCallBack: (data: ElSelectorOutput[] | any[]): boolean => isArray(data),\n\t/** @description 改变 */\n\tchange: (\n\t\tdata: ElSelectorOutput | ElSelectorOutput[] | any | any[],\n\t\tvalue?: string | number | boolean | object | (string | number | boolean | object)[]\n\t): boolean => true,\n};\n\ntype FaSelectPageSlots = {\n\t/** @description FaSelectOption 默认内容插槽 */\n\tdefault: ElSelectorOutput;\n\t/** @description 下拉列表顶部的内容 */\n\theader: never;\n\t/** @description 下拉列表底部的内容 */\n\tfooter: never;\n\t/** @description Select 组件头部内容 */\n\tprefix: never;\n\t/** @description 无选项时的列表 */\n\tempty: never;\n\t/** @description select 组件自定义标签内容 */\n\ttag: never;\n\t/** @description select 组件自定义 loading内容 */\n\tloading: never;\n\t/** @description select 组件自定义标签内容 */\n\tlabel: { label: string; value: string | number | boolean | object };\n};\n\nexport default defineComponent({\n\tname: \"FaSelectPage\",\n\tprops: faSelectPageProps,\n\temits: faSelectPageEmits,\n\tslots: makeSlots<FaSelectPageSlots>(),\n\tsetup(props, { attrs, slots, emit, expose }) {\n\t\tconst selectedLabel = useVModel(props, \"label\", emit);\n\t\tconst _globalSize = useGlobalSize();\n\n\t\tconst state = reactive({\n\t\t\tvalue: withDefineType<string | number | boolean | object | (string | number | boolean | object)[]>(),\n\t\t\tloading: false,\n\t\t\tselectorData: withDefineType<ElSelectorOutput[]>([]),\n\t\t\t/** 选中的数据 */\n\t\t\tselectedList: withDefineType<ElSelectorOutput[]>([]),\n\t\t\t/** 首次出现 */\n\t\t\tdebut: true,\n\t\t\t/** 回显 */\n\t\t\techo: true,\n\t\t\t/** 下次刷新 */\n\t\t\tnextRefresh: false,\n\t\t\tpageIndex: 1,\n\t\t\tpageSize: 15,\n\t\t\ttotalRows: 0,\n\t\t\tsearchValue: undefined,\n\t\t\tdefaultSelectorData: withDefineType<ElSelectorOutput>(),\n\t\t});\n\n\t\tconst selectRef = ref<InstanceType<typeof ElSelect>>();\n\n\t\tconst handleData = (data: ElSelectorOutput[]): ElSelectorOutput[] => {\n\t\t\treturn data\n\t\t\t\t?.map((m) => ({\n\t\t\t\t\t...m,\n\t\t\t\t\tvalue: m[props.valueKey],\n\t\t\t\t\tlabel: isFunction(props.props.label) ? props.props.label(m) : m[props.props.label ?? \"label\"],\n\t\t\t\t\thide: isFunction(props.props.hide) ? props.props.hide(m) : m[props.props.hide ?? \"hide\"],\n\t\t\t\t\tdisabled: isFunction(props.props.disabled) ? props.props.disabled(m) : m[props.props.disabled ?? \"disabled\"],\n\t\t\t\t\tchildren: isFunction(props.props.children)\n\t\t\t\t\t\t? handleData(props.props.children(m))\n\t\t\t\t\t\t: handleData(m[props.props.children ?? \"children\"]),\n\t\t\t\t}))\n\t\t\t\t.filter((f) => !f.hide);\n\t\t};\n\n\t\tconst loadData = async (pageIndex?: number): Promise<void> => {\n\t\t\tstate.loading = true;\n\t\t\tstate.pageIndex = pageIndex ?? state.pageIndex;\n\t\t\tconst params: PagedInput = {\n\t\t\t\t...(props.initParam ?? {}),\n\t\t\t\tpageIndex: state.pageIndex,\n\t\t\t\tpageSize: state.pageSize,\n\t\t\t\tsearchValue: state.searchValue,\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tconst resData = await props.requestApi(params);\n\t\t\t\t// 这里不允许回显了\n\t\t\t\tstate.echo = false;\n\t\t\t\tstate.totalRows = resData.totalRows;\n\t\t\t\tstate.selectorData = handleData(resData.rows);\n\t\t\t\temit(\"dataChangeCallBack\", state.selectorData);\n\t\t\t} catch (error) {\n\t\t\t\tconsoleError(\"FaSelectPage\", error);\n\t\t\t\tstate.pageIndex = 1;\n\t\t\t\tstate.totalRows = 0;\n\t\t\t\tstate.selectorData = [];\n\t\t\t} finally {\n\t\t\t\tstate.loading = false;\n\t\t\t}\n\t\t};\n\n\t\tconst handleChange = (value?: string | number | boolean | object | (string | number | boolean | object)[]): void => {\n\t\t\t// 判断是否为多选\n\t\t\tif (props.multiple) {\n\t\t\t\t// value 必然是数组\n\t\t\t\tconst valueArr = value as (string | number | boolean | object)[];\n\t\t\t\tif (valueArr?.length === 0) {\n\t\t\t\t\tstate.value = null;\n\t\t\t\t\tselectedLabel.value = null;\n\t\t\t\t\tstate.selectedList = [];\n\t\t\t\t\temit(\"update:modelValue\", null);\n\t\t\t\t\temit(\"change\", null, null);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst dataList = state.selectorData.filter((f) => valueArr.includes(f.value));\n\t\t\t\tstate.value = value;\n\t\t\t\tselectedLabel.value = dataList.map((m) => m.label);\n\t\t\t\tstate.selectedList = [...state.selectedList.filter((f) => !dataList.some((s) => s.value === f.value)), ...dataList]\n\t\t\t\t\t// 过滤不存在的\n\t\t\t\t\t.filter((f) => valueArr.includes(f.value));\n\t\t\t\temit(\"update:modelValue\", value);\n\t\t\t\temit(\"change\", dataList, value);\n\t\t\t} else {\n\t\t\t\t// value 必然不是数组\n\t\t\t\tif (isNil(value)) {\n\t\t\t\t\tstate.value = null;\n\t\t\t\t\tselectedLabel.value = null;\n\t\t\t\t\tstate.selectedList = [];\n\t\t\t\t\temit(\"update:modelValue\", null);\n\t\t\t\t\temit(\"change\", null, null);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst data = state.selectorData.find((f) => f.value === value);\n\t\t\t\tstate.value = value;\n\t\t\t\tselectedLabel.value = data.label;\n\t\t\t\tif (!state.selectedList.some((s) => s.value === value)) {\n\t\t\t\t\tstate.selectedList = [data];\n\t\t\t\t}\n\t\t\t\temit(\"update:modelValue\", value);\n\t\t\t\temit(\"change\", data, value);\n\t\t\t}\n\t\t};\n\n\t\tconst handleClear = (): void => {\n\t\t\tstate.value = null;\n\t\t\tselectedLabel.value = null;\n\t\t\tstate.selectedList = [];\n\t\t\temit(\"update:modelValue\", null);\n\t\t\temit(\"clear\");\n\t\t};\n\n\t\tconst handleVisibleChange = async (visible: boolean): Promise<void> => {\n\t\t\tif (visible) {\n\t\t\t\tif (state.debut) {\n\t\t\t\t\t// 首次出现\n\t\t\t\t\tstate.debut = false;\n\t\t\t\t\tawait loadData();\n\t\t\t\t} else {\n\t\t\t\t\t// 判断再次出现是否需要刷新数据\n\t\t\t\t\tif (state.nextRefresh) {\n\t\t\t\t\t\tstate.nextRefresh = false;\n\t\t\t\t\t\tawait loadData();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\temit(\"visible-change\", visible);\n\t\t};\n\n\t\twatch(\n\t\t\t() => props.modelValue,\n\t\t\t(newValue) => {\n\t\t\t\tif (state.echo && !isNil(newValue)) {\n\t\t\t\t\tconst hasLabel = !isNil(props.label);\n\t\t\t\t\t// 判断是否为多选\n\t\t\t\t\tif (props.multiple) {\n\t\t\t\t\t\tif (!isArray(newValue)) {\n\t\t\t\t\t\t\tconsoleError(\"FaSelectPage\", \"当启用 multiple 时，传入的 modelValue 必须是Array。\");\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (hasLabel && !isArray(props.label)) {\n\t\t\t\t\t\t\tconsoleError(\"FaSelectPage\", \"当启用 multiple 时，传入的 modelValue:label 必须是Array。\");\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstate.selectedList = newValue\n\t\t\t\t\t\t\t// 最大选项截取\n\t\t\t\t\t\t\t.slice(0, props.multipleLimit > 0 ? props.multipleLimit : newValue.length)\n\t\t\t\t\t\t\t.map((item, index) => ({\n\t\t\t\t\t\t\t\tvalue: item,\n\t\t\t\t\t\t\t\tlabel: hasLabel ? props.label[index] : undefined,\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (isArray(newValue)) {\n\t\t\t\t\t\t\tconsoleError(\"FaSelectPage\", \"当禁用 multiple 时，传入的 modelValue 不能是Array。\");\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (hasLabel && isArray(props.label)) {\n\t\t\t\t\t\t\tconsoleError(\"FaSelectPage\", \"当禁用 multiple 时，传入的 modelValue:label 不能是Array。\");\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstate.defaultSelectorData = {\n\t\t\t\t\t\t\tvalue: newValue,\n\t\t\t\t\t\t\tlabel: props.label,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstate.value = newValue;\n\t\t\t},\n\t\t\t{\n\t\t\t\timmediate: true,\n\t\t\t}\n\t\t);\n\n\t\tonMounted(() => {\n\t\t\twatch(\n\t\t\t\t() => props.initParam,\n\t\t\t\t(newValue, oldValue) => {\n\t\t\t\t\tif (!isEqual(newValue, oldValue)) {\n\t\t\t\t\t\tstate.nextRefresh = true;\n\t\t\t\t\t\tif (!isNil(state.value)) {\n\t\t\t\t\t\t\thandleChange();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\n\t\tconst elSelectProps = useProps(props, SelectProps, [\"modelValue\", \"popperClass\", \"loading\"]);\n\t\tconst elSelectEmits = useEmits(selectEmits, emit, [\"update:modelValue\", \"change\", \"clear\", \"visible-change\"]);\n\t\tconst elPopperClass = computed(() => {\n\t\t\tlet localClass = `fa-select-page-dropdown fa-select-page-dropdown-${_globalSize.value} ${props.popperClass}`;\n\t\t\tif (props.moreDetail) {\n\t\t\t\tlocalClass += ` fa-select-dropdown__more-detail fa-select-dropdown__more-detail-${_globalSize.value}`;\n\t\t\t}\n\t\t\treturn localClass;\n\t\t});\n\n\t\tuseRender(() => (\n\t\t\t<ElSelect\n\t\t\t\t{...elSelectProps.value}\n\t\t\t\t{...elSelectEmits.value}\n\t\t\t\tref={selectRef}\n\t\t\t\tclass=\"fa-select-page\"\n\t\t\t\tpopperClass={elPopperClass.value}\n\t\t\t\tstyle={{ width: addUnit(props.width) }}\n\t\t\t\tvModel={state.value}\n\t\t\t\tloading={state.loading}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tonClear={handleClear}\n\t\t\t\tonVisibleChange={handleVisibleChange}\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\tdefault: (): VNode[] =>\n\t\t\t\t\t\tstate.selectorData.map((item) => (\n\t\t\t\t\t\t\t<FaSelectOption vSlots={{ default: slots.default }} data={item} moreDetail={props.moreDetail} />\n\t\t\t\t\t\t)),\n\t\t\t\t\theader: (): VNode[] => (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t{state.defaultSelectorData && (\n\t\t\t\t\t\t\t\t<ElOption\n\t\t\t\t\t\t\t\t\tclass=\"fa-select-page-dropdown__default-selector\"\n\t\t\t\t\t\t\t\t\tvalue={state.defaultSelectorData.value}\n\t\t\t\t\t\t\t\t\tlabel={state.defaultSelectorData.label}\n\t\t\t\t\t\t\t\t\tdisabled={true}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span>{state.defaultSelectorData.label}</span>\n\t\t\t\t\t\t\t\t\t<span>Default</span>\n\t\t\t\t\t\t\t\t</ElOption>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t<ElInput\n\t\t\t\t\t\t\t\t\tclass=\"fa-select-page-dropdown__search-input\"\n\t\t\t\t\t\t\t\t\tclearable\n\t\t\t\t\t\t\t\t\tplaceholder=\"请输入关键字搜索\"\n\t\t\t\t\t\t\t\t\tvModel_trim={state.searchValue}\n\t\t\t\t\t\t\t\t\tonKeyup={(event: KeyboardEvent) => {\n\t\t\t\t\t\t\t\t\t\tif (event.key === \"Enter\") {\n\t\t\t\t\t\t\t\t\t\t\tloadData(1);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\tappend: () => <ElButton loading={state.loading} icon={Search} onClick={() => loadData(1)}></ElButton>,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t</ElInput>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{slots.header && slots.header()}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t),\n\t\t\t\t\tfooter: () => (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<ElPagination\n\t\t\t\t\t\t\t\tclass=\"fa-select-page-dropdown__pagination\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tcurrentPage={state.pageIndex}\n\t\t\t\t\t\t\t\tpageSize={state.pageSize}\n\t\t\t\t\t\t\t\ttotal={state.totalRows}\n\t\t\t\t\t\t\t\tlayout=\"prev, pager, next, total\"\n\t\t\t\t\t\t\t\tpagerCount={5}\n\t\t\t\t\t\t\t\tonCurrentChange={loadData}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{slots.footer && slots.footer()}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t),\n\t\t\t\t\t...(slots.prefix && { prefix: (): VNode[] => slots.prefix() }),\n\t\t\t\t\t...(slots.empty && { empty: (): VNode[] => slots.empty() }),\n\t\t\t\t\t...(slots.tag && { tag: (): VNode[] => slots.tag() }),\n\t\t\t\t\t...(slots.loading && { loading: (): VNode[] => slots.loading() }),\n\t\t\t\t\t...(props.multiple\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tlabel: ({ label, value }: { label: string; value: string | number | boolean | object }): VNode[] => {\n\t\t\t\t\t\t\t\t\tconst selectedData = state.selectedList.find((f) => f.value === value);\n\t\t\t\t\t\t\t\t\tif (slots.label) {\n\t\t\t\t\t\t\t\t\t\treturn slots.label({ label: selectedData?.label, value: isNil(selectedData) ? value : selectedData?.value });\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn selectedData && <span class=\"el-select__tags-text\">{selectedData.label}</span>;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t: slots.label && {\n\t\t\t\t\t\t\t\tlabel: ({ label, value }: { label: string; value: string | number | boolean | object }): VNode[] =>\n\t\t\t\t\t\t\t\t\tslots.label({ label, value }),\n\t\t\t\t\t\t\t}),\n\t\t\t\t}}\n\t\t\t</ElSelect>\n\t\t));\n\n\t\treturn useExpose(expose, {\n\t\t\t/** @description 使选择器的输入框获取焦点 */\n\t\t\tfocus: computed(() => selectRef.value?.focus),\n\t\t\t/** @description 使选择器的输入框失去焦点，并隐藏下拉框 */\n\t\t\tblur: computed(() => selectRef.value?.blur),\n\t\t\t/** @description 获取当前选中的标签 */\n\t\t\tselectedLabel: computed(() => selectRef.value?.selectedLabel),\n\t\t\t/** @description 加载状态 */\n\t\t\tloading: computed(() => state.loading),\n\t\t\t/** @description 选中的数据 */\n\t\t\tselectedList: computed(() => state.selectedList),\n\t\t\t/** @description 刷新 */\n\t\t\trefresh: loadData,\n\t\t\t/** @description 设置选择 */\n\t\t\tsetSelection: (value: string | number | boolean | object | (string | number | boolean | object)[]) => handleChange(value),\n\t\t\t/** @description 清除选择 */\n\t\t\tclearSelection: () => handleChange(null),\n\t\t});\n\t},\n});\n"],"names":["faSelectPageProps","SelectProps","disabled","type","Boolean","default","undefined","loadingText","String","noMatchText","noDataText","collapseTags","collapseTagsTooltip","modelValue","definePropType","Number","Object","Array","label","width","moreDetail","props","hide","children","requestApi","Function","initParam","faSelectPageEmits","selectEmits","value","isString","isNumber","isBoolean","isObject","isArray","isNull","dataChangeCallBack","data","change","SelectPage","name","emits","slots","makeSlots","setup","attrs","emit","expose","selectedLabel","useVModel","_globalSize","useGlobalSize","state","reactive","withDefineType","loading","selectorData","selectedList","debut","echo","nextRefresh","pageIndex","pageSize","totalRows","searchValue","defaultSelectorData","selectRef","ref","handleData","map","m","valueKey","isFunction","filter","f","loadData","async","params","resData","rows","error","consoleError","handleChange","multiple","valueArr","length","dataList","includes","some","s","isNil","find","handleClear","handleVisibleChange","visible","watch","newValue","hasLabel","slice","multipleLimit","item","index","immediate","onMounted","oldValue","isEqual","elSelectProps","useProps","elSelectEmits","useEmits","elPopperClass","computed","localClass","popperClass","useRender","_createVNode","ElSelect","_mergeProps","class","style","addUnit","$event","onChange","onClear","onVisibleChange","FaSelectOption","header","_Fragment","ElOption","_createTextVNode","ElInput","clearable","placeholder","modelModifiers","trim","onKeyup","event","key","append","ElButton","icon","Search","onClick","footer","ElPagination","size","currentPage","total","layout","pagerCount","onCurrentChange","prefix","empty","tag","selectedData","useExpose","focus","blur","refresh","setSelection","clearSelection"],"mappings":"i0BAYO,MAAMA,EAAoB,IAC7BC,EAEHC,SAAU,CACTC,KAAMC,QACNC,aAASC,GAGVC,YAAa,CACZJ,KAAMK,OACNH,QAAS,UAGVI,YAAa,CACZN,KAAMK,OACNH,QAAS,WAGVK,WAAY,CACXP,KAAMK,OACNH,QAAS,QAGVM,aAAc,CACbR,KAAMC,QACNC,SAAS,GAGVO,oBAAqB,CACpBT,KAAMC,QACNC,SAAS,GAGVQ,WAAY,CACXV,KAAMW,EAA4F,CAACN,OAAQO,OAAQX,QAASY,OAAQC,QACpIZ,aAASC,GAGVY,MAAOJ,EAAkC,CAACN,OAAQS,QAElDE,MAAO,CACNhB,KAAM,CAACK,OAAQO,QACfV,QAAS,QAGVe,WAAYhB,QAEZiB,MAAO,CACNlB,KAAMW,EAAqCE,QAC3CX,QAASA,KAAAA,CACRa,MAAO,QACPI,KAAM,OACNpB,SAAU,WACVqB,SAAU,cAIZC,WAAY,CACXrB,KAAMW,EAAgFW,WAGvFC,UAAWZ,EAAsC,CAACN,OAAQO,OAAQC,UAGtDW,EAAoB,IAC7BC,EAEH,oBAAsBC,GACrBC,EAASD,IAAUE,EAASF,IAAUG,EAAUH,IAAUI,EAASJ,IAAUK,EAAQL,IAAUM,EAAON,GAEvG,kBAAuDC,EAASD,IAAUK,EAAQL,IAAUM,EAAON,GAEnGO,mBAAqBC,GAA8CH,EAAQG,GAE3EC,OAAQA,CACPD,EACAR,KACa,GAsBfU,mBAA+B,CAC9BC,KAAM,eACNnB,MAAOrB,EACPyC,MAAOd,EACPe,MAAOC,IACPC,KAAAA,CAAMvB,GAAOwB,MAAEA,EAAAA,MAAOH,EAAAA,KAAOI,EAAAA,OAAMC,IAClC,MAAMC,EAAgBC,EAAU5B,EAAO,QAASyB,GAC1CI,EAAcC,IAEdC,EAAQC,EAAS,CACtBxB,MAAOyB,IACPC,SAAS,EACTC,aAAcF,EAAmC,IAEjDG,aAAcH,EAAmC,IAEjDI,OAAO,EAEPC,MAAM,EAENC,aAAa,EACbC,UAAW,EACXC,SAAU,GACVC,UAAW,EACXC,iBAAa1D,EACb2D,oBAAqBX,MAGhBY,EAAYC,IAEZC,EAAc/B,GACZA,GACJgC,IAAKC,IAAAA,IACHA,EACHzC,MAAOyC,EAAEjD,EAAMkD,UACfrD,MAAOsD,EAAWnD,EAAMA,MAAMH,OAASG,EAAMA,MAAMH,MAAMoD,GAAKA,EAAEjD,EAAMA,MAAMH,OAAS,SACrFI,KAAMkD,EAAWnD,EAAMA,MAAMC,MAAQD,EAAMA,MAAMC,KAAKgD,GAAKA,EAAEjD,EAAMA,MAAMC,MAAQ,QACjFpB,SAAUsE,EAAWnD,EAAMA,MAAMnB,UAAYmB,EAAMA,MAAMnB,SAASoE,GAAKA,EAAEjD,EAAMA,MAAMnB,UAAY,YACjGqB,SAAUiD,EAAWnD,EAAMA,MAAME,UAC9B6C,EAAW/C,EAAMA,MAAME,SAAS+C,IAChCF,EAAWE,EAAEjD,EAAMA,MAAME,UAAY,gBAExCkD,OAAQC,IAAOA,EAAEpD,MAGdqD,EAAWC,MAAOf,IACvBT,EAAMG,SAAU,EAChBH,EAAMS,UAAYA,GAAaT,EAAMS,UACrC,MAAMgB,EAAqB,IACtBxD,EAAMK,WAAa,GACvBmC,UAAWT,EAAMS,UACjBC,SAAUV,EAAMU,SAChBE,YAAaZ,EAAMY,aAEpB,IACC,MAAMc,QAAgBzD,EAAMG,WAAWqD,GAEvCzB,EAAMO,MAAO,EACbP,EAAMW,UAAYe,EAAQf,UAC1BX,EAAMI,aAAeY,EAAWU,EAAQC,MACxCjC,EAAK,qBAAsBM,EAAMI,aAClC,OAASwB,GACRC,EAAa,eAAgBD,GAC7B5B,EAAMS,UAAY,EAClBT,EAAMW,UAAY,EAClBX,EAAMI,aAAe,EACtB,CAAA,QACCJ,EAAMG,SAAU,CACjB,GAGK2B,EAAgBrD,IAErB,GAAIR,EAAM8D,SAAU,CAEnB,MAAMC,EAAWvD,EACjB,GAAyB,IAArBuD,GAAUC,OAMb,OALAjC,EAAMvB,MAAQ,KACdmB,EAAcnB,MAAQ,KACtBuB,EAAMK,aAAe,GACrBX,EAAK,oBAAqB,WAC1BA,EAAK,SAAU,KAAM,MAGtB,MAAMwC,EAAWlC,EAAMI,aAAaiB,UAAcW,EAASG,SAASb,EAAE7C,QACtEuB,EAAMvB,MAAQA,EACdmB,EAAcnB,MAAQyD,EAASjB,IAAKC,GAAMA,EAAEpD,OAC5CkC,EAAMK,aAAe,IAAIL,EAAMK,aAAagB,OAAQC,IAAOY,EAASE,KAAMC,GAAMA,EAAE5D,QAAU6C,EAAE7C,WAAYyD,GAExGb,OAAQC,GAAMU,EAASG,SAASb,EAAE7C,QACpCiB,EAAK,oBAAqBjB,GAC1BiB,EAAK,SAAUwC,EAAUzD,EAC1B,KAAO,CAEN,GAAI6D,EAAM7D,GAMT,OALAuB,EAAMvB,MAAQ,KACdmB,EAAcnB,MAAQ,KACtBuB,EAAMK,aAAe,GACrBX,EAAK,oBAAqB,WAC1BA,EAAK,SAAU,KAAM,MAGtB,MAAMT,EAAOe,EAAMI,aAAamC,KAAMjB,GAAMA,EAAE7C,QAAUA,GACxDuB,EAAMvB,MAAQA,EACdmB,EAAcnB,MAAQQ,EAAKnB,MACtBkC,EAAMK,aAAa+B,QAAYC,EAAE5D,QAAUA,KAC/CuB,EAAMK,aAAe,CAACpB,IAEvBS,EAAK,oBAAqBjB,GAC1BiB,EAAK,SAAUT,EAAMR,EACtB,GAGK+D,EAAcA,KACnBxC,EAAMvB,MAAQ,KACdmB,EAAcnB,MAAQ,KACtBuB,EAAMK,aAAe,GACrBX,EAAK,oBAAqB,MAC1BA,EAAK,UAGA+C,EAAsBjB,MAAOkB,IAC9BA,IACC1C,EAAMM,OAETN,EAAMM,OAAQ,QACRiB,KAGFvB,EAAMQ,cACTR,EAAMQ,aAAc,QACde,MAIT7B,EAAK,iBAAkBgD,IAGxBC,EACC,IAAM1E,EAAMR,WACXmF,IACA,GAAI5C,EAAMO,OAAS+B,EAAMM,GAAW,CACnC,MAAMC,GAAYP,EAAMrE,EAAMH,OAE9B,GAAIG,EAAM8D,SAAU,CACnB,IAAKjD,EAAQ8D,GAEZ,YADAf,EAAa,eAAgB,2CAG9B,GAAIgB,IAAa/D,EAAQb,EAAMH,OAE9B,YADA+D,EAAa,eAAgB,iDAG9B7B,EAAMK,aAAeuC,EAEnBE,MAAM,EAAG7E,EAAM8E,cAAgB,EAAI9E,EAAM8E,cAAgBH,EAASX,QAClEhB,IAAI,CAAC+B,EAAMC,KAAAA,CACXxE,MAAOuE,EACPlF,MAAO+E,EAAW5E,EAAMH,MAAMmF,QAAS/F,IAE1C,KAAO,CACN,GAAI4B,EAAQ8D,GAEX,YADAf,EAAa,eAAgB,2CAG9B,GAAIgB,GAAY/D,EAAQb,EAAMH,OAE7B,YADA+D,EAAa,eAAgB,iDAG9B7B,EAAMa,oBAAsB,CAC3BpC,MAAOmE,EACP9E,MAAOG,EAAMH,MAEf,CACD,CACAkC,EAAMvB,MAAQmE,GAEf,CACCM,WAAW,IAIbC,EAAU,KACTR,EACC,IAAM1E,EAAMK,UACZ,CAACsE,EAAUQ,KACLC,EAAQT,EAAUQ,KACtBpD,EAAMQ,aAAc,EACf8B,EAAMtC,EAAMvB,QAChBqD,SAOL,MAAMwB,EAAgBC,EAAStF,EAAOpB,EAAa,CAAC,aAAc,cAAe,YAC3E2G,EAAgBC,EAASjF,EAAakB,EAAM,CAAC,oBAAqB,SAAU,QAAS,mBACrFgE,EAAgBC,EAAS,KAC9B,IAAIC,EAAa,mDAAmD9D,EAAYrB,SAASR,EAAM4F,cAI/F,OAHI5F,EAAMD,aACT4F,GAAc,oEAAoE9D,EAAYrB,SAExFmF,IA6FR,OA1FAE,EAAU,IAAAC,EAAAC,EAAAC,EAEJX,EAAc7E,MACd+E,EAAc/E,MAAK,CAAAsC,IAClBD,EAASoD,MAAA,iBAAAL,YAEDH,EAAcjF,MAAK0F,MACzB,CAAEpG,MAAOqG,EAAQnG,EAAMF,QAAQN,WAC9BuC,EAAMvB,MAAK,sBAAA4F,GAAXrE,EAAMvB,MAAK4F,EAAAlE,QACVH,EAAMG,QAAOmE,SACZxC,EAAYyC,QACb/B,EAAWgC,gBACH/B,IAAmB,CAGnCxF,QAASA,IACR+C,EAAMI,aAAaa,IAAK+B,GAAIe,EAAAU,EAAA,CAAAxF,KAC+B+D,EAAIhF,WAAcC,EAAMD,YAA1D,CAAEf,QAASqC,EAAMrC,WAE3CyH,OAAQA,IAAAX,EAAAY,EAAA,KAAA,CAEL3E,EAAMa,qBAAmBkD,EAAAa,EAAA,CAAAV,MAAA,4CAAAzF,MAGjBuB,EAAMa,oBAAoBpC,MAAKX,MAC/BkC,EAAMa,oBAAoB/C,MAAKhB,UAC5B,GAAI,CAAAG,QAAAA,IAAA,CAAA8G,EAAA,OAAA,KAAA,CAEP/D,EAAMa,oBAAoB/C,QAAKiG,eAAAc,EAAA,gBAGvCd,EAAAe,EAAA,CAAAZ,MAAA,wCAAAa,WAAA,EAAAC,YAAA,WAAAvH,WAMcuC,EAAMY,YAAWqE,eAAA,CAAAC,MAAA,GAAA,sBAAAb,GAAjBrE,EAAMY,YAAWyD,EAAAc,QACpBC,IACS,UAAdA,EAAMC,KACT9D,EAAS,KAEV,CAGA+D,OAAQA,IAAAvB,EAAAwB,EAAA,CAAApF,QAAyBH,EAAMG,QAAOqF,KAAQC,EAAMC,QAAWA,IAAMnE,EAAS,IAAE,QAK1FjC,EAAMoF,QAAUpF,EAAMoF,WAGzBiB,OAAQA,IAAA5B,EAAAY,EAAA,KAAA,CAAAZ,EAAA6B,EAAA,CAAA1B,MAAA,sCAAA2B,KAAA,QAAAC,YAKQ9F,EAAMS,UAASC,SAClBV,EAAMU,SAAQqF,MACjB/F,EAAMW,UAASqF,OAAA,2BAAAC,WAEV,EAACC,gBACI3E,GAAQ,MAEzBjC,EAAMqG,QAAUrG,EAAMqG,cAGrBrG,EAAM6G,QAAU,CAAEA,OAAQA,IAAe7G,EAAM6G,aAC/C7G,EAAM8G,OAAS,CAAEA,MAAOA,IAAe9G,EAAM8G,YAC7C9G,EAAM+G,KAAO,CAAEA,IAAKA,IAAe/G,EAAM+G,UACzC/G,EAAMa,SAAW,CAAEA,QAASA,IAAeb,EAAMa,cACjDlC,EAAM8D,SACP,CACAjE,MAAOA,EAAGA,QAAOW,YAChB,MAAM6H,EAAetG,EAAMK,aAAakC,KAAMjB,GAAMA,EAAE7C,QAAUA,GAChE,OAAIa,EAAMxB,MACFwB,EAAMxB,MAAM,CAAEA,MAAOwI,GAAcxI,MAAOW,MAAO6D,EAAMgE,GAAgB7H,EAAQ6H,GAAc7H,QAE9F6H,GAAYvC,EAAA,OAAA,CAAAG,MAAA,wBAAA,CAAwCoC,EAAaxI,UAGzEwB,EAAMxB,OAAS,CACfA,MAAOA,EAAGA,QAAOW,WAChBa,EAAMxB,MAAM,CAAEA,QAAOW,cAMrB8H,EAAU5G,EAAQ,CAExB6G,MAAO7C,EAAS,IAAM7C,EAAUrC,OAAO+H,OAEvCC,KAAM9C,EAAS,IAAM7C,EAAUrC,OAAOgI,MAEtC7G,cAAe+D,EAAS,IAAM7C,EAAUrC,OAAOmB,eAE/CO,QAASwD,EAAS,IAAM3D,EAAMG,SAE9BE,aAAcsD,EAAS,IAAM3D,EAAMK,cAEnCqG,QAASnF,EAEToF,aAAelI,GAAuFqD,EAAarD,GAEnHmI,eAAgBA,IAAM9E,EAAa,OAErC"}