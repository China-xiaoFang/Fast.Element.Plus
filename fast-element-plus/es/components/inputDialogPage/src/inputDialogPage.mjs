import{defineComponent as e,reactive as l,ref as o,createVNode as t,computed as i}from"vue";import{ElInput as a,ElButtonGroup as n,ElButton as u}from"element-plus";import{Delete as s,Search as r}from"@element-plus/icons-vue";import{FaDialog as d}from"../../dialog/index.mjs";import{FaTable as c}from"../../table/index.mjs";import{definePropType as m,withDefineType as p,useRender as f,useExpose as v,makeSlots as g}from"@fast-china/utils";import{useVModel as w}from"@vueuse/core";import{isString as b,isNull as y,isNumber as h,isFunction as S}from"lodash-unified";const K={rowKey:{type:[String,Function],default:"id"},modelValue:[String,Number],label:String,placeholder:{type:String,default:"请选择"},disabled:Boolean,title:String,requestApi:{type:m(Function)},initParam:m([String,Number,Object]),labelKey:{type:String,default:"name"}},R={"update:modelValue":e=>b(e)||h(e)||y(e),"update:label":e=>b(e)||y(e),change:(e,l)=>!0},C=/* @__PURE__ */e({name:"FaInputDialogPage",props:K,emits:R,slots:g(),setup(e,{attrs:m,slots:g,emit:b,expose:y}){const h=w(e,"modelValue",b,{passive:!0}),K=w(e,"label",b,{passive:!0}),R=l({selectionRow:p()}),C=o(),k=o(),V=()=>{h.value=null,K.value=null,b("change",null)},x=()=>{C.value.open(()=>{if(R.selectionRow){k.value.selectedListIds.includes(S(e.rowKey)?e.rowKey(R.selectionRow):R.selectionRow[e.rowKey])||k.value.toggleRowSelection(R.selectionRow)}})},P=()=>{C.value.close(()=>{if(k.value.selected){const l=k.value.selectedList[0];h.value=S(e.rowKey)?e.rowKey(l):l[e.rowKey],K.value=l[e.labelKey],b("change",l,h.value)}else h.value=null,K.value=null,b("change",null,null)})},j=e=>{k.value.clearSelection(),k.value.toggleRowSelection(e),R.selectionRow=e,P()};return f(()=>t("div",{class:"fa-input-dialog-page"},[t(a,{modelValue:K.value,"onUpdate:modelValue":e=>K.value=e,placeholder:e.placeholder,disabled:e.disabled,readonly:!0},{append:()=>t(n,null,{default:()=>[t(u,{disabled:e.disabled,icon:s,onClick:V},null),t(u,{disabled:e.disabled,icon:r,onClick:x},null)]})}),t(d,{ref:C,style:"--height: 70%;",width:"50%",title:e.title,fullHeight:!0,disabledConfirmButton:!k.value?.selected,onConfirmClick:P},{default:()=>[t(c,{ref:k,rowKey:e.rowKey,requestApi:e.requestApi,initParam:e.initParam,single:!0,rowClickSelection:!0,hideSearchTime:!0,onRowDblclick:j},{default:()=>g.default&&g.default()})]})])),v(y,{selectionRow:i(()=>R.selectionRow),open:x,clear:V})}});export{C as default,R as faInputDialogPageEmits,K as faInputDialogPageProps};
//# sourceMappingURL=inputDialogPage.mjs.map
