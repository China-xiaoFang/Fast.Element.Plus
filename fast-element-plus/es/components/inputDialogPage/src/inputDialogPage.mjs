import{defineComponent as e,reactive as l,ref as o,createVNode as t,computed as i}from"vue";import{ElInput as a,ElButtonGroup as n,ElButton as u}from"element-plus";import{Delete as s,Search as r}from"@element-plus/icons-vue";import{definePropType as d,withDefineType as c,useRender as m,useExpose as p,makeSlots as f}from"@fast-china/utils";import{isString as v,isNull as g,isNumber as w,isFunction as b}from"lodash-unified";import{FaTable as y}from"../../table/index.mjs";import{useVModel as h}from"@vueuse/core";import{FaDialog as S}from"../../dialog/index.mjs";const K={rowKey:{type:[String,Function],default:"id"},modelValue:[String,Number],label:String,placeholder:{type:String,default:"请选择"},disabled:Boolean,title:String,requestApi:{type:d(Function)},initParam:d([String,Number,Object]),labelKey:{type:String,default:"name"}},R={"update:modelValue":e=>v(e)||w(e)||g(e),"update:label":e=>v(e)||g(e),change:(e,l)=>!0},C=/* @__PURE__ */e({name:"FaInputDialogPage",props:K,emits:R,slots:f(),setup(e,{attrs:d,slots:f,emit:v,expose:g}){const w=h(e,"modelValue",v,{passive:!0}),K=h(e,"label",v,{passive:!0}),R=l({selectionRow:c()}),C=o(),k=o(),V=()=>{w.value=null,K.value=null,v("change",null)},x=()=>{C.value.open(()=>{if(R.selectionRow){k.value.selectedListIds.includes(b(e.rowKey)?e.rowKey(R.selectionRow):R.selectionRow[e.rowKey])||k.value.toggleRowSelection(R.selectionRow)}})},P=()=>{C.value.close(()=>{if(k.value.selected){const l=k.value.selectedList[0];w.value=b(e.rowKey)?e.rowKey(l):l[e.rowKey],K.value=l[e.labelKey],v("change",l,w.value)}else w.value=null,K.value=null,v("change",null,null)})},j=e=>{k.value.clearSelection(),k.value.toggleRowSelection(e),R.selectionRow=e,P()};return m(()=>t("div",{class:"fa-input-dialog-page"},[t(a,{modelValue:K.value,"onUpdate:modelValue":e=>K.value=e,placeholder:e.placeholder,disabled:e.disabled,readonly:!0},{append:()=>t(n,null,{default:()=>[t(u,{disabled:e.disabled,icon:s,onClick:V},null),t(u,{disabled:e.disabled,icon:r,onClick:x},null)]})}),t(S,{ref:C,style:"--height: 70%;",width:"50%",title:e.title,fullHeight:!0,disabledConfirmButton:!k.value?.selected,onConfirmClick:P},{default:()=>[t(y,{ref:k,rowKey:e.rowKey,requestApi:e.requestApi,initParam:e.initParam,single:!0,rowClickSelection:!0,hideSearchTime:!0,onRowDblclick:j},{default:()=>f.default&&f.default()})]})])),p(g,{selectionRow:i(()=>R.selectionRow),open:x,clear:V})}});export{C as default,R as faInputDialogPageEmits,K as faInputDialogPageProps};
//# sourceMappingURL=inputDialogPage.mjs.map
