import{defineComponent as e,reactive as l,ref as t,createVNode as o,computed as i}from"vue";import{ElInput as a,ElButtonGroup as n,ElButton as u}from"element-plus";import{Delete as r,Search as s}from"@element-plus/icons-vue";import{definePropType as d,withDefineType as c,useRender as m,useExpose as p,makeSlots as f}from"@fast-china/utils";import{isString as g,isNumber as w,isNull as v,isFunction as b}from"lodash-unified";import{FaTable as y}from"../../table/index.mjs";import{useVModel as h}from"@vueuse/core";import{FaDialog as S}from"../../dialog/index.mjs";const K={rowKey:{type:[String,Function],default:"id"},modelValue:[String,Number],label:String,placeholder:{type:String,default:"请选择"},disabled:Boolean,title:String,requestApi:{type:d(Function)},initParam:d([String,Number,Object]),labelKey:{type:String,default:"name"}},R={"update:modelValue":e=>g(e)||w(e)||v(e),"update:label":e=>g(e)||v(e),change:e=>g(e)||w(e)||v(e)},C=/* @__PURE__ */e({name:"FaInputDialogPage",props:K,emits:R,slots:f(),setup(e,{attrs:d,slots:f,emit:g,expose:w}){const v=h(e,"modelValue",g),K=h(e,"label",g),R=l({selectionRow:c()}),C=t(),k=t(),x=()=>{v.value=null,K.value=null,g("change",null)},V=()=>{C.value.open(()=>{if(R.selectionRow){k.value.selectedListIds.includes(b(e.rowKey)?e.rowKey(R.selectionRow):R.selectionRow[e.rowKey])||k.value.toggleRowSelection(R.selectionRow)}})},P=()=>{C.value.close(()=>{if(k.value.selected){const l=k.value.selectedList[0];v.value=l[b(e.rowKey)?e.rowKey(l):l[e.rowKey]],K.value=l[e.labelKey],g("change",l)}else v.value=null,K.value=null,g("change",null)})},j=e=>{k.value.clearSelection(),k.value.toggleRowSelection(e),R.selectionRow=e,P()};return m(()=>o("div",{class:"fa-input-dialog-page"},[o(a,{modelValue:K.value,"onUpdate:modelValue":e=>K.value=e,placeholder:e.placeholder,disabled:e.disabled,readonly:!0},{append:()=>o(n,null,{default:()=>[o(u,{disabled:e.disabled,icon:r,onClick:x},null),o(u,{disabled:e.disabled,icon:s,onClick:V},null)]})}),o(S,{ref:C,style:"--height: 70%;",width:"50%",title:e.title,fillHeight:!0,disabledConfirmButton:!k.value?.selected,onConfirmClick:P},{default:()=>[o(y,{ref:k,rowKey:e.rowKey,requestApi:e.requestApi,initParam:e.initParam,single:!0,rowClickSelection:!0,hideSearchTime:!0,exportBtn:!1,onRowDblclick:j},{default:()=>f.default&&f.default()})]})])),p(w,{selectionRow:i(()=>R.selectionRow),open:V,clear:x})}});export{C as default,R as faInputDialogPageEmits,K as faInputDialogPageProps};
//# sourceMappingURL=inputDialogPage.mjs.map
