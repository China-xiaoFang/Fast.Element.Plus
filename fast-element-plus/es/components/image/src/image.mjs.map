{"version":3,"file":"image.mjs","sources":["../../../../../packages/components/image/src/image.tsx"],"sourcesContent":["import { computed, defineComponent, reactive } from \"vue\";\nimport { ElIcon, ElImage, imageProps } from \"element-plus\";\nimport { Picture as ElIconPicture } from \"@element-plus/icons-vue\";\nimport { makeSlots, useProps, useRender } from \"@fast-china/utils\";\nimport type { VNode } from \"vue\";\n\nexport const faImageProps = {\n\t...imageProps,\n\t/** @description when enabling preview, use this flag to control whether clicking on backdrop can exit preview mode. */\n\thideOnClickModal: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description whether to append image-viewer to body. A nested parent element attribute transform should have this attribute set to `true`. */\n\tpreviewTeleported: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description whether to use lazy load. */\n\tlazy: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description 原图 */\n\toriginal: Boolean,\n\t/** @description 标准 */\n\tnormal: Boolean,\n\t/** @description 小图 */\n\tsmall: Boolean,\n\t/** @description 缩略图 */\n\tthumb: Boolean,\n\t/** @description 是否可以预览图片 */\n\tpreview: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n};\n\ntype FaImageSlots = {\n\t/** @description 当图像尚未加载时，自定义的占位符内容 */\n\tplaceholder: never;\n\t/** @description 自定义图像加载失败的内容 */\n\terror: never;\n\t/** @description 当图像预览时自定义内容 */\n\tviewer: { src: string };\n};\n\nexport default defineComponent({\n\tname: \"FaImage\",\n\tprops: faImageProps,\n\tslots: makeSlots<FaImageSlots>(),\n\tsetup(props, { attrs, slots, expose }) {\n\t\tconst state = reactive({\n\t\t\tsrc: computed(() => {\n\t\t\t\tif (!props.src) return undefined;\n\t\t\t\tif (props.original) {\n\t\t\t\t\treturn props.src;\n\t\t\t\t} else if (props.normal) {\n\t\t\t\t\treturn `${props.src}@!normal`;\n\t\t\t\t} else if (props.small) {\n\t\t\t\t\treturn `${props.src}@!small`;\n\t\t\t\t} else if (props.thumb) {\n\t\t\t\t\treturn `${props.src}@!thumb`;\n\t\t\t\t} else {\n\t\t\t\t\t// 默认使用缩略图\n\t\t\t\t\treturn `${props.src}@!thumb`;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tpreviewList: computed(() => (props.preview ? [props.src] : [])),\n\t\t});\n\n\t\tconst bindProps = useProps(props, imageProps, [\"src\", \"previewSrcList\"]);\n\n\t\tuseRender(() => (\n\t\t\t<ElImage {...bindProps.value} class=\"fa-image\" src={state.src} previewSrcList={state.previewList}>\n\t\t\t\t{{\n\t\t\t\t\terror: () =>\n\t\t\t\t\t\tslots.error ? (\n\t\t\t\t\t\t\tslots.error()\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div class=\"fa-image__error-image\">\n\t\t\t\t\t\t\t\t<ElIcon class=\"icon\">\n\t\t\t\t\t\t\t\t\t<ElIconPicture />\n\t\t\t\t\t\t\t\t</ElIcon>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t),\n\t\t\t\t\t...(slots.placeholder && { placeholder: (): VNode[] => slots.placeholder() }),\n\t\t\t\t\t...(slots.viewer && { viewer: (): VNode[] => slots.viewer({ src: state.src }) }),\n\t\t\t\t}}\n\t\t\t</ElImage>\n\t\t));\n\t},\n});\n"],"names":["faImageProps","imageProps","hideOnClickModal","type","Boolean","default","previewTeleported","lazy","original","normal","small","thumb","preview","name","props","slots","makeSlots","setup","attrs","expose","state","reactive","src","computed","undefined","previewList","bindProps","useProps","useRender","_createVNode","ElImage","_mergeProps","value","error","ElIcon","ElIconPicture","placeholder","viewer"],"mappings":";;;;AAMO,MAAMA,eAAe;AAAA,EAC3B,GAAGC;AAAAA;AAAAA,EAEHC,kBAAkB;AAAA,IACjBC,MAAMC;AAAAA,IACNC,SAAS;AAAA;;EAGVC,mBAAmB;AAAA,IAClBH,MAAMC;AAAAA,IACNC,SAAS;AAAA;;EAGVE,MAAM;AAAA,IACLJ,MAAMC;AAAAA,IACNC,SAAS;AAAA;;EAGVG,UAAUJ;AAAAA;AAAAA,EAEVK,QAAQL;AAAAA;AAAAA,EAERM,OAAON;AAAAA;AAAAA,EAEPO,OAAOP;AAAAA;AAAAA,EAEPQ,SAAS;AAAA,IACRT,MAAMC;AAAAA,IACNC,SAAS;AAAA,EACV;AACD;AAWA,MAAA,wCAA+B;AAAA,EAC9BQ,MAAM;AAAA,EACNC,OAAOd;AAAAA,EACPe,OAAOC,UAAS;AAAA,EAChBC,MAAMH,OAAO;AAAA,IAAEI;AAAAA,IAAOH;AAAAA,IAAOI;AAAAA,EAAO,GAAG;AACtC,UAAMC,QAAQC,SAAS;AAAA,MACtBC,KAAKC,SAAS,MAAM;AACnB,YAAI,CAACT,MAAMQ,IAAK,QAAOE;AACvB,YAAIV,MAAMN,UAAU;AACnB,iBAAOM,MAAMQ;AAAAA,QACd,WAAWR,MAAML,QAAQ;AACxB,iBAAO,GAAGK,MAAMQ,GAAG;AAAA,QACpB,WAAWR,MAAMJ,OAAO;AACvB,iBAAO,GAAGI,MAAMQ,GAAG;AAAA,QACpB,WAAWR,MAAMH,OAAO;AACvB,iBAAO,GAAGG,MAAMQ,GAAG;AAAA,QACpB,OAAO;AAEN,iBAAO,GAAGR,MAAMQ,GAAG;AAAA,QACpB;AAAA,MACD,CAAC;AAAA,MACDG,aAAaF,SAAS,MAAOT,MAAMF,UAAU,CAACE,MAAMQ,GAAG,IAAI,CAAA,CAAG;AAAA,IAC/D,CAAC;AAED,UAAMI,YAAYC,SAASb,OAAOb,YAAY,CAAC,OAAO,gBAAgB,CAAC;AAEvE2B,cAAU,MAAAC,YAAAC,SAAAC,WACIL,UAAUM,OAAK;AAAA,MAAA,SAAA;AAAA,MAAA,OAAwBZ,MAAME;AAAAA,MAAG,kBAAkBF,MAAMK;AAAAA,IAAW,CAAA,GAAA;AAAA,MAE9FQ,OAAOA,MACNlB,MAAMkB,QACLlB,MAAMkB,MAAK,IAAEJ,YAAA,OAAA;AAAA,QAAA,SAAA;AAAA,SAAA,CAAAA,YAAAK,QAAA;AAAA,QAAA,SAAA;AAAA,MAAA,GAAA;AAAA,QAAA7B,SAAAA,MAAA,CAAAwB,YAAAM,SAAA,MAAA,IAAA,CAAA;AAAA,OAAA,CAAA,CAAA;AAAA,MAQf,GAAIpB,MAAMqB,eAAe;AAAA,QAAEA,aAAaA,MAAerB,MAAMqB,YAAW;AAAA,MAAG;AAAA,MAC3E,GAAIrB,MAAMsB,UAAU;AAAA,QAAEA,QAAQA,MAAetB,MAAMsB,OAAO;AAAA,UAAEf,KAAKF,MAAME;AAAAA,SAAK;AAAA;IAAI,CAAA,CAGlF;AAAA,EACF;AACD,CAAC;"}