{"version":3,"file":"iconSelector.mjs","sources":["../../../../../packages/components/iconSelector/src/iconSelector.tsx"],"sourcesContent":["import { computed, defineComponent, reactive } from \"vue\";\nimport * as ElementPlusIconsVue from \"@element-plus/icons-vue\";\nimport { ChromeFilled, RefreshRight } from \"@element-plus/icons-vue\";\nimport { FaIcon } from \"@fast-element-plus/components/icon\";\nimport { FastElementPlusIconsVue } from \"@fast-element-plus/icons-vue\";\nimport { definePropType, useRender, withDefineType } from \"@fast-element-plus/utils\";\nimport { ElIcon, ElInput, ElPopover, ElScrollbar } from \"element-plus\";\nimport { isString } from \"lodash-unified\";\n\ntype IconType = \"ele\" | \"fastEle\" | \"local\";\n\nexport default defineComponent({\n\tname: \"FaIconSelector\",\n\tprops: {\n\t\t/** @description v-model绑定值 */\n\t\tmodelValue: String,\n\t\t/** @description 自定义图标 */\n\t\tcustomIcons: definePropType<string[]>(Array),\n\t},\n\temits: {\n\t\t/** @description v-model 回调 */\n\t\t\"update:modelValue\": (value: string) => isString(value),\n\t\t/** @description 改变 */\n\t\tchange: (value: string) => isString(value),\n\t},\n\tsetup(props, { attrs, slots, emit, expose }) {\n\t\tconst state = reactive({\n\t\t\tvalue: withDefineType<string>(),\n\t\t\tsearchValue: withDefineType<string>(),\n\t\t\ticonType: withDefineType<IconType>(\"ele\"),\n\t\t\tpopoverVisible: false,\n\t\t\ticonNames: withDefineType<string[]>(Object.keys(ElementPlusIconsVue)),\n\t\t\trenderIconNames: computed((): string[] => {\n\t\t\t\tif (!state.searchValue) return state.iconNames;\n\t\t\t\treturn state.iconNames.filter((f) => f.toLowerCase().indexOf(state.searchValue.toLowerCase()) !== -1);\n\t\t\t}),\n\t\t});\n\n\t\tconst handleTabClick = (iconType: IconType): void => {\n\t\t\tstate.iconType = iconType;\n\t\t\tstate.iconNames = [];\n\t\t\tswitch (iconType) {\n\t\t\t\tcase \"ele\":\n\t\t\t\t\tstate.iconNames = Object.keys(ElementPlusIconsVue).map((m) => `el-icon-${m}`);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"fastEle\":\n\t\t\t\t\tstate.iconNames = Object.keys(FastElementPlusIconsVue).map((m) => `fa-icon-${m}`);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"local\":\n\t\t\t\t\tstate.iconNames = props.customIcons;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\t\tconst handleIconClick = (value: string): void => {\n\t\t\tstate.popoverVisible = false;\n\t\t\tstate.value = value;\n\t\t\tstate.searchValue = \"\";\n\t\t\temit(\"update:modelValue\", value);\n\t\t\temit(\"change\", value);\n\t\t};\n\n\t\tconst handleRefresh = (): void => {\n\t\t\tstate.value = null;\n\t\t\tstate.searchValue = null;\n\t\t\temit(\"update:modelValue\", null);\n\t\t\temit(\"change\", null);\n\t\t};\n\n\t\tuseRender(() => (\n\t\t\t<ElPopover\n\t\t\t\tpopperClass=\"fa-icon-selector-popover\"\n\t\t\t\tvisible={state.popoverVisible}\n\t\t\t\twidth=\"auto\"\n\t\t\t\ttrigger=\"click\"\n\t\t\t\tshowArrow={false}\n\t\t\t\tshowAfter={0}\n\t\t\t\thideAfter={0}\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\treference: () => (\n\t\t\t\t\t\t<ElInput vModel={state.searchValue} placeholder=\"搜索图标\">\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tprepend: () => (\n\t\t\t\t\t\t\t\t\t<ElIcon>\n\t\t\t\t\t\t\t\t\t\t<ChromeFilled />\n\t\t\t\t\t\t\t\t\t</ElIcon>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tappend: () => (\n\t\t\t\t\t\t\t\t\t<ElIcon onClick={handleRefresh}>\n\t\t\t\t\t\t\t\t\t\t<RefreshRight />\n\t\t\t\t\t\t\t\t\t</ElIcon>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ElInput>\n\t\t\t\t\t),\n\t\t\t\t\tdefault: () => (\n\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box\">\n\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-header\">\n\t\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-header__title\">请选择图标</div>\n\t\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-header__tab\">\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass={[state.iconType === \"ele\" ? \"fa-icon-selector-popover__box-header__tab-is-active\" : \"\"]}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Element Plus 图标\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleTabClick(\"ele\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tele\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass={[state.iconType === \"fastEle\" ? \"fa-icon-selector-popover__box-header__tab-is-active\" : \"\"]}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Fast Element Plus 图标\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleTabClick(\"fastEle\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tfastEle\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass={[state.iconType === \"local\" ? \"fa-icon-selector-popover__box-header__tab-is-active\" : \"\"]}\n\t\t\t\t\t\t\t\t\t\ttitle=\"本地图标\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleTabClick(\"local\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tlocal\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-body\">\n\t\t\t\t\t\t\t\t<ElScrollbar>\n\t\t\t\t\t\t\t\t\t{state.renderIconNames.map((m) => (\n\t\t\t\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-body__item\" title={m} onClick={() => handleIconClick(m)}>\n\t\t\t\t\t\t\t\t\t\t\t<FaIcon name={m} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</ElScrollbar>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t),\n\t\t\t\t}}\n\t\t\t</ElPopover>\n\t\t));\n\n\t\texpose({\n\t\t\ticonType: state.iconType,\n\t\t});\n\n\t\treturn {\n\t\t\ticonType: state.iconType,\n\t\t};\n\t},\n});\n"],"names":["_isSlot","s","Object","prototype","toString","call","_isVNode","defineComponent","name","props","modelValue","String","customIcons","definePropType","Array","emits","value","isString","change","setup","attrs","slots","emit","expose","state","reactive","withDefineType","searchValue","iconType","popoverVisible","iconNames","keys","ElementPlusIconsVue","renderIconNames","computed","filter","f","toLowerCase","indexOf","handleTabClick","map","m","FastElementPlusIconsVue","handleIconClick","handleRefresh","useRender","_createVNode","ElPopover","reference","ElInput","$event","prepend","ElIcon","default","ChromeFilled","append","RefreshRight","_slot","_createTextVNode","onClick","ElScrollbar","FaIcon"],"mappings":"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"}