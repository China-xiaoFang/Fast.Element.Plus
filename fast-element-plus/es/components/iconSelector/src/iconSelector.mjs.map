{"version":3,"file":"iconSelector.mjs","sources":["../../../../../packages/components/iconSelector/src/iconSelector.tsx"],"sourcesContent":["import { computed, defineComponent, reactive } from \"vue\";\nimport { ElIcon, ElInput, ElPopover, ElScrollbar } from \"element-plus\";\nimport * as ElementPlusIconsVue from \"@element-plus/icons-vue\";\nimport { ChromeFilled, RefreshRight } from \"@element-plus/icons-vue\";\nimport { FaIcon } from \"@fast-element-plus/components/icon\";\nimport FastElementPlusIconsVue from \"@fast-element-plus/icons-vue\";\nimport { definePropType, useExpose, useRender, withDefineType } from \"@fast-china/utils\";\nimport { isNull, isString } from \"lodash-unified\";\n\ntype IconType = \"ele\" | \"fastEle\" | \"local\";\n\nexport default defineComponent({\n\tname: \"FaIconSelector\",\n\tprops: {\n\t\t/** @description v-model绑定值 */\n\t\tmodelValue: String,\n\t\t/** @description 自定义图标 */\n\t\tcustomIcons: definePropType<string[]>(Array),\n\t},\n\temits: {\n\t\t/** @description v-model 回调 */\n\t\t\"update:modelValue\": (value: string) => isString(value) || isNull(value),\n\t\t/** @description 改变 */\n\t\tchange: (value: string) => isString(value) || isNull(value),\n\t},\n\tsetup(props, { attrs, slots, emit, expose }) {\n\t\tconst state = reactive({\n\t\t\tvalue: withDefineType<string>(),\n\t\t\tsearchValue: withDefineType<string>(),\n\t\t\ticonType: withDefineType<IconType>(\"ele\"),\n\t\t\tpopoverVisible: false,\n\t\t\ticonNames: withDefineType<string[]>(Object.keys(ElementPlusIconsVue)),\n\t\t\trenderIconNames: computed((): string[] => {\n\t\t\t\tif (!state.searchValue) return state.iconNames;\n\t\t\t\treturn state.iconNames.filter((f) => f.toLowerCase().indexOf(state.searchValue.toLowerCase()) !== -1);\n\t\t\t}),\n\t\t});\n\n\t\tconst handleTabClick = (iconType: IconType): void => {\n\t\t\tstate.iconType = iconType;\n\t\t\tstate.iconNames = [];\n\t\t\tswitch (iconType) {\n\t\t\t\tcase \"ele\":\n\t\t\t\t\tstate.iconNames = Object.keys(ElementPlusIconsVue).map((m) => `el-icon-${m}`);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"fastEle\":\n\t\t\t\t\tstate.iconNames = Object.keys(FastElementPlusIconsVue).map((m) => `fa-icon-${m}`);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"local\":\n\t\t\t\t\tstate.iconNames = props.customIcons;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\t\tconst handleIconClick = (value: string): void => {\n\t\t\tstate.popoverVisible = false;\n\t\t\tstate.value = value;\n\t\t\tstate.searchValue = \"\";\n\t\t\temit(\"update:modelValue\", value);\n\t\t\temit(\"change\", value);\n\t\t};\n\n\t\tconst handleRefresh = (): void => {\n\t\t\tstate.value = null;\n\t\t\tstate.searchValue = null;\n\t\t\temit(\"update:modelValue\", null);\n\t\t\temit(\"change\", null);\n\t\t};\n\n\t\tuseRender(() => (\n\t\t\t<ElPopover\n\t\t\t\tpopperClass=\"fa-icon-selector-popover\"\n\t\t\t\tvisible={state.popoverVisible}\n\t\t\t\twidth=\"auto\"\n\t\t\t\ttrigger=\"click\"\n\t\t\t\tshowArrow={false}\n\t\t\t\tshowAfter={0}\n\t\t\t\thideAfter={0}\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\treference: () => (\n\t\t\t\t\t\t<ElInput vModel={state.searchValue} placeholder=\"搜索图标\">\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tprepend: () => (\n\t\t\t\t\t\t\t\t\t<ElIcon>\n\t\t\t\t\t\t\t\t\t\t<ChromeFilled />\n\t\t\t\t\t\t\t\t\t</ElIcon>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tappend: () => (\n\t\t\t\t\t\t\t\t\t<ElIcon onClick={handleRefresh}>\n\t\t\t\t\t\t\t\t\t\t<RefreshRight />\n\t\t\t\t\t\t\t\t\t</ElIcon>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ElInput>\n\t\t\t\t\t),\n\t\t\t\t\tdefault: () => (\n\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box\">\n\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-header\">\n\t\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-header__title\">请选择图标</div>\n\t\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-header__tab\">\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass={{ \"is-active\": state.iconType === \"ele\" }}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Element Plus 图标\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleTabClick(\"ele\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tele\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass={{ \"is-active\": state.iconType === \"fastEle\" }}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Fast Element Plus 图标\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleTabClick(\"fastEle\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tfastEle\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass={{ \"is-active\": state.iconType === \"local\" }}\n\t\t\t\t\t\t\t\t\t\ttitle=\"本地图标\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleTabClick(\"local\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tlocal\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-body\">\n\t\t\t\t\t\t\t\t<ElScrollbar>\n\t\t\t\t\t\t\t\t\t{state.renderIconNames.map((m) => (\n\t\t\t\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-body__item\" title={m} onClick={() => handleIconClick(m)}>\n\t\t\t\t\t\t\t\t\t\t\t<FaIcon name={m} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</ElScrollbar>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t),\n\t\t\t\t}}\n\t\t\t</ElPopover>\n\t\t));\n\n\t\treturn useExpose(expose, {\n\t\t\ticonType: state.iconType,\n\t\t});\n\t},\n});\n"],"names":["_isSlot","s","Object","prototype","toString","call","_isVNode","name","props","modelValue","String","customIcons","definePropType","Array","emits","value","isString","isNull","change","setup","attrs","slots","emit","expose","state","reactive","withDefineType","searchValue","iconType","popoverVisible","iconNames","keys","ElementPlusIconsVue","renderIconNames","computed","filter","f","toLowerCase","indexOf","handleTabClick","map","m","FastElementPlusIconsVue","handleIconClick","handleRefresh","useRender","_createVNode","ElPopover","reference","ElInput","$event","prepend","ElIcon","default","ChromeFilled","append","RefreshRight","_slot","_createTextVNode","onClick","ElScrollbar","FaIcon","useExpose"],"mappings":"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"}