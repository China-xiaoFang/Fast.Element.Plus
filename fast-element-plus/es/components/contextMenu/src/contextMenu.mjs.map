{"version":3,"file":"contextMenu.mjs","sources":["../../../../../packages/components/contextMenu/src/contextMenu.tsx"],"sourcesContent":["import { Transition, defineComponent, onMounted, reactive } from \"vue\";\nimport { FaIcon } from \"@fast-element-plus/components/icon\";\nimport { definePropType, useExpose, useRender } from \"@fast-element-plus/utils\";\nimport { useEventListener } from \"@vueuse/core\";\nimport { isObject } from \"lodash-unified\";\nimport type { FaContextMenuData } from \"./contextMenu.type\";\n\nexport default defineComponent({\n\tname: \"FaContextMenu\",\n\tprops: {\n\t\t/** @description 数据 */\n\t\tdata: {\n\t\t\ttype: definePropType<FaContextMenuData[]>(Array),\n\t\t\tdefault: () => [],\n\t\t},\n\t},\n\temits: {\n\t\t/** @description 点击事件 */\n\t\tclick: (event: MouseEvent, data: FaContextMenuData) => event instanceof MouseEvent && isObject(data),\n\t},\n\tsetup(props, { emit, expose }) {\n\t\tconst state = reactive({\n\t\t\tvisible: false,\n\t\t\taxis: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t},\n\t\t});\n\n\t\tconst handleClick = (event: MouseEvent, data: FaContextMenuData): void => {\n\t\t\tif (data?.disabled) return;\n\t\t\tdata?.click && data.click(event, data);\n\t\t\temit(\"click\", event, data);\n\t\t};\n\n\t\tconst open = (axis: { x: number; y: number } = { x: 0, y: 0 }): void => {\n\t\t\tstate.axis = axis;\n\t\t\tstate.visible = true;\n\t\t};\n\n\t\tconst close = (): void => {\n\t\t\tstate.visible = false;\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tuseEventListener(document, \"click\", close);\n\t\t});\n\n\t\tuseRender(() => (\n\t\t\t<Transition name=\"el-zoom-in-center\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"fa-context-menu el-popper el-dropdown__popper\"\n\t\t\t\t\tvShow={state.visible}\n\t\t\t\t\tstyle={{ top: `${state.axis.y + 5}px`, left: `${state.axis.x + 14}px` }}\n\t\t\t\t\tkey={Math.random()}\n\t\t\t\t>\n\t\t\t\t\t<ul class=\"el-dropdown-menu\">\n\t\t\t\t\t\t{props.data\n\t\t\t\t\t\t\t.filter((f) => !f.hide)\n\t\t\t\t\t\t\t.map((item) => (\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tclass={[\"el-dropdown-menu__item\", item?.disabled === true ? \"is-disabled\" : \"\"]}\n\t\t\t\t\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\t\t\t\t\tonClick={(event: MouseEvent) => {\n\t\t\t\t\t\t\t\t\t\thandleClick(event, item);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{item?.icon ? <FaIcon name={item?.icon} /> : null}\n\t\t\t\t\t\t\t\t\t<span>{item.label}</span>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</Transition>\n\t\t));\n\n\t\treturn useExpose(expose, {\n\t\t\t/** @description 是否显示 */\n\t\t\tvisible: state.visible,\n\t\t\t/** @description 打开菜单 */\n\t\t\topen,\n\t\t\t/** @description 关闭菜单 */\n\t\t\tclose,\n\t\t});\n\t},\n});\n"],"names":["defineComponent","name","props","data","type","definePropType","Array","default","emits","click","event","MouseEvent","isObject","setup","emit","expose","state","reactive","visible","axis","x","y","handleClick","disabled","open","close","onMounted","useEventListener","document","useRender","_createVNode","Transition","_withDirectives","top","left","Math","random","filter","f","hide","map","item","icon","FaIcon","label","_vShow","useExpose"],"mappings":";;;;;;;;AAOA,MAAeA,8CAAgB;AAAA,EAC9BC,MAAM;AAAA,EACNC,OAAO;AAAA;AAAA,IAENC,MAAM;AAAA,MACLC,MAAMC,eAAoCC,KAAK;AAAA,MAC/CC,SAASA,MAAM,CAAA;AAAA,IAChB;AAAA,EACA;AAAA,EACDC,OAAO;AAAA;AAAA,IAENC,OAAOA,CAACC,OAAmBP,SAA4BO,iBAAiBC,cAAcC,SAAST,IAAI;AAAA,EACnG;AAAA,EACDU,MAAMX,OAAO;AAAA,IAAEY;AAAAA,IAAMC;AAAAA,EAAO,GAAG;AAC9B,UAAMC,QAAQC,SAAS;AAAA,MACtBC,SAAS;AAAA,MACTC,MAAM;AAAA,QACLC,GAAG;AAAA,QACHC,GAAG;AAAA,MACJ;AAAA,IACD,CAAC;AAED,UAAMC,cAAcA,CAACZ,OAAmBP,SAAkC;AACzE,UAAIA,6BAAMoB,SAAU;AACpBpB,oCAAMM,UAASN,KAAKM,MAAMC,OAAOP,IAAI;AACrCW,WAAK,SAASJ,OAAOP,IAAI;AAAA;AAG1B,UAAMqB,OAAOA,CAACL,OAAiC;AAAA,MAAEC,GAAG;AAAA,MAAGC,GAAG;AAAA,IAAE,MAAY;AACvEL,YAAMG,OAAOA;AACbH,YAAME,UAAU;AAAA;AAGjB,UAAMO,QAAQA,MAAY;AACzBT,YAAME,UAAU;AAAA;AAGjBQ,cAAU,MAAM;AACfC,uBAAiBC,UAAU,SAASH,KAAK;AAAA,IAC1C,CAAC;AAEDI,cAAU,MAAAC,YAAAC,YAAA;AAAA,MAAA,QAAA;AAAA,IAAA,GAAA;AAAA,MAAAxB,SAAAA,MAAAyB,CAAAA,eAAAF,YAAA,OAAA;AAAA,QAAA,SAAA;AAAA,QAAA,SAKA;AAAA,UAAEG,KAAK,GAAGjB,MAAMG,KAAKE,IAAI,CAAC;AAAA,UAAMa,MAAM,GAAGlB,MAAMG,KAAKC,IAAI,EAAE;AAAA,QAAM;AAAA,QAAA,OAClEe,KAAKC,OAAO;AAAA,MAAC,GAAA,CAAAN,YAAA,MAAA;AAAA,QAAA,SAAA;AAAA,MAAA,GAAA,CAGhB5B,MAAMC,KACLkC,OAAQC,OAAM,CAACA,EAAEC,IAAI,EACrBC,IAAKC,UAAIX,YAAA,MAAA;AAAA,QAAA,SAED,CAAC,2BAA0BW,6BAAMlB,cAAa,OAAO,gBAAgB,EAAE;AAAA,QAAC,YAAA;AAAA,QAAA,WAErEb,WAAsB;AAC/BY,sBAAYZ,OAAO+B,IAAI;AAAA,QACxB;AAAA,MAAC,GAAA,EAEAA,6BAAMC,QAAIZ,YAAAa,QAAA;AAAA,QAAA,QAAiBF,6BAAMC;AAAAA,MAAI,GAAA,IAAA,IAAO,MAAIZ,YAAA,QAAA,MAAA,CAC1CW,KAAKG,KAAK,CAElB,CAAA,CAAA,CAAA,CAAC,CAAAC,CAAAA,CAAAA,GAAAA,CAAAA,CAAAA,OAlBG7B,MAAME,OAAO,CAAA,CAAA,CAAA;AAAA,IAAA,CAAA,CAsBtB;AAED,WAAO4B,UAAU/B,QAAQ;AAAA;AAAA,MAExBG,SAASF,MAAME;AAAAA;AAAAA,MAEfM;AAAAA;AAAAA,MAEAC;AAAAA,IACD,CAAC;AAAA,EACF;AACD,CAAC;"}