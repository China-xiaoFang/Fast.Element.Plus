{"version":3,"file":"string.mjs","sources":["../../../packages/utils/string.ts"],"sourcesContent":["import { isString } from \"lodash-unified\";\n\n/**\n * 字符串工具类\n */\nexport const stringUtil = {\n\t/**\n\t * 根据当前时间生成问候语\n\t */\n\tgetGreet(): string {\n\t\tconst now = new Date();\n\t\tconst hour = now.getHours();\n\t\tlet greet = \"\";\n\n\t\tif (hour < 5) {\n\t\t\tgreet = \"夜深了，注意身体哦！\";\n\t\t} else if (hour < 9) {\n\t\t\tgreet = \"早上好！\" + \"欢迎回来！\";\n\t\t} else if (hour < 12) {\n\t\t\tgreet = \"上午好！\" + \"欢迎回来！\";\n\t\t} else if (hour < 14) {\n\t\t\tgreet = \"中午好！\" + \"欢迎回来！\";\n\t\t} else if (hour < 18) {\n\t\t\tgreet = \"下午好！\" + \"欢迎回来！\";\n\t\t} else if (hour < 24) {\n\t\t\tgreet = \"晚上好！\" + \"欢迎回来！\";\n\t\t} else {\n\t\t\tgreet = \"您好！\" + \"欢迎回来！\";\n\t\t}\n\t\treturn greet;\n\t},\n\t/**\n\t * 对象URL参数化\n\t */\n\tobjectToQueryString(obj: any): string {\n\t\tlet params = \"\";\n\t\tfor (const key in obj) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) {\n\t\t\t\tif (params !== \"\") {\n\t\t\t\t\tparams += \"&\";\n\t\t\t\t}\n\t\t\t\tparams += `${encodeURIComponent(key)}=${encodeURIComponent(obj[key])}`;\n\t\t\t}\n\t\t}\n\t\treturn params;\n\t},\n\t/**\n\t * 获取Url参数\n\t */\n\tgetUrlParams(url: string): Record<string, any> {\n\t\tconst regex = /[?&][^=?&]+=[^?&]+/g;\n\t\tconst params: Record<string, any> = {};\n\n\t\tlet match;\n\t\twhile ((match = regex.exec(url)) !== null) {\n\t\t\tconst [key, value] = match[0].substring(1).split(\"=\");\n\t\t\tparams[key] = decodeURIComponent(value);\n\t\t}\n\n\t\treturn params;\n\t},\n\t/**\n\t * 是否为JSON字符串\n\t */\n\tisJson(value: string): boolean {\n\t\tif (!isString(value)) return false;\n\n\t\tvalue = value.replace(/\\s/g, \"\").replace(/\\n|\\r/, \"\");\n\n\t\tif (/^\\{(.*?)\\}$/.test(value)) return /\"(.*?)\":(.*?)/g.test(value);\n\n\t\tif (/^\\[(.*?)\\]$/.test(value)) {\n\t\t\treturn value\n\t\t\t\t.replace(/^\\[/, \"\")\n\t\t\t\t.replace(/\\]$/, \"\")\n\t\t\t\t.replace(/},{/g, \"}\\n{\")\n\t\t\t\t.split(/\\n/)\n\t\t\t\t.map((s) => {\n\t\t\t\t\treturn stringUtil.isJson(s);\n\t\t\t\t})\n\t\t\t\t.reduce((prev, curr) => {\n\t\t\t\t\treturn !!curr;\n\t\t\t\t});\n\t\t}\n\n\t\treturn false;\n\t},\n\t/**\n\t * 生成随机字符串\n\t */\n\tgenerateRandomString(length: number): string {\n\t\tconst characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\t\tlet randomString = \"\";\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst randomIndex = Math.floor(Math.random() * characters.length);\n\t\t\trandomString += characters.charAt(randomIndex);\n\t\t}\n\t\treturn randomString;\n\t},\n\t/**\n\t * @description 生成唯一 uuid\n\t */\n\tgenerateUUID(): string {\n\t\tlet uuid = \"\";\n\t\tfor (let i = 0; i < 32; i++) {\n\t\t\tconst random = (Math.random() * 16) | 0;\n\t\t\tif (i === 8 || i === 12 || i === 16 || i === 20) uuid += \"-\";\n\t\t\tuuid += (i === 12 ? 4 : i === 16 ? (random & 3) | 8 : random).toString(16);\n\t\t}\n\t\treturn uuid;\n\t},\n\t/**\n\t * 复制\n\t */\n\tasync copy(value: string): Promise<void> {\n\t\t// navigator.clipboard 需要https等安全上下文\n\t\tif (navigator?.clipboard && window.isSecureContext) {\n\t\t\tawait navigator.clipboard.writeText(value);\n\t\t} else {\n\t\t\tconst textareaEl = document.createElement(\"textarea\");\n\t\t\ttextareaEl.value = value;\n\t\t\t// 使文本域不显示\n\t\t\ttextareaEl.style.position = \"absolute\";\n\t\t\ttextareaEl.style.opacity = \"0\";\n\t\t\ttextareaEl.style.left = \"-999999px\";\n\t\t\ttextareaEl.style.top = \"-999999px\";\n\t\t\tdocument.body.appendChild(textareaEl);\n\t\t\ttextareaEl.focus();\n\t\t\ttextareaEl.select();\n\t\t\tdocument.execCommand(\"copy\");\n\t\t\ttextareaEl.remove();\n\t\t}\n\t},\n};\n"],"names":[],"mappings":"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"}