{"version":3,"file":"index.mjs","sources":["../../../../packages/directives/clickDraggable/index.ts"],"sourcesContent":["/*\n\t需求：实现一个拖拽指令，可在父元素区域任意拖拽元素。\n\n\t思路：\n\t\t1、设置需要拖拽的元素为absolute，其父元素为relative。\n\t\t2、鼠标按下(onmousedown)时记录目标元素当前的 left 和 top 值。\n\t\t3、鼠标移动(onmousemove)时计算每次移动的横向距离和纵向距离的变化值，并改变元素的 left 和 top 值\n\t\t4、鼠标松开(onmouseup)时完成一次拖拽\n\n\t使用：在 Dom 上加上 v-draggable 即可\n\t<div class=\"dialog-model\" v-draggable></div>\n*/\nimport type { Directive } from \"vue\";\nimport { withInstallDirective } from \"@fast-element-plus/utils\";\n\ninterface ElType extends HTMLElement {\n\tparentNode: any;\n}\n\nconst DraggableDirective: Directive = {\n\tmounted(el: ElType) {\n\t\tel.style.cursor = \"move\";\n\t\tel.style.position = \"absolute\";\n\t\tel.onmousedown = (e): void => {\n\t\t\tconst disX = e.pageX - el.offsetLeft;\n\t\t\tconst disY = e.pageY - el.offsetTop;\n\t\t\tdocument.onmousemove = (e): void => {\n\t\t\t\tlet x = e.pageX - disX;\n\t\t\t\tlet y = e.pageY - disY;\n\t\t\t\tconst maxX = el.parentNode.offsetWidth - el.offsetWidth;\n\t\t\t\tconst maxY = el.parentNode.offsetHeight - el.offsetHeight;\n\t\t\t\tif (x < 0) {\n\t\t\t\t\tx = 0;\n\t\t\t\t} else if (x > maxX) {\n\t\t\t\t\tx = maxX;\n\t\t\t\t}\n\n\t\t\t\tif (y < 0) {\n\t\t\t\t\ty = 0;\n\t\t\t\t} else if (y > maxY) {\n\t\t\t\t\ty = maxY;\n\t\t\t\t}\n\t\t\t\tel.style.left = `${x}px`;\n\t\t\t\tel.style.top = `${y}px`;\n\t\t\t};\n\t\t\tdocument.onmouseup = (): void => {\n\t\t\t\tdocument.onmousemove = document.onmouseup = null;\n\t\t\t};\n\t\t};\n\t},\n};\n\nexport const vDraggable = withInstallDirective(DraggableDirective, \"draggable\");\nexport default vDraggable;\n"],"names":["e"],"mappings":";;AAmBA,MAAM,qBAAgC;AAAA,EACrC,QAAQ,IAAY;AACnB,OAAG,MAAM,SAAS;AAClB,OAAG,MAAM,WAAW;AACjB,OAAA,cAAc,CAAC,MAAY;AACvB,YAAA,OAAO,EAAE,QAAQ,GAAG;AACpB,YAAA,OAAO,EAAE,QAAQ,GAAG;AACjB,eAAA,cAAc,CAACA,OAAY;AAC/B,YAAA,IAAIA,GAAE,QAAQ;AACd,YAAA,IAAIA,GAAE,QAAQ;AAClB,cAAM,OAAO,GAAG,WAAW,cAAc,GAAG;AAC5C,cAAM,OAAO,GAAG,WAAW,eAAe,GAAG;AAC7C,YAAI,IAAI,GAAG;AACN,cAAA;AAAA,QAAA,WACM,IAAI,MAAM;AAChB,cAAA;AAAA,QACL;AAEA,YAAI,IAAI,GAAG;AACN,cAAA;AAAA,QAAA,WACM,IAAI,MAAM;AAChB,cAAA;AAAA,QACL;AACG,WAAA,MAAM,OAAO,GAAG,CAAC;AACjB,WAAA,MAAM,MAAM,GAAG,CAAC;AAAA,MAAA;AAEpB,eAAS,YAAY,MAAY;AACvB,iBAAA,cAAc,SAAS,YAAY;AAAA,MAAA;AAAA,IAC7C;AAAA,EAEF;AACD;AAEa,MAAA,aAAa,qBAAqB,oBAAoB,WAAW;"}