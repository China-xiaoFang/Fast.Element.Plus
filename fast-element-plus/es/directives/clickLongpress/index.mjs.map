{"version":3,"file":"index.mjs","sources":["../../../../packages/directives/clickLongpress/index.ts"],"sourcesContent":["/**\n * v-longpress\n * 长按指令，长按时触发事件\n */\nimport type { Directive, DirectiveBinding } from \"vue\";\nimport { withInstallDirective } from \"@fast-element-plus/utils\";\n\nconst LongpressDirective: Directive = {\n\tmounted(el: HTMLElement, binding: DirectiveBinding) {\n\t\tif (typeof binding.value !== \"function\") {\n\t\t\tthrow \"callback must be a function\";\n\t\t}\n\n\t\t// 运行函数\n\t\tconst handler = (e: MouseEvent | TouchEvent): void => {\n\t\t\tbinding.value(e);\n\t\t};\n\n\t\t// 定义变量\n\t\tlet pressTimer: any = null;\n\t\t// 创建计时器（ 2秒后执行函数 ）\n\t\tconst start = (e: any): void => {\n\t\t\tif (e.button) {\n\t\t\t\tif (e.type === \"click\" && e.button !== 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pressTimer === null) {\n\t\t\t\tpressTimer = setTimeout(() => {\n\t\t\t\t\thandler(e);\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t};\n\t\t// 取消计时器\n\t\tconst cancel = (): void => {\n\t\t\tif (pressTimer !== null) {\n\t\t\t\tclearTimeout(pressTimer);\n\t\t\t\tpressTimer = null;\n\t\t\t}\n\t\t};\n\t\t// 添加事件监听器\n\t\tel.addEventListener(\"mousedown\", start);\n\t\tel.addEventListener(\"touchstart\", start);\n\t\t// 取消计时器\n\t\tel.addEventListener(\"click\", cancel);\n\t\tel.addEventListener(\"mouseout\", cancel);\n\t\tel.addEventListener(\"touchend\", cancel);\n\t\tel.addEventListener(\"touchcancel\", cancel);\n\t},\n};\n\nexport const vLongpress = withInstallDirective(LongpressDirective, \"longpress\");\nexport default vLongpress;\n"],"names":[],"mappings":";;AAOA,MAAM,qBAAgC;AAAA,EACrC,QAAQ,IAAiB,SAA2B;AAC/C,QAAA,OAAO,QAAQ,UAAU,YAAY;AAClC,YAAA;AAAA,IACP;AAGM,UAAA,UAAU,CAAC,MAAqC;AACrD,cAAQ,MAAM,CAAC;AAAA,IAAA;AAIhB,QAAI,aAAkB;AAEhB,UAAA,QAAQ,CAAC,MAAiB;AAC/B,UAAI,EAAE,QAAQ;AACb,YAAI,EAAE,SAAS,WAAW,EAAE,WAAW,GAAG;AACzC;AAAA,QACD;AAAA,MACD;AACA,UAAI,eAAe,MAAM;AACxB,qBAAa,WAAW,MAAM;AAC7B,kBAAQ,CAAC;AAAA,WACP,GAAI;AAAA,MACR;AAAA,IAAA;AAGD,UAAM,SAAS,MAAY;AAC1B,UAAI,eAAe,MAAM;AACxB,qBAAa,UAAU;AACV,qBAAA;AAAA,MACd;AAAA,IAAA;AAGE,OAAA,iBAAiB,aAAa,KAAK;AACnC,OAAA,iBAAiB,cAAc,KAAK;AAEpC,OAAA,iBAAiB,SAAS,MAAM;AAChC,OAAA,iBAAiB,YAAY,MAAM;AACnC,OAAA,iBAAiB,YAAY,MAAM;AACnC,OAAA,iBAAiB,eAAe,MAAM;AAAA,EAC1C;AACD;AAEa,MAAA,aAAa,qBAAqB,oBAAoB,WAAW;"}