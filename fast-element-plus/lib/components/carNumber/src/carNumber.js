"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),t=require("element-plus"),a=require("@element-plus/icons-vue");require("../../../constants/index.js");const l=require("@fast-china/utils"),r=require("lodash-unified"),o=require("./common.js"),u=require("../../../constants/regex.js");function n(t){return"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!e.isVNode(t)}const i=e.defineComponent({name:"FaCarNumber",props:{...t.inputProps,placeholder:{type:String,default:"请选择"}},emits:{"update:modelValue":e=>r.isString(e)||r.isNull(e),change:e=>r.isString(e)||r.isNull(e)},setup(r,{attrs:i,emit:d}){const s=e.reactive({value:l.withDefineType(),switchLetter:e.computed(()=>s.value?.length>=1),disabledButton:e.computed(()=>s.value?.length>=8)}),c=e.ref(),p=e.inject(t.formContextKey,void 0),v=e.inject(t.formItemContextKey,void 0),m=e=>2===e.length?`${e} ● `:e.length>2?`${e.slice(0,2)} ● ${e.slice(2)}`:e,_=e=>{s.value??="",s.value+=e},b=()=>{0!==s.value?.length&&(s.value=s.value.substring(0,s.value.length-1))},f=()=>{let e=!1;7===s.value.length?e=u.RegExps.CarNumber.test(s.value):8===s.value.length&&(e=u.RegExps.NewEnergyCarNumber.test(s.value)),e?(d("update:modelValue",s.value),d("change",s.value),v?.prop&&p?.validateField([v.prop])):v?.prop&&p?(d("update:modelValue",s.value),d("change",s.value),p.validateField([v.prop])):t.ElMessage.error("车牌号格式不正确"),c.value?.hide()},g=()=>{s.value=null,d("update:modelValue",null),d("change",null),v?.prop&&p?.validateField([v.prop])};e.watch(()=>r.modelValue,e=>{s.value=e.toString()},{immediate:!0});const h=l.useProps(r,t.inputProps,["modelValue","readonly","formatter"]);l.useRender(()=>e.createVNode(t.ElPopover,{ref:c,width:"auto",popperClass:"fa-car-number__popover",trigger:"click",showArrow:!1,showAfter:0,hideAfter:0},{reference:()=>e.createVNode(t.ElInput,e.mergeProps(h.value,{class:"fa-car-number__input",modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,readonly:!0,formatter:m}),null),default:()=>e.createVNode(e.Fragment,null,[e.createVNode("div",{class:["fa-car-number__popover__area",s.switchLetter?"fa-car-number__popover__hide":""]},[o.CarNumberArea.map(a=>e.createVNode(t.ElButton,{disabled:s.disabledButton,onClick:()=>_(a)},n(a)?a:{default:()=>[a]}))]),e.createVNode("div",{class:["fa-car-number__popover__digit-letter",s.switchLetter?"":"fa-car-number__popover__hide"]},[o.CarNumberDigit.map(a=>e.createVNode(t.ElButton,{disabled:s.disabledButton,onClick:()=>_(a)},n(a)?a:{default:()=>[a]})),o.CarNumberLetter.map(a=>e.createVNode(t.ElButton,{disabled:s.disabledButton,onClick:()=>_(a)},n(a)?a:{default:()=>[a]}))]),e.createVNode("div",{class:"fa-car-number__popover__btn"},[e.createVNode(t.ElButton,{class:"fa-car-number__popover__btn__clear",disabled:null===s.value||0===s.value.length,onClick:g},{default:()=>[e.createTextVNode("清除")]}),e.createVNode(t.ElButton,{class:"fa-car-number__popover__btn__back",type:"danger",icon:a.Back,disabled:null===s.value||0===s.value.length,onClick:b},null),e.createVNode(t.ElButton,{class:"fa-car-number__popover__btn__confirm",type:"primary",disabled:null===s.value||s.value.length<7,onClick:f},{default:()=>[e.createTextVNode("确认")]})])])}))}});exports.default=i;
//# sourceMappingURL=carNumber.js.map
