"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),l=require("element-plus"),t=require("@element-plus/icons-vue"),i=require("../../dialog/index.js"),o=require("../../table/index.js"),a=require("@fast-china/utils"),u=require("@vueuse/core"),n=require("lodash-unified"),r={rowKey:{type:[String,Function],default:"id"},modelValue:[String,Number],label:String,placeholder:{type:String,default:"请选择"},disabled:Boolean,title:String,requestApi:{type:a.definePropType(Function)},initParam:a.definePropType([String,Number,Object]),labelKey:{type:String,default:"name"}},s={"update:modelValue":e=>n.isString(e)||n.isNumber(e)||n.isNull(e),"update:label":e=>n.isString(e)||n.isNull(e),change:(e,l)=>!0},d=e.defineComponent({name:"FaInputDialogPage",props:r,emits:s,slots:a.makeSlots(),setup(r,{attrs:s,slots:d,emit:c,expose:p}){const g=u.useVModel(r,"modelValue",c,{passive:!0}),f=u.useVModel(r,"label",c,{passive:!0}),v=e.reactive({selectionRow:a.withDefineType()}),m=e.ref(),w=e.ref(),b=()=>{g.value=null,f.value=null,c("change",null)},y=()=>{m.value.open(()=>{if(v.selectionRow){w.value.selectedListIds.includes(n.isFunction(r.rowKey)?r.rowKey(v.selectionRow):v.selectionRow[r.rowKey])||w.value.toggleRowSelection(v.selectionRow)}})},S=()=>{m.value.close(()=>{if(w.value.selected){const e=w.value.selectedList[0];g.value=n.isFunction(r.rowKey)?r.rowKey(e):e[r.rowKey],f.value=e[r.labelKey],c("change",e,g.value)}else g.value=null,f.value=null,c("change",null,null)})},h=e=>{w.value.clearSelection(),w.value.toggleRowSelection(e),v.selectionRow=e,S()};return a.useRender(()=>e.createVNode("div",{class:"fa-input-dialog-page"},[e.createVNode(l.ElInput,{modelValue:f.value,"onUpdate:modelValue":e=>f.value=e,placeholder:r.placeholder,disabled:r.disabled,readonly:!0},{append:()=>e.createVNode(l.ElButtonGroup,null,{default:()=>[e.createVNode(l.ElButton,{disabled:r.disabled,icon:t.Delete,onClick:b},null),e.createVNode(l.ElButton,{disabled:r.disabled,icon:t.Search,onClick:y},null)]})}),e.createVNode(i.FaDialog,{ref:m,style:"--height: 70%;",width:"50%",title:r.title,fullHeight:!0,disabledConfirmButton:!w.value?.selected,onConfirmClick:S},{default:()=>[e.createVNode(o.FaTable,{ref:w,rowKey:r.rowKey,requestApi:r.requestApi,initParam:r.initParam,single:!0,rowClickSelection:!0,hideSearchTime:!0,onRowDblclick:h},{default:()=>d.default&&d.default()})]})])),a.useExpose(p,{selectionRow:e.computed(()=>v.selectionRow),open:y,clear:b})}});exports.default=d,exports.faInputDialogPageEmits=s,exports.faInputDialogPageProps=r;
//# sourceMappingURL=inputDialogPage.js.map
