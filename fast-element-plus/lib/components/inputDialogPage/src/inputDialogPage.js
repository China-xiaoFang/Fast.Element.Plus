"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),l=require("element-plus"),t=require("@element-plus/icons-vue"),i=require("@fast-china/utils"),o=require("lodash-unified"),a=require("../../table/index.js"),u=require("@vueuse/core"),n=require("../../dialog/index.js"),r={rowKey:{type:[String,Function],default:"id"},modelValue:[String,Number],label:String,placeholder:{type:String,default:"请选择"},disabled:Boolean,title:String,requestApi:{type:i.definePropType(Function)},initParam:i.definePropType([String,Number,Object]),labelKey:{type:String,default:"name"}},s={"update:modelValue":e=>o.isString(e)||o.isNumber(e)||o.isNull(e),"update:label":e=>o.isString(e)||o.isNull(e),change:e=>o.isString(e)||o.isNumber(e)||o.isNull(e)},d=e.defineComponent({name:"FaInputDialogPage",props:r,emits:s,slots:i.makeSlots(),setup(r,{attrs:s,slots:d,emit:c,expose:p}){const g=u.useVModel(r,"modelValue",c),f=u.useVModel(r,"label",c),m=e.reactive({selectionRow:i.withDefineType()}),v=e.ref(),b=e.ref(),w=()=>{g.value=null,f.value=null,c("change",null)},y=()=>{v.value.open(()=>{if(m.selectionRow){b.value.selectedListIds.includes(o.isFunction(r.rowKey)?r.rowKey(m.selectionRow):m.selectionRow[r.rowKey])||b.value.toggleRowSelection(m.selectionRow)}})},S=()=>{v.value.close(()=>{if(b.value.selected){const e=b.value.selectedList[0];g.value=e[o.isFunction(r.rowKey)?r.rowKey(e):e[r.rowKey]],f.value=e[r.labelKey],c("change",e)}else g.value=null,f.value=null,c("change",null)})},h=e=>{b.value.clearSelection(),b.value.toggleRowSelection(e),m.selectionRow=e,S()};return i.useRender(()=>e.createVNode("div",{class:"fa-input-dialog-page"},[e.createVNode(l.ElInput,{modelValue:f.value,"onUpdate:modelValue":e=>f.value=e,placeholder:r.placeholder,disabled:r.disabled,readonly:!0},{append:()=>e.createVNode(l.ElButtonGroup,null,{default:()=>[e.createVNode(l.ElButton,{disabled:r.disabled,icon:t.Delete,onClick:w},null),e.createVNode(l.ElButton,{disabled:r.disabled,icon:t.Search,onClick:y},null)]})}),e.createVNode(n.FaDialog,{ref:v,style:"--height: 70%;",width:"50%",title:r.title,fillHeight:!0,disabledConfirmButton:!b.value?.selected,onConfirmClick:S},{default:()=>[e.createVNode(a.FaTable,{ref:b,rowKey:r.rowKey,requestApi:r.requestApi,initParam:r.initParam,single:!0,rowClickSelection:!0,hideSearchTime:!0,exportBtn:!1,onRowDblclick:h},{default:()=>d.default&&d.default()})]})])),i.useExpose(p,{selectionRow:e.computed(()=>m.selectionRow),open:y,clear:w})}});exports.default=d,exports.faInputDialogPageEmits=s,exports.faInputDialogPageProps=r;
//# sourceMappingURL=inputDialogPage.js.map
