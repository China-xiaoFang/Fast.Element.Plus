{"version":3,"file":"form.js","sources":["../../../../../packages/components/form/src/form.tsx"],"sourcesContent":["import { computed, defineComponent, provide, reactive, ref } from \"vue\";\nimport { FaLayoutGrid } from \"@fast-element-plus/components/layoutGrid\";\nimport type { FaLayoutGridBreakPoint } from \"@fast-element-plus/components/layoutGrid\";\nimport { definePropType, formUtil, makeSlots, useExpose, useProps, useRender } from \"@fast-element-plus/utils\";\nimport type { FormInstance, FormValidationResult } from \"element-plus\";\nimport { ElForm, formProps } from \"element-plus\";\nimport { isNumber, isObject } from \"lodash-unified\";\n\nexport const faFormProps = {\n\t...formProps,\n\t/** @description Width of label, e.g. `'50px'`. All its direct child form items will inherit this value. `auto` is supported. */\n\tlabelWidth: {\n\t\ttype: [String, Number],\n\t\tdefault: \"auto\",\n\t},\n\t/** @description Suffix of the label. */\n\tlabelSuffix: {\n\t\ttype: String,\n\t\tdefault: \"：\",\n\t},\n\t/** @description When validation fails, scroll to the first error form entry. */\n\tscrollToError: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description 详情From，会删除 FormItem 的 padding-bottom */\n\tdetailForm: Boolean,\n\t/** @description Grid布局*/\n\tgrid: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description Grid布局列配置 */\n\tcols: {\n\t\ttype: definePropType<string | number | Record<FaLayoutGridBreakPoint, number>>([String, Number, Object]),\n\t\tdefault: (): Record<FaLayoutGridBreakPoint, number> => ({ xs: 1, sm: 2, md: 3, lg: 4, xl: 5 }),\n\t},\n};\n\ntype FaFormSlots = {\n\t/** @description 默认内容插槽 */\n\tdefault: unknown;\n};\n\nexport default defineComponent({\n\tname: \"FaForm\",\n\tprops: faFormProps,\n\tslots: makeSlots<FaFormSlots>(),\n\tsetup(props, { attrs, slots, expose }) {\n\t\tconst state = reactive({\n\t\t\tcols: computed(() => {\n\t\t\t\tif (isObject(props.cols)) {\n\t\t\t\t\treturn props.cols;\n\t\t\t\t} else {\n\t\t\t\t\tconst colsNumber = isNumber(props.cols) ? props.cols : Number(props.cols);\n\t\t\t\t\treturn { xs: 1, sm: colsNumber, md: colsNumber, lg: colsNumber, xl: colsNumber };\n\t\t\t\t}\n\t\t\t}),\n\t\t\tgap: [20, 0],\n\t\t});\n\n\t\tconst formRef = ref<FormInstance>();\n\n\t\t// 注入 cols\n\t\tprovide(\"faFormCols\", state.cols);\n\n\t\tconst elFormProps = useProps(props, formProps);\n\n\t\tuseRender(() => (\n\t\t\t<ElForm {...elFormProps.value} ref={formRef} class={[\"fa-form\", { \"fa-form-detail\": props.detailForm }]}>\n\t\t\t\t{{\n\t\t\t\t\tdefault: () =>\n\t\t\t\t\t\tprops.grid ? (\n\t\t\t\t\t\t\t<FaLayoutGrid collapsed gap={state.gap} cols={state.cols}>\n\t\t\t\t\t\t\t\t{slots.default && slots.default(state)}\n\t\t\t\t\t\t\t</FaLayoutGrid>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tslots.default && slots.default(state)\n\t\t\t\t\t\t),\n\t\t\t\t}}\n\t\t\t</ElForm>\n\t\t));\n\n\t\treturn useExpose(expose, {\n\t\t\t...computed(() => ({\n\t\t\t\t/** @description Validate the whole form. Receives a callback or returns `Promise`. */\n\t\t\t\tvalidate: (): FormValidationResult => formUtil.validate(formRef),\n\t\t\t\t/** @description Validate specified fields. */\n\t\t\t\tvalidateField: (): FormValidationResult => formUtil.validateScrollToField(formRef),\n\t\t\t\t/** @description Reset specified fields and remove validation result. */\n\t\t\t\tresetFields: formRef.value?.resetFields,\n\t\t\t\t/** @description Clear validation message for specified fields. */\n\t\t\t\tclearValidate: formRef.value?.clearValidate,\n\t\t\t\t/** @description Scroll to the specified fields. */\n\t\t\t\tscrollToField: formRef.value?.scrollToField,\n\t\t\t\t/** @description All fields context. */\n\t\t\t\tfields: formRef.value?.fields,\n\t\t\t})).value,\n\t\t});\n\t},\n});\n"],"names":["faFormProps","formProps","labelWidth","type","String","Number","default","labelSuffix","scrollToError","Boolean","detailForm","grid","cols","definePropType","Object","xs","sm","md","lg","xl","defineComponent","name","props","slots","makeSlots","setup","attrs","expose","state","reactive","computed","isObject","colsNumber","isNumber","gap","formRef","ref","provide","elFormProps","useProps","useExpose","useRender","_createVNode","ElForm","_mergeProps","value","class","FaLayoutGrid","collapsed","validate","formUtil","validateField","validateScrollToField","resetFields","clearValidate","scrollToField","fields"],"mappings":"sdAQaA,EAAc,IACvBC,EAASA,UAEZC,WAAY,CACXC,KAAM,CAACC,OAAQC,QACfC,QAAS,QAGVC,YAAa,CACZJ,KAAMC,OACNE,QAAS,KAGVE,cAAe,CACdL,KAAMM,QACNH,SAAS,GAGVI,WAAYD,QAEZE,KAAM,CACLR,KAAMM,QACNH,SAAS,GAGVM,KAAM,CACLT,KAAMU,EAAAA,eAAyE,CAACT,OAAQC,OAAQS,SAChGR,QAASA,KAA+C,CAAES,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,MAS7EC,oBAAgB,CAC9BC,KAAM,SACNC,MAAOtB,EACPuB,MAAOC,EAAAA,YACPC,KAAAA,CAAMH,GAAOI,MAAEA,EAAOH,MAAAA,EAAOI,OAAAA,IACtBC,MAAAA,EAAQC,EAAAA,SAAS,CACtBjB,KAAMkB,EAAQA,UAAC,KACd,GAAIC,EAAQA,SAACT,EAAMV,MAClB,OAAOU,EAAMV,KACP,CACAoB,MAAAA,EAAaC,EAAAA,SAASX,EAAMV,MAAQU,EAAMV,KAAOP,OAAOiB,EAAMV,MAC7D,MAAA,CAAEG,GAAI,EAAGC,GAAIgB,EAAYf,GAAIe,EAAYd,GAAIc,EAAYb,GAAIa,EACrE,KAEDE,IAAK,CAAC,GAAI,KAGLC,EAAUC,EAAAA,MAGhBC,EAAAA,QAAQ,aAAcT,EAAMhB,MAE5B,MAAM0B,EAAcC,EAAAA,SAASjB,EAAOrB,EAASA,WAiBtCuC,OAfEC,EAAAA,WAAC,IAAAC,EAAAA,YAAAC,EAAAA,OAAAC,EAAAA,WACGN,EAAYO,MAAK,CAAAT,IAAOD,EAAOW,MAAS,CAAC,UAAW,CAAE,iBAAkBxB,EAAMZ,eAAa,CAErGJ,QAASA,IACRgB,EAAMX,KAAI+B,EAAAA,YAAAK,EAAAA,aAAA,CAAAC,WAAA,EAAAd,IACoBN,EAAMM,IAAGtB,KAAQgB,EAAMhB,MAAI,CAAAN,QAAAA,IACtDiB,CAAAA,EAAMjB,SAAWiB,EAAMjB,QAAQsB,MAGjCL,EAAMjB,SAAWiB,EAAMjB,QAAQsB,OAM7BY,EAAAA,UAAUb,EAAQ,IACrBG,EAAQA,UAAC,iBAAO,MAAA,CAElBmB,SAAUA,IAA4BC,EAAAA,SAASD,SAASd,GAExDgB,cAAeA,IAA4BD,EAAAA,SAASE,sBAAsBjB,GAE1EkB,YAAalB,OAAAA,EAAQU,EAAAA,YAAOQ,EAAAA,EAAAA,YAE5BC,cAAenB,OAAAA,EAAQU,EAAAA,YAAOS,EAAAA,EAAAA,cAE9BC,cAAepB,OAAAA,EAAQU,EAAAA,YAAOU,EAAAA,EAAAA,cAE9BC,OAAQrB,OAAAA,EAAQU,EAAAA,YAAOW,EAAAA,EAAAA,OACvB,IAAGX,OAEN"}