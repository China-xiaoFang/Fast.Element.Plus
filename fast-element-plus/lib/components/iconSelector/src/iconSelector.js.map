{"version":3,"file":"iconSelector.js","sources":["../../../../../packages/components/iconSelector/src/iconSelector.tsx"],"sourcesContent":["import { computed, defineComponent, reactive } from \"vue\";\nimport * as ElementPlusIconsVue from \"@element-plus/icons-vue\";\nimport { ChromeFilled, RefreshRight } from \"@element-plus/icons-vue\";\nimport { FaIcon } from \"@fast-element-plus/components/icon\";\nimport { FastElementPlusIconsVue } from \"@fast-element-plus/icons-vue\";\nimport { definePropType, useRender, withDefineType } from \"@fast-element-plus/utils\";\nimport { ElIcon, ElInput, ElPopover, ElScrollbar } from \"element-plus\";\nimport { isString } from \"lodash-unified\";\n\ntype IconType = \"ele\" | \"fastEle\" | \"local\";\n\nexport default defineComponent({\n\tname: \"FaIconSelector\",\n\tprops: {\n\t\t/** @description v-model绑定值 */\n\t\tmodelValue: String,\n\t\t/** @description 自定义图标 */\n\t\tcustomIcons: definePropType<string[]>(Array),\n\t},\n\temits: {\n\t\t/** @description v-model 回调 */\n\t\t\"update:modelValue\": (value: string) => isString(value),\n\t\t/** @description 改变 */\n\t\tchange: (value: string) => isString(value),\n\t},\n\tsetup(props, { attrs, slots, emit, expose }) {\n\t\tconst state = reactive({\n\t\t\tvalue: withDefineType<string>(),\n\t\t\tsearchValue: withDefineType<string>(),\n\t\t\ticonType: withDefineType<IconType>(\"ele\"),\n\t\t\tpopoverVisible: false,\n\t\t\ticonNames: withDefineType<string[]>(Object.keys(ElementPlusIconsVue)),\n\t\t\trenderIconNames: computed((): string[] => {\n\t\t\t\tif (!state.searchValue) return state.iconNames;\n\t\t\t\treturn state.iconNames.filter((f) => f.toLowerCase().indexOf(state.searchValue.toLowerCase()) !== -1);\n\t\t\t}),\n\t\t});\n\n\t\tconst handleTabClick = (iconType: IconType): void => {\n\t\t\tstate.iconType = iconType;\n\t\t\tstate.iconNames = [];\n\t\t\tswitch (iconType) {\n\t\t\t\tcase \"ele\":\n\t\t\t\t\tstate.iconNames = Object.keys(ElementPlusIconsVue).map((m) => `el-icon-${m}`);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"fastEle\":\n\t\t\t\t\tstate.iconNames = Object.keys(FastElementPlusIconsVue).map((m) => `fa-icon-${m}`);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"local\":\n\t\t\t\t\tstate.iconNames = props.customIcons;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\t\tconst handleIconClick = (value: string): void => {\n\t\t\tstate.popoverVisible = false;\n\t\t\tstate.value = value;\n\t\t\tstate.searchValue = \"\";\n\t\t\temit(\"update:modelValue\", value);\n\t\t\temit(\"change\", value);\n\t\t};\n\n\t\tconst handleRefresh = (): void => {\n\t\t\tstate.value = null;\n\t\t\tstate.searchValue = null;\n\t\t\temit(\"update:modelValue\", null);\n\t\t\temit(\"change\", null);\n\t\t};\n\n\t\tuseRender(() => (\n\t\t\t<ElPopover\n\t\t\t\tpopperClass=\"fa-icon-selector-popover\"\n\t\t\t\tvisible={state.popoverVisible}\n\t\t\t\twidth=\"auto\"\n\t\t\t\ttrigger=\"click\"\n\t\t\t\tshowArrow={false}\n\t\t\t\tshowAfter={0}\n\t\t\t\thideAfter={0}\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\treference: () => (\n\t\t\t\t\t\t<ElInput vModel={state.searchValue} placeholder=\"搜索图标\">\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tprepend: () => (\n\t\t\t\t\t\t\t\t\t<ElIcon>\n\t\t\t\t\t\t\t\t\t\t<ChromeFilled />\n\t\t\t\t\t\t\t\t\t</ElIcon>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tappend: () => (\n\t\t\t\t\t\t\t\t\t<ElIcon onClick={handleRefresh}>\n\t\t\t\t\t\t\t\t\t\t<RefreshRight />\n\t\t\t\t\t\t\t\t\t</ElIcon>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ElInput>\n\t\t\t\t\t),\n\t\t\t\t\tdefault: () => (\n\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box\">\n\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-header\">\n\t\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-header__title\">请选择图标</div>\n\t\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-header__tab\">\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass={[state.iconType === \"ele\" ? \"fa-icon-selector-popover__box-header__tab-is-active\" : \"\"]}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Element Plus 图标\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleTabClick(\"ele\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tele\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass={[state.iconType === \"fastEle\" ? \"fa-icon-selector-popover__box-header__tab-is-active\" : \"\"]}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Fast Element Plus 图标\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleTabClick(\"fastEle\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tfastEle\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass={[state.iconType === \"local\" ? \"fa-icon-selector-popover__box-header__tab-is-active\" : \"\"]}\n\t\t\t\t\t\t\t\t\t\ttitle=\"本地图标\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleTabClick(\"local\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tlocal\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-body\">\n\t\t\t\t\t\t\t\t<ElScrollbar>\n\t\t\t\t\t\t\t\t\t{state.renderIconNames.map((m) => (\n\t\t\t\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-body__item\" title={m} onClick={() => handleIconClick(m)}>\n\t\t\t\t\t\t\t\t\t\t\t<FaIcon name={m} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</ElScrollbar>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t),\n\t\t\t\t}}\n\t\t\t</ElPopover>\n\t\t));\n\n\t\texpose({\n\t\t\ticonType: state.iconType,\n\t\t});\n\n\t\treturn {\n\t\t\ticonType: state.iconType,\n\t\t};\n\t},\n});\n"],"names":["defineComponent","name","props","modelValue","String","customIcons","definePropType","Array","emits","value","isString","change","setup","attrs","slots","emit","expose","state","reactive","withDefineType","searchValue","iconType","popoverVisible","iconNames","Object","keys","ElementPlusIconsVue","renderIconNames","computed","filter","f","toLowerCase","indexOf","handleTabClick","map","m","FastElementPlusIconsVue","handleRefresh","useRender","_createVNode","createVNode","ElPopover","popperClass","visible","width","trigger","showArrow","showAfter","hideAfter","reference","ElInput","$event","placeholder","prepend","ElIcon","default","ChromeFilled","append","onClick","RefreshRight","_slot","class","_createTextVNode","createTextVNode","title","ElScrollbar","_isSlot","s","handleIconClick","FaIcon","_isVNode","prototype","toString","call","isVNode"],"mappings":"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"}