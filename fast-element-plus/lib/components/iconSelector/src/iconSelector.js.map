{"version":3,"file":"iconSelector.js","sources":["../../../../../packages/components/iconSelector/src/iconSelector.tsx"],"sourcesContent":["import { computed, defineComponent, reactive } from \"vue\";\nimport { ElIcon, ElInput, ElPopover, ElScrollbar } from \"element-plus\";\nimport * as ElementPlusIconsVue from \"@element-plus/icons-vue\";\nimport { ChromeFilled, RefreshRight } from \"@element-plus/icons-vue\";\nimport { FaIcon } from \"@fast-element-plus/components/icon\";\nimport FastElementPlusIconsVue from \"@fast-element-plus/icons-vue\";\nimport { definePropType, useExpose, useRender, withDefineType } from \"@fast-china/utils\";\nimport { isNull, isString } from \"lodash-unified\";\n\ntype IconType = \"ele\" | \"fastEle\" | \"local\";\n\nexport default defineComponent({\n\tname: \"FaIconSelector\",\n\tprops: {\n\t\t/** @description v-model绑定值 */\n\t\tmodelValue: String,\n\t\t/** @description 自定义图标 */\n\t\tcustomIcons: definePropType<string[]>(Array),\n\t},\n\temits: {\n\t\t/** @description v-model 回调 */\n\t\t\"update:modelValue\": (value: string) => isString(value) || isNull(value),\n\t\t/** @description 改变 */\n\t\tchange: (value: string) => isString(value) || isNull(value),\n\t},\n\tsetup(props, { attrs, slots, emit, expose }) {\n\t\tconst state = reactive({\n\t\t\tvalue: withDefineType<string>(),\n\t\t\tsearchValue: withDefineType<string>(),\n\t\t\ticonType: withDefineType<IconType>(\"ele\"),\n\t\t\tpopoverVisible: false,\n\t\t\ticonNames: withDefineType<string[]>(Object.keys(ElementPlusIconsVue)),\n\t\t\trenderIconNames: computed((): string[] => {\n\t\t\t\tif (!state.searchValue) return state.iconNames;\n\t\t\t\treturn state.iconNames.filter((f) => f.toLowerCase().indexOf(state.searchValue.toLowerCase()) !== -1);\n\t\t\t}),\n\t\t});\n\n\t\tconst handleTabClick = (iconType: IconType): void => {\n\t\t\tstate.iconType = iconType;\n\t\t\tstate.iconNames = [];\n\t\t\tswitch (iconType) {\n\t\t\t\tcase \"ele\":\n\t\t\t\t\tstate.iconNames = Object.keys(ElementPlusIconsVue).map((m) => `el-icon-${m}`);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"fastEle\":\n\t\t\t\t\tstate.iconNames = Object.keys(FastElementPlusIconsVue).map((m) => `fa-icon-${m}`);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"local\":\n\t\t\t\t\tstate.iconNames = props.customIcons;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\t\tconst handleIconClick = (value: string): void => {\n\t\t\tstate.popoverVisible = false;\n\t\t\tstate.value = value;\n\t\t\tstate.searchValue = \"\";\n\t\t\temit(\"update:modelValue\", value);\n\t\t\temit(\"change\", value);\n\t\t};\n\n\t\tconst handleRefresh = (): void => {\n\t\t\tstate.value = null;\n\t\t\tstate.searchValue = null;\n\t\t\temit(\"update:modelValue\", null);\n\t\t\temit(\"change\", null);\n\t\t};\n\n\t\tuseRender(() => (\n\t\t\t<ElPopover\n\t\t\t\tpopperClass=\"fa-icon-selector-popover\"\n\t\t\t\tvisible={state.popoverVisible}\n\t\t\t\twidth=\"auto\"\n\t\t\t\ttrigger=\"click\"\n\t\t\t\tshowArrow={false}\n\t\t\t\tshowAfter={0}\n\t\t\t\thideAfter={0}\n\t\t\t>\n\t\t\t\t{{\n\t\t\t\t\treference: () => (\n\t\t\t\t\t\t<ElInput vModel={state.searchValue} placeholder=\"搜索图标\">\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tprepend: () => (\n\t\t\t\t\t\t\t\t\t<ElIcon>\n\t\t\t\t\t\t\t\t\t\t<ChromeFilled />\n\t\t\t\t\t\t\t\t\t</ElIcon>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tappend: () => (\n\t\t\t\t\t\t\t\t\t<ElIcon onClick={handleRefresh}>\n\t\t\t\t\t\t\t\t\t\t<RefreshRight />\n\t\t\t\t\t\t\t\t\t</ElIcon>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ElInput>\n\t\t\t\t\t),\n\t\t\t\t\tdefault: () => (\n\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box\">\n\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-header\">\n\t\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-header__title\">请选择图标</div>\n\t\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-header__tab\">\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass={{ \"is-active\": state.iconType === \"ele\" }}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Element Plus 图标\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleTabClick(\"ele\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tele\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass={{ \"is-active\": state.iconType === \"fastEle\" }}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Fast Element Plus 图标\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleTabClick(\"fastEle\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tfastEle\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclass={{ \"is-active\": state.iconType === \"local\" }}\n\t\t\t\t\t\t\t\t\t\ttitle=\"本地图标\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleTabClick(\"local\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tlocal\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-body\">\n\t\t\t\t\t\t\t\t<ElScrollbar>\n\t\t\t\t\t\t\t\t\t{state.renderIconNames.map((m) => (\n\t\t\t\t\t\t\t\t\t\t<div class=\"fa-icon-selector-popover__box-body__item\" title={m} onClick={() => handleIconClick(m)}>\n\t\t\t\t\t\t\t\t\t\t\t<FaIcon name={m} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</ElScrollbar>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t),\n\t\t\t\t}}\n\t\t\t</ElPopover>\n\t\t));\n\n\t\treturn useExpose(expose, {\n\t\t\ticonType: state.iconType,\n\t\t});\n\t},\n});\n"],"names":["IconSelector","name","props","modelValue","String","customIcons","definePropType","Array","emits","isString","value","isNull","change","setup","attrs","slots","emit","expose","state","reactive","withDefineType","searchValue","iconType","popoverVisible","iconNames","Object","keys","ElementPlusIconsVue","renderIconNames","computed","filter","f","toLowerCase","indexOf","handleTabClick","map","m","FastElementPlusIconsVue","handleRefresh","useRender","_createVNode","ElPopover","popperClass","visible","width","trigger","showArrow","showAfter","hideAfter","reference","ElInput","$event","placeholder","prepend","ElIcon","default","ChromeFilled","append","onClick","RefreshRight","_slot","class","_createTextVNode","title","ElScrollbar","s","handleIconClick","FaIcon","prototype","toString","call","_isVNode","useExpose"],"mappings":"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"}