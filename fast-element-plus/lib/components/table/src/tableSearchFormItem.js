"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),l=require("element-plus"),t=require("@fast-china/utils"),c=require("lodash-unified"),r=require("./table.type.js"),a=require("./useTable.js"),s=["el-input","ELInput","el-input-number","ELInputNumber","el-select","ElSelect","el-select-v2","ElSelectV2","el-tree-select","ElTreeSelect","el-cascader","ElCascader","el-date-picker","ElDatePicker","el-time-picker","ElTimePicker","el-time-select","ElTimeSelect"],u=["el-select","ElSelect","el-select-v2","ElSelectV2","el-tree-select","ElTreeSelect"],n=["el-input","ELInput","el-input-number","ELInputNumber"],i=["el-select","ElSelect","el-select-v2","ElSelectV2","el-tree-select","ElTreeSelect","el-cascader","ElCascader"],o=e.defineComponent({name:"FaTableSearchFormItem",props:{column:{type:t.definePropType(Object),required:!0,default:{}},search:{type:t.definePropType(Function),required:!0}},slots:t.makeSlots(),setup(o,{slots:d}){const m=e.inject(a.tableStateKey),p=e.inject(a.enumMapKey),h=e.reactive({enumDict:t.withDefineType([]),oldValue:void 0}),S=e=>{c.isString(e)&&(e=e.trim()),h.oldValue=m.searchParam[o.column?.search?.key??o.column.prop],m.searchParam[o.column?.search?.key??o.column.prop]=e},E=e=>{o.search()},b=()=>{const e=o.column.search,l={};if(s.includes(e?.el)&&(l.clearable=!0),u.includes(e?.el)&&(l.filterable=!0),n.includes(e?.el)&&(l.placeholder="请输入"),i.includes(e?.el)&&(l.placeholder="请选择"),["el-date-picker","ElDatePicker"].includes(e?.el)&&(l.unlinkPanels=!0,["datetimerange","daterange","monthrange","yearrange"].includes(e?.props?.type)?(l.defaultTime=t.dateUtil.getDefaultTime(),l.shortcuts=t.dateUtil.getShortcuts(),l.rangeSeparator="至",l.startPlaceholder="开始时间",l.endPlaceholder="结束时间"):(l.defaultTime=t.dateUtil.getSimpleTime(),l.shortcuts=t.dateUtil.getSimpleShortcuts())),["el-time-picker","ElTimePicker"].includes(e?.el)&&e?.props?.isRange&&(l.rangeSeparator="至",l.startPlaceholder="开始时间",l.endPlaceholder="结束时间"),["el-select","ElSelect","el-select-v2","ElSelectV2","el-cascader","ElCascader","el-tree-select","ElTreeSelect"].includes(e?.el)){let e;e=o.column.enum&&c.isString(o.column.enum)?p.get(o.column.enum):p.get(o.column.prop??o.column.search?.key),e=e.filter(e=>!1!==e?.show),h.enumDict=e??[]}return["el-select-v2","ElSelectV2","el-cascader","ElCascader"].includes(e?.el)&&(l.options=h.enumDict),["el-tree-select","ElTreeSelect"].includes(e?.el)&&(l.data=h.enumDict),l};t.useRender(()=>e.createVNode(e.Fragment,null,[o.column.search?.el&&e.h(e.resolveComponent(o.column.search.el),{...b(),...o.column.search.props,modelValue:m.searchParam[o.column?.search?.key??o.column.prop],"onUpdate:modelValue":S,onChange:E},{default:()=>["el-select","ElSelect"].includes(o.column.search.el)?h.enumDict.map((t,c)=>e.h(l.ElOption,{key:c,label:t[o.column.search.props?.label??"label"],value:t[o.column.search.props?.value??"value"],disabled:t[o.column.search.props?.disabled??"disabled"]})):d.default&&d.default({column:o.column,search:o.search,...r.getTableDefaultSlots(m)})})]))}});exports.default=o;
//# sourceMappingURL=tableSearchFormItem.js.map
