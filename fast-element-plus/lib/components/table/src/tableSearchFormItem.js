"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),l=require("element-plus"),t=require("@fast-china/utils"),c=require("lodash-unified"),r=require("./table.type.js"),a=require("./useTable.js"),u=["el-input","ELInput","el-input-number","ELInputNumber","el-select","ElSelect","el-select-v2","ElSelectV2","el-tree-select","ElTreeSelect","el-cascader","ElCascader","el-date-picker","ElDatePicker","el-time-picker","ElTimePicker","el-time-select","ElTimeSelect"],n=["el-select","ElSelect","el-select-v2","ElSelectV2","el-tree-select","ElTreeSelect"],i=["el-input","ELInput","el-input-number","ELInputNumber"],o=["el-select","ElSelect","el-select-v2","ElSelectV2","el-tree-select","ElTreeSelect","el-cascader","ElCascader"],s=e.defineComponent({name:"FaTableSearchFormItem",props:{column:{type:t.definePropType(Object),required:!0,default:{}},search:{type:t.definePropType(Function),required:!0}},slots:t.makeSlots(),setup(s,{slots:d}){const m=e.inject(a.tableStateKey),p=e.inject(a.enumMapKey),v=e.reactive({enumDict:t.withDefineType([]),oldValue:void 0}),h=e=>{var l,t,r,a;c.isString(e)&&(e=e.trim()),v.oldValue=m.searchParam[(null==(t=null==(l=s.column)?void 0:l.search)?void 0:t.key)??s.column.prop],m.searchParam[(null==(a=null==(r=s.column)?void 0:r.search)?void 0:a.key)??s.column.prop]=e},S=e=>{s.search()},E=()=>{var e,l,r;const a=s.column.search,d={};if(u.includes(null==a?void 0:a.el)&&(d.clearable=!0),n.includes(null==a?void 0:a.el)&&(d.filterable=!0),i.includes(null==a?void 0:a.el)&&(d.placeholder="请输入"),o.includes(null==a?void 0:a.el)&&(d.placeholder="请选择"),["el-date-picker","ElDatePicker"].includes(null==a?void 0:a.el)&&(d.unlinkPanels=!0,["datetimerange","daterange","monthrange","yearrange"].includes(null==(e=null==a?void 0:a.props)?void 0:e.type)?(d.defaultTime=t.dateUtil.getDefaultTime(),d.shortcuts=t.dateUtil.getShortcuts(),d.rangeSeparator="至",d.startPlaceholder="开始时间",d.endPlaceholder="结束时间"):(d.defaultTime=t.dateUtil.getSimpleTime(),d.shortcuts=t.dateUtil.getSimpleShortcuts())),["el-time-picker","ElTimePicker"].includes(null==a?void 0:a.el)&&(null==(l=null==a?void 0:a.props)?void 0:l.isRange)&&(d.rangeSeparator="至",d.startPlaceholder="开始时间",d.endPlaceholder="结束时间"),["el-select","ElSelect","el-select-v2","ElSelectV2","el-cascader","ElCascader","el-tree-select","ElTreeSelect"].includes(null==a?void 0:a.el)){let e;e=s.column.enum&&c.isString(s.column.enum)?p.get(s.column.enum):p.get(s.column.prop??(null==(r=s.column.search)?void 0:r.key)),e=e.filter(e=>!1!==(null==e?void 0:e.show)),v.enumDict=e??[]}return["el-select-v2","ElSelectV2","el-cascader","ElCascader"].includes(null==a?void 0:a.el)&&(d.options=v.enumDict),["el-tree-select","ElTreeSelect"].includes(null==a?void 0:a.el)&&(d.data=v.enumDict),d};t.useRender(()=>{var t,c,a;return e.createVNode(e.Fragment,null,[(null==(t=s.column.search)?void 0:t.el)&&e.h(e.resolveComponent(s.column.search.el),{...E(),...s.column.search.props,modelValue:m.searchParam[(null==(a=null==(c=s.column)?void 0:c.search)?void 0:a.key)??s.column.prop],"onUpdate:modelValue":h,onChange:S},{default:()=>["el-select","ElSelect"].includes(s.column.search.el)?v.enumDict.map((t,c)=>{var r,a,u;return e.h(l.ElOption,{key:c,label:t[(null==(r=s.column.search.props)?void 0:r.label)??"label"],value:t[(null==(a=s.column.search.props)?void 0:a.value)??"value"],disabled:t[(null==(u=s.column.search.props)?void 0:u.disabled)??"disabled"]})}):d.default&&d.default({column:s.column,search:s.search,...r.getTableDefaultSlots(m)})})])})}});exports.default=s;
//# sourceMappingURL=tableSearchFormItem.js.map
