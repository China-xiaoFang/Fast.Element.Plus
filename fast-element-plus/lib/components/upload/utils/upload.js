"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("element-plus");require("../../../constants/index.js");const r=require("@fast-china/utils"),t=require("lodash-unified"),o=require("../../../constants/mime.js"),a={};for(const[n,i]of Object.entries(o.FaMimeType))i.split(",").forEach(e=>{a[e.trim()]=n});const s={detectFileType(e){const r=new Set;return e.split(",").forEach(e=>{r.add(a[e]??e)}),Array.from(r).join(",")},getPropsData(e,r){let o;o=t.isFunction(r)?r(e):r;const a={};return t.isArray(r)?r.forEach(e=>{Object.assign(a,e)}):Object.assign(a,o),a},async uploadFile(t,o,a,s){if(!t)return r.consoleError("uploadUtil","文件上传地址为空！"),e.ElMessage.error("文件上传地址为空！"),Promise.reject();const n=new FormData;n.append("file",o),n.append("fileName",a),s&&Object.keys(s).forEach(e=>{n.append(e,s[e])});try{const o=await fetch(t,{headers:{"Content-Type":"multipart/form-data"},method:"POST",body:n});return o.ok?await o.text():(r.consoleWarn("uploadUtil","文件上传失败！"),e.ElMessage.error("文件上传失败！"),Promise.reject())}catch(i){return r.consoleWarn("uploadUtil","文件上传失败！"),r.consoleError("uploadUtil",i),e.ElMessage.error("文件上传失败！"),Promise.reject()}},async uploadFileByApi(t,o,a,s){if(!t)return r.consoleError("uploadUtil","文件上传接口为空！"),e.ElMessage.error("文件上传接口为空！"),Promise.reject();const n=new FormData;n.append("file",o),n.append("fileName",a),s&&Object.keys(s).forEach(e=>{n.append(e,s[e])});try{return Promise.resolve(await t(n))}catch(i){return r.consoleWarn("uploadUtil","文件上传失败！"),r.consoleError("uploadUtil",i),e.ElMessage.error("文件上传失败！"),Promise.reject()}}};exports.uploadUtil=s;
//# sourceMappingURL=upload.js.map
