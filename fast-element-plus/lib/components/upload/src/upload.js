"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),l=require("element-plus"),a=require("@element-plus/icons-vue"),t=require("@fast-china/utils"),r=require("lodash-unified"),o=require("./useUpload.js"),i={...l.uploadProps,drag:{type:Boolean,default:!0},limit:{type:Number,default:1},modelValue:t.definePropType([String,Array]),maxSize:{type:t.definePropType([String,Number]),default:5120},uploadApi:{type:t.definePropType(Function)},uploadUrl:String},d={"update:modelValue":e=>r.isString(e)||r.isArray(e)||r.isNull(e),"update:fileList":e=>r.isArray(e),change:e=>r.isString(e)||r.isArray(e)||r.isNull(e)},u=e.defineComponent({name:"FaUpload",props:i,emits:d,slots:t.makeSlots(),setup(r,{attrs:i,slots:d,emit:u,expose:n}){const{fileList:s,loading:p,formContext:c,maxSizeMB:v,handleHttpRequest:m,handleOnSuccess:f,handleOnError:g,handleOnExceed:h,handleOnUpload:x}=o.useUpload("FaUpload","文件",r,u,{maxSize:r.maxSize,uploadApi:r.uploadApi,uploadUrl:r.uploadUrl}),N=e.computed(()=>r.disabled||(null==c?void 0:c.disabled)),S=e.ref(),V=(e,l)=>{"ready"===e.status&&(x(e)?r.onChange&&r.onChange(e,l):s.value=s.value.slice(0,-1))},b=t.useProps(r,l.uploadProps,["fileList","disabled","httpRequest","onExceed","onSuccess","onError","onChange"]);return t.useRender(()=>e.withDirectives(e.createVNode(l.ElUpload,e.mergeProps(b.value,{ref:S,class:"fa-upload",fileList:s.value,"onUpdate:fileList":e=>s.value=e,disabled:N.value,httpRequest:m,onExceed:h,onSuccess:f,onError:g,onChange:V}),{default:()=>d.default?d.default():e.createVNode(e.Fragment,null,[e.createVNode(l.ElIcon,{class:"el-icon--upload"},{default:()=>[e.createVNode(a.UploadFilled,null,null)]}),e.createVNode("div",{class:"el-upload__text"},[e.createTextVNode("Drop file here or "),e.createVNode("em",null,[e.createTextVNode("click to upload")])])]),...d.trigger&&{trigger:()=>d.trigger()},tip:()=>d.tip?d.tip():e.createVNode(e.Fragment,null,[e.createVNode("div",{class:"el-upload__tip"},[e.createTextVNode("files with a size less than "),v.toString(),e.createTextVNode("MB")]),!r.showFileList&&s.value.length>0&&e.createVNode("div",{class:"el-upload__tip"},[s.value.map((l,a)=>e.createVNode(e.Fragment,null,[l.name,s.value.length<=a&&e.createVNode("br",null,null)]))])]),...d.file&&{file:({file:e,index:l})=>d.file({file:e,index:l})}}),[[e.resolveDirective("loading"),p.value]])),t.useExpose(n,{abort:e.computed(()=>{var e;return null==(e=S.value)?void 0:e.abort}),submit:e.computed(()=>{var e;return null==(e=S.value)?void 0:e.submit}),clearFiles:e.computed(()=>{var e;return null==(e=S.value)?void 0:e.clearFiles}),handleStart:e.computed(()=>{var e;return null==(e=S.value)?void 0:e.handleStart}),handleRemove:e.computed(()=>{var e;return null==(e=S.value)?void 0:e.handleRemove}),loading:p,fileList:s})}});exports.default=u,exports.faUploadEmits=d,exports.faUploadProps=i;
//# sourceMappingURL=upload.js.map
