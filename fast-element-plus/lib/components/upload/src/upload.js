"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),l=require("element-plus"),a=require("@element-plus/icons-vue"),t=require("@fast-china/utils"),o=require("lodash-unified"),r=require("./useUpload.js"),i={...l.uploadProps,drag:{type:Boolean,default:!0},limit:{type:Number,default:1},modelValue:t.definePropType([String,Array]),maxSize:{type:t.definePropType([String,Number]),default:5120},uploadApi:{type:t.definePropType(Function)},uploadUrl:String},d={"update:modelValue":e=>o.isString(e)||o.isArray(e)||o.isNull(e),"update:fileList":e=>o.isArray(e),change:e=>o.isString(e)||o.isArray(e)||o.isNull(e)},u=e.defineComponent({name:"FaUpload",props:i,emits:d,slots:t.makeSlots(),setup(o,{attrs:i,slots:d,emit:u,expose:s}){const{fileList:n,loading:p,formContext:c,maxSizeMB:m,handleHttpRequest:f,handleOnSuccess:g,handleOnError:v,handleOnExceed:h,handleOnUpload:x}=r.useUpload("FaUpload","文件",o,u,{maxSize:o.maxSize,uploadApi:o.uploadApi,uploadUrl:o.uploadUrl}),N=e.computed(()=>o.disabled||c?.disabled),S=e.ref(),V=(e,l)=>{"ready"===e.status&&(x(e)?o.onChange&&o.onChange(e,l):n.value=n.value.slice(0,-1))},b=t.useProps(o,l.uploadProps,["fileList","disabled","httpRequest","onExceed","onSuccess","onError","onChange"]);return t.useRender(()=>e.withDirectives(e.createVNode(l.ElUpload,e.mergeProps(b.value,{ref:S,class:"fa-upload",fileList:n.value,"onUpdate:fileList":e=>n.value=e,disabled:N.value,httpRequest:f,onExceed:h,onSuccess:g,onError:v,onChange:V}),{default:()=>d.default?d.default():e.createVNode(e.Fragment,null,[e.createVNode(l.ElIcon,{class:"el-icon--upload"},{default:()=>[e.createVNode(a.UploadFilled,null,null)]}),e.createVNode("div",{class:"el-upload__text"},[e.createTextVNode("Drop file here or "),e.createVNode("em",null,[e.createTextVNode("click to upload")])])]),...d.trigger&&{trigger:()=>d.trigger()},tip:()=>d.tip?d.tip():e.createVNode(e.Fragment,null,[e.createVNode("div",{class:"el-upload__tip"},[e.createTextVNode("files with a size less than "),m.toString(),e.createTextVNode("MB")]),!o.showFileList&&n.value.length>0&&e.createVNode("div",{class:"el-upload__tip"},[n.value.map((l,a)=>e.createVNode(e.Fragment,null,[l.name,n.value.length<=a&&e.createVNode("br",null,null)]))])]),...d.file&&{file:({file:e,index:l})=>d.file({file:e,index:l})}}),[[e.resolveDirective("loading"),p.value]])),t.useExpose(s,{abort:e.computed(()=>S.value?.abort),submit:e.computed(()=>S.value?.submit),clearFiles:e.computed(()=>S.value?.clearFiles),handleStart:e.computed(()=>S.value?.handleStart),handleRemove:e.computed(()=>S.value?.handleRemove),loading:p,fileList:n})}});exports.default=u,exports.faUploadEmits=d,exports.faUploadProps=i;
//# sourceMappingURL=upload.js.map
