"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),l=require("@element-plus/icons-vue"),a=require("../../../settings/index.js");require("../../../utils/index.js");const t=require("element-plus"),r=require("lodash-unified"),i=require("./useUpload.js"),o=require("../../../utils/vue/props.js"),u=require("../../../utils/vue/slots.js"),s=require("../../../utils/vue/useRender.js"),d=require("../../../utils/vue/expose.js"),n={...t.uploadProps,drag:{type:Boolean,default:!0},limit:{type:Number,default:1},modelValue:o.definePropType([String,Array]),maxSize:{type:o.definePropType([String,Number]),default:5120},uploadUrl:{type:String,default:()=>a.FastApp.state.upload.url},fileType:Number},p={"update:modelValue":e=>r.isString(e)||r.isArray(e),"update:fileList":e=>r.isArray(e),change:e=>r.isString(e)||r.isArray(e)},c=e.defineComponent({name:"FaUpload",props:n,emits:p,slots:u.makeSlots(),setup(a,{attrs:r,slots:u,emit:n,expose:p}){const{fileList:c,loading:v,formContext:f,maxSizeMB:m,handleHttpRequest:g,handleOnSuccess:h,handleOnError:x,handleOnExceed:N,handleOnUpload:S}=i.useUpload("FaUpload","文件",a,n,{maxSize:a.maxSize,uploadUrl:a.uploadUrl}),V=e.computed((()=>a.disabled||(null==f?void 0:f.disabled))),b=e.ref(),q=(e,l)=>{"ready"===e.status&&(S(e)?a.onChange&&a.onChange(e,l):c.value=c.value.slice(0,-1))},y=o.useProps(a,t.uploadProps,["fileList","disabled","httpRequest","onExceed","onSuccess","onError","onChange"]);return s.useRender((()=>e.withDirectives(e.createVNode(t.ElUpload,e.mergeProps(y.value,{ref:b,class:"fa-upload",fileList:c.value,"onUpdate:fileList":e=>c.value=e,disabled:V.value,httpRequest:g,onExceed:N,onSuccess:h,onError:x,onChange:q}),{default:()=>u.default?u.default():e.createVNode(e.Fragment,null,[e.createVNode(t.ElIcon,{class:"el-icon--upload"},{default:()=>[e.createVNode(l.UploadFilled,null,null)]}),e.createVNode("div",{class:"el-upload__text"},[e.createTextVNode("Drop file here or "),e.createVNode("em",null,[e.createTextVNode("click to upload")])])]),...u.trigger&&{trigger:()=>u.trigger()},tip:()=>u.tip?u.tip():e.createVNode(e.Fragment,null,[e.createVNode("div",{class:"el-upload__tip"},[e.createTextVNode("files with a size less than "),m.toString(),e.createTextVNode("MB")]),!a.showFileList&&c.value.length>0&&e.createVNode("div",{class:"el-upload__tip"},[c.value.map(((l,a)=>e.createVNode(e.Fragment,null,[l.name,c.value.length<=a&&e.createVNode("br",null,null)])))])]),...u.file&&{file:({file:e,index:l})=>u.file({file:e,index:l})}}),[[e.resolveDirective("loading"),v.value]]))),d.useExpose(p,{...e.computed((()=>{var e,l,a,t,r;return{abort:null==(e=b.value)?void 0:e.abort,submit:null==(l=b.value)?void 0:l.submit,clearFiles:null==(a=b.value)?void 0:a.clearFiles,handleStart:null==(t=b.value)?void 0:t.handleStart,handleRemove:null==(r=b.value)?void 0:r.handleRemove}})).value,loading:v,fileList:c})}});exports.default=c,exports.faUploadEmits=p,exports.faUploadProps=n;
//# sourceMappingURL=upload.js.map
