{"version":3,"file":"layoutGridItem.js","sources":["../../../../../packages/components/layoutGrid/src/layoutGridItem.tsx"],"sourcesContent":["import { computed, defineComponent, inject, reactive, ref, watch } from \"vue\";\nimport { definePropType, makeSlots, useExpose, useRender } from \"@fast-china/utils\";\nimport { isNumber } from \"lodash-unified\";\nimport type { FaLayoutGridItemResponsive } from \"./layoutGrid.type\";\nimport type { FaLayoutGridBreakPoint } from \"@fast-element-plus/components/layoutGrid\";\nimport type { Ref } from \"vue\";\n\ntype FaLayoutGridItemSlots = {\n\t/** @description 默认内容插槽 */\n\tdefault: never;\n};\n\nexport default defineComponent({\n\tname: \"FaLayoutGridItem\",\n\tprops: {\n\t\t/** @description 偏移 */\n\t\toffset: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: 0,\n\t\t},\n\t\t/** @description 占位 */\n\t\tspan: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: 1,\n\t\t},\n\t\t/** @description 后缀 */\n\t\tsuffix: { type: Boolean, default: false },\n\t\t/** @description 响应式，小于480px屏幕配置 */\n\t\txs: {\n\t\t\ttype: definePropType<FaLayoutGridItemResponsive>(Object),\n\t\t\tdefault: undefined as FaLayoutGridItemResponsive,\n\t\t},\n\t\t/** @description 响应式，平板竖屏配置 */\n\t\tsm: {\n\t\t\ttype: definePropType<FaLayoutGridItemResponsive>(Object),\n\t\t\tdefault: undefined as FaLayoutGridItemResponsive,\n\t\t},\n\t\t/** @description 响应式，平板横屏配置 */\n\t\tmd: {\n\t\t\ttype: definePropType<FaLayoutGridItemResponsive>(Object),\n\t\t\tdefault: undefined as FaLayoutGridItemResponsive,\n\t\t},\n\t\t/** @description 响应式，小型桌面配置 */\n\t\tlg: {\n\t\t\ttype: definePropType<FaLayoutGridItemResponsive>(Object),\n\t\t\tdefault: undefined as FaLayoutGridItemResponsive,\n\t\t},\n\t\t/** @description 响应式，大型桌面配置 */\n\t\txl: {\n\t\t\ttype: definePropType<FaLayoutGridItemResponsive>(Object),\n\t\t\tdefault: undefined as FaLayoutGridItemResponsive,\n\t\t},\n\t},\n\tslots: makeSlots<FaLayoutGridItemSlots>(),\n\tsetup(props, { attrs, slots, emit, expose }) {\n\t\tconst state = reactive({\n\t\t\tshow: true,\n\t\t});\n\n\t\tconst attrsObj = attrs as any;\n\n\t\t// 注入断点\n\t\tconst breakPoint = inject<Ref<FaLayoutGridBreakPoint>>(\"breakPoint\", ref(\"xl\"));\n\t\tconst shouldHiddenIndex = inject<Ref<number>>(\"shouldHiddenIndex\", ref(-1));\n\n\t\twatch(\n\t\t\t() => [shouldHiddenIndex.value, breakPoint.value],\n\t\t\t(n) => {\n\t\t\t\tif (~~attrsObj.index) {\n\t\t\t\t\tstate.show = !(n[0] !== -1 && parseInt(attrsObj.index) >= Number(n[0]));\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ immediate: true }\n\t\t);\n\n\t\tconst gap = inject(\"gap\", 0);\n\t\tconst cols = inject<Ref<number>>(\"cols\", ref(5));\n\n\t\tconst style = computed(() => {\n\t\t\tconst breakPointObk = props[breakPoint.value] as FaLayoutGridItemResponsive;\n\t\t\tconst span = breakPointObk?.span ?? (isNumber(props.span) ? props.span : Number(props.span));\n\t\t\tconst offset = breakPointObk?.offset ?? (isNumber(props.offset) ? props.offset : Number(props.offset));\n\t\t\tif (props.suffix) {\n\t\t\t\treturn {\n\t\t\t\t\tgridColumnStart: cols.value - span - offset + 1,\n\t\t\t\t\tgridColumnEnd: `span ${span + offset}`,\n\t\t\t\t\tmarginLeft: offset !== 0 ? `calc(((100% + ${gap}px) / ${span + offset}) * ${offset})` : \"unset\",\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tgridColumn: `span ${span + offset > cols.value ? cols.value : span + offset}/span ${\n\t\t\t\t\t\tspan + offset > cols.value ? cols.value : span + offset\n\t\t\t\t\t}`,\n\t\t\t\t\tmarginLeft: offset !== 0 ? `calc(((100% + ${gap}px) / ${span + offset}) * ${offset})` : \"unset\",\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\tuseRender(() => (\n\t\t\t<div style={style.value} vShow={state.show}>\n\t\t\t\t{slots.default && slots.default()}\n\t\t\t</div>\n\t\t));\n\n\t\treturn useExpose(expose, {\n\t\t\tshow: state.show,\n\t\t});\n\t},\n});\n"],"names":["LayoutGridItem","name","props","offset","type","String","Number","default","span","suffix","Boolean","xs","definePropType","Object","undefined","sm","md","lg","xl","slots","makeSlots","setup","attrs","emit","expose","state","reactive","show","attrsObj","breakPoint","inject","ref","shouldHiddenIndex","watch","value","n","index","parseInt","immediate","gap","cols","style","computed","breakPointObk","isNumber","gridColumnStart","gridColumnEnd","marginLeft","gridColumn","useRender","_withDirectives","_createVNode","_vShow","useExpose"],"mappings":"8LAYAA,oBAA+B,CAC9BC,KAAM,mBACNC,MAAO,CAENC,OAAQ,CACPC,KAAM,CAACC,OAAQC,QACfC,QAAS,GAGVC,KAAM,CACLJ,KAAM,CAACC,OAAQC,QACfC,QAAS,GAGVE,OAAQ,CAAEL,KAAMM,QAASH,SAAS,GAElCI,GAAI,CACHP,KAAMQ,EAAAA,eAA2CC,QACjDN,aAASO,GAGVC,GAAI,CACHX,KAAMQ,EAAAA,eAA2CC,QACjDN,aAASO,GAGVE,GAAI,CACHZ,KAAMQ,EAAAA,eAA2CC,QACjDN,aAASO,GAGVG,GAAI,CACHb,KAAMQ,EAAAA,eAA2CC,QACjDN,aAASO,GAGVI,GAAI,CACHd,KAAMQ,EAAAA,eAA2CC,QACjDN,aAASO,IAGXK,MAAOC,EAAAA,YACPC,KAAAA,CAAMnB,GAAOoB,MAAEA,EAAAA,MAAOH,EAAAA,KAAOI,EAAAA,OAAMC,IAClC,MAAMC,EAAQC,EAAAA,SAAS,CACtBC,MAAM,IAGDC,EAAWN,EAGXO,EAAaC,EAAAA,OAAoC,aAAcC,EAAAA,IAAI,OACnEC,EAAoBF,EAAAA,OAAoB,oBAAqBC,EAAAA,SAEnEE,EAAAA,MACC,IAAM,CAACD,EAAkBE,MAAOL,EAAWK,OAC1CC,MACMP,EAASQ,QACdX,EAAME,QAAkB,IAATQ,EAAE,IAAaE,SAAST,EAASQ,QAAU9B,OAAO6B,EAAE,OAGrE,CAAEG,WAAW,IAGd,MAAMC,EAAMT,EAAAA,OAAO,MAAO,GACpBU,EAAOV,EAAAA,OAAoB,OAAQC,EAAAA,IAAI,IAEvCU,EAAQC,EAAAA,SAAS,KACtB,MAAMC,EAAgBzC,EAAM2B,EAAWK,OACjC1B,EAAOmC,GAAenC,OAASoC,EAAAA,SAAS1C,EAAMM,MAAQN,EAAMM,KAAOF,OAAOJ,EAAMM,OAChFL,EAASwC,GAAexC,SAAWyC,EAAAA,SAAS1C,EAAMC,QAAUD,EAAMC,OAASG,OAAOJ,EAAMC,SAC9F,OAAID,EAAMO,OACF,CACNoC,gBAAiBL,EAAKN,MAAQ1B,EAAOL,EAAS,EAC9C2C,cAAe,QAAQtC,EAAOL,IAC9B4C,WAAuB,IAAX5C,EAAe,iBAAiBoC,UAAY/B,EAAOL,QAAaA,KAAY,SAGlF,CACN6C,WAAY,QAAQxC,EAAOL,EAASqC,EAAKN,MAAQM,EAAKN,MAAQ1B,EAAOL,UACpEK,EAAOL,EAASqC,EAAKN,MAAQM,EAAKN,MAAQ1B,EAAOL,IAElD4C,WAAuB,IAAX5C,EAAe,iBAAiBoC,UAAY/B,EAAOL,QAAaA,KAAY,WAW3F,OANA8C,EAAAA,UAAU,IAAAC,EAAAA,eAAAC,EAAAA,YAAA,MAAA,CAAAV,MACGA,EAAMP,OAAK,CACrBf,EAAMZ,SAAWY,EAAMZ,YAAS,CAAA,CAAA6C,EAAAA,MADF3B,EAAME,SAKhC0B,EAAAA,UAAU7B,EAAQ,CACxBG,KAAMF,EAAME,MAEd"}