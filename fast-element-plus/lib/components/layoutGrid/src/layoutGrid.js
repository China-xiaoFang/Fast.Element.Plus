"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");require("../../../utils/index.js");const o=require("lodash-unified"),l=require("../../../utils/vue/props.js"),s=require("../../../utils/vue/slots.js"),t=require("../../../utils/console.js"),n=require("../../../utils/vue/useRender.js"),r=e.defineComponent({name:"FaLayoutGrid",props:{cols:{type:l.definePropType([String,Number,Object]),default:()=>({xs:1,sm:2,md:3,lg:4,xl:5})},collapsed:Boolean,collapsedRows:{type:[String,Number],default:1},gap:{type:l.definePropType([Number,Array]),default:0}},emits:{breakPointChange:({breakPoint:e})=>!0},slots:s.makeSlots(),setup(l,{slots:s,emit:r,expose:a}){const i=e.ref();e.provide("gap",o.isArray(l.gap)?l.gap[0]:l.gap);const u=e.ref("xl");e.provide("breakPoint",u);const d=e.ref(-1);e.provide("shouldHiddenIndex",d);const p=e.computed((()=>o.isObject(l.cols)?l.cols[u.value]??l.cols:l.cols));e.provide("cols",p);const c=o.isNumber(l.collapsedRows)?l.collapsedRows:Number(l.collapsedRows),v={xs:{min:0,max:479},sm:{min:480,max:768},md:{min:768,max:1024},lg:{min:1024,max:1440},xl:{min:1440,max:1/0}},m=e=>{if(1!==e.length)throw new Error("未知的多个El");const o=e[0].target.scrollWidth;for(const[l,{min:s,max:t}]of Object.entries(v))if(o>=s&&o<=t){u.value=l;break}},f=()=>{var e,o,l,s,n,r,a;const v=[];let m=null;const f=null==(e=i.value)?void 0:e.children;if(f)for(let t=0;t<f.length;t++){const e=null==(o=f[t].__vueParentComponent)?void 0:o.vnode;"object"==typeof(null==e?void 0:e.type)&&"FaLayoutGridItem"===(null==e?void 0:e.type.name)&&void 0!==(null==(l=null==e?void 0:e.props)?void 0:l.suffix)&&(m=e),"symbol"==typeof(null==e?void 0:e.type)&&Array.isArray(null==e?void 0:e.children)&&(null==e||e.children.forEach((e=>v.push(e))))}let g=0;m&&(g=((null==(s=m.props[u.value])?void 0:s.span)??(null==(n=m.props)?void 0:n.span)??1)+((null==(r=m.props[u.value])?void 0:r.offset)??(null==(a=m.props)?void 0:a.offset)??0));try{let e=!1;v.reduce(((o=0,l,s)=>{var t,n,r,a;return(o+=((null==(t=l.props[u.value])?void 0:t.span)??(null==(n=l.props)?void 0:n.span)??1)+((null==(r=l.props[u.value])?void 0:r.offset)??(null==(a=l.props)?void 0:a.offset)??0))>c*p.value-g&&(d.value=s,e=!0),o}),0),e||(d.value=-1)}catch(b){t.consoleWarn("FaLayoutGrid",b)}};let g=null;e.onMounted((()=>{e.nextTick((()=>{g=new ResizeObserver(m),g.observe(i.value)}))})),e.onActivated((()=>{e.nextTick((()=>{g=new ResizeObserver(m),g.observe(i.value)}))})),e.onUnmounted((()=>{null==g||g.disconnect()})),e.onDeactivated((()=>{null==g||g.disconnect()})),e.onMounted((()=>{e.watch((()=>u.value),(()=>{l.collapsed&&(r("breakPointChange",{breakPoint:u.value}),f())}),{immediate:!0})})),e.watch((()=>l.collapsed),(e=>{if(e)return f();d.value=-1}));const b=e.computed((()=>o.isNumber(l.gap)?`${l.gap}px`:o.isArray(l.gap)?`${l.gap[1]}px ${l.gap[0]}px`:"unset")),x=e.computed((()=>({display:"grid",gridGap:b.value,gridTemplateColumns:`repeat(${p.value}, minmax(0, 1fr))`})));n.useRender((()=>e.createVNode("div",{ref:i,style:x.value},[s.default&&s.default()])))}});exports.default=r;
//# sourceMappingURL=layoutGrid.js.map
