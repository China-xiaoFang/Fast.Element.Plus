"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),o=require("@fast-china/utils"),t=require("lodash-unified"),r=e.defineComponent({name:"FaLayoutGrid",props:{cols:{type:o.definePropType([String,Number,Object]),default:()=>({xs:1,sm:2,md:3,lg:4,xl:5})},collapsed:Boolean,collapsedRows:{type:[String,Number],default:1},gap:{type:o.definePropType([Number,Array]),default:0}},emits:{breakPointChange:({breakPoint:e})=>!0},slots:o.makeSlots(),setup(r,{slots:s,emit:a,expose:l}){const n=e.ref();e.provide("gap",t.isArray(r.gap)?r.gap[0]:r.gap);const p=e.ref("xl");e.provide("breakPoint",p);const i=e.ref(-1);e.provide("shouldHiddenIndex",i);const u=e.computed(()=>t.isObject(r.cols)?r.cols[p.value]??r.cols:r.cols);e.provide("cols",u);const d=t.isNumber(r.collapsedRows)?r.collapsedRows:Number(r.collapsedRows),c={xs:{min:0,max:479},sm:{min:480,max:768},md:{min:768,max:1024},lg:{min:1024,max:1440},xl:{min:1440,max:1/0}},m=e=>{if(1!==e.length)throw new Error("未知的多个El");const o=e[0].target.scrollWidth;for(const[t,{min:r,max:s}]of Object.entries(c))if(o>=r&&o<=s){p.value=t;break}};let f=null;e.onMounted(()=>{e.nextTick(()=>{f=new ResizeObserver(m),f.observe(n.value)}),e.watch(()=>p.value,e=>{a("breakPointChange",{breakPoint:e})},{immediate:!0})}),e.onActivated(()=>{e.nextTick(()=>{f=new ResizeObserver(m),f.observe(n.value)})}),e.onUnmounted(()=>{f?.disconnect()}),e.onDeactivated(()=>{f?.disconnect()});const v=e.computed(()=>t.isNumber(r.gap)?`${r.gap}px`:t.isArray(r.gap)?`${r.gap[1]}px ${r.gap[0]}px`:"unset"),b=e.computed(()=>({display:"grid",gridGap:v.value,gridTemplateColumns:`repeat(${u.value}, minmax(0, 1fr))`}));return o.useRender(()=>{const o=s?.default()??[];if(r.collapsed){const e=[];let t=null;o.forEach(o=>{"object"==typeof o.type&&"FaLayoutGridItem"===o.type.name&&void 0!==o.props?.suffix&&(t=o),"symbol"==typeof o.type&&Array.isArray(o?.children)&&e.push(...o.children)});let r=0;t&&(r=(t.props[p.value]?.span??t.props?.span??1)+(t.props[p.value]?.offset??t.props?.offset??0));try{let o=!1;e.reduce((e=0,t,s)=>{if(e+=(t.props[p.value]?.span??t.props?.span??1)+(t.props[p.value]?.offset??t.props?.offset??0),Number(e)>d*Number(u.value)-r)throw i.value=s,o=!0,"find it";return e},0),o||(i.value=-1)}catch{}}else i.value=-1;return e.createVNode("div",{ref:n,style:b.value},[o])}),o.useExpose(l,{breakPoint:p})}});exports.default=r;
//# sourceMappingURL=layoutGrid.js.map
