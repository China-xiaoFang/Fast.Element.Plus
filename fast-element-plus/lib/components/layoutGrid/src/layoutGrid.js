"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),o=require("@fast-china/utils"),l=require("lodash-unified"),r=e.defineComponent({name:"FaLayoutGrid",props:{cols:{type:o.definePropType([String,Number,Object]),default:()=>({xs:1,sm:2,md:3,lg:4,xl:5})},collapsed:Boolean,collapsedRows:{type:[String,Number],default:1},gap:{type:o.definePropType([Number,Array]),default:0}},emits:{breakPointChange:({breakPoint:e})=>!0},slots:o.makeSlots(),setup(r,{slots:t,emit:s,expose:a}){const n=e.ref();e.provide("gap",l.isArray(r.gap)?r.gap[0]:r.gap);const i=e.ref("xl");e.provide("breakPoint",i);const p=e.ref(-1);e.provide("shouldHiddenIndex",p);const u=e.computed(()=>l.isObject(r.cols)?r.cols[i.value]??r.cols:r.cols);e.provide("cols",u);const d=l.isNumber(r.collapsedRows)?r.collapsedRows:Number(r.collapsedRows),c={xs:{min:0,max:479},sm:{min:480,max:768},md:{min:768,max:1024},lg:{min:1024,max:1440},xl:{min:1440,max:1/0}},v=e=>{if(1!==e.length)throw new Error("未知的多个El");const o=e[0].target.scrollWidth;for(const[l,{min:r,max:t}]of Object.entries(c))if(o>=r&&o<=t){i.value=l;break}};let m=null;e.onMounted(()=>{e.nextTick(()=>{m=new ResizeObserver(v),m.observe(n.value)}),e.watch(()=>i.value,e=>{s("breakPointChange",{breakPoint:e})},{immediate:!0})}),e.onActivated(()=>{e.nextTick(()=>{m=new ResizeObserver(v),m.observe(n.value)})}),e.onUnmounted(()=>{null==m||m.disconnect()}),e.onDeactivated(()=>{null==m||m.disconnect()});const f=e.computed(()=>l.isNumber(r.gap)?`${r.gap}px`:l.isArray(r.gap)?`${r.gap[1]}px ${r.gap[0]}px`:"unset"),b=e.computed(()=>({display:"grid",gridGap:f.value,gridTemplateColumns:`repeat(${u.value}, minmax(0, 1fr))`}));return o.useRender(()=>{var o,l,s,a;const c=(null==t?void 0:t.default())??[];if(r.collapsed){const e=[];let r=null;c.forEach(o=>{var l;"object"==typeof o.type&&"FaLayoutGridItem"===o.type.name&&void 0!==(null==(l=o.props)?void 0:l.suffix)&&(r=o),"symbol"==typeof o.type&&Array.isArray(null==o?void 0:o.children)&&e.push(...o.children)});let t=0;r&&(t=((null==(o=r.props[i.value])?void 0:o.span)??(null==(l=r.props)?void 0:l.span)??1)+((null==(s=r.props[i.value])?void 0:s.offset)??(null==(a=r.props)?void 0:a.offset)??0));try{let o=!1;e.reduce((e=0,l,r)=>{var s,a,n,c;if(e+=((null==(s=l.props[i.value])?void 0:s.span)??(null==(a=l.props)?void 0:a.span)??1)+((null==(n=l.props[i.value])?void 0:n.offset)??(null==(c=l.props)?void 0:c.offset)??0),Number(e)>d*Number(u.value)-t)throw p.value=r,o=!0,"find it";return e},0),o||(p.value=-1)}catch{}}else p.value=-1;return e.createVNode("div",{ref:n,style:b.value},[c])}),o.useExpose(a,{breakPoint:i})}});exports.default=r;
//# sourceMappingURL=layoutGrid.js.map
