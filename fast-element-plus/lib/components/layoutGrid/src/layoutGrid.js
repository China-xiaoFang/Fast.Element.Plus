"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),o=require("@fast-china/utils"),t=require("lodash-unified"),r=e.defineComponent({name:"FaLayoutGrid",props:{cols:{type:o.definePropType([String,Number,Object]),default:()=>({xs:1,sm:2,md:3,lg:4,xl:5})},collapsed:Boolean,collapsedRows:{type:[String,Number],default:1},gap:{type:o.definePropType([Number,Array]),default:0}},emits:{breakPointChange:({breakPoint:e})=>!0},slots:o.makeSlots(),setup(r,{attrs:s,slots:a,emit:l,expose:n}){const p=e.ref();e.provide("gap",t.isArray(r.gap)?r.gap[0]:r.gap);const i=e.ref("xl");e.provide("breakPoint",i);const u=e.ref(-1);e.provide("shouldHiddenIndex",u);const d=e.computed(()=>t.isObject(r.cols)?r.cols[i.value]??r.cols:r.cols);e.provide("cols",d);const c=t.isNumber(r.collapsedRows)?r.collapsedRows:Number(r.collapsedRows),m={xs:{min:0,max:479},sm:{min:480,max:768},md:{min:768,max:1024},lg:{min:1024,max:1440},xl:{min:1440,max:1/0}},f=e=>{if(1!==e.length)throw new Error("未知的多个El");const o=e[0].target.scrollWidth;for(const[t,{min:r,max:s}]of Object.entries(m))if(o>=r&&o<=s){i.value=t;break}};let v=null;e.onMounted(()=>{e.nextTick(()=>{v=new ResizeObserver(f),v.observe(p.value)}),e.watch(()=>i.value,e=>{l("breakPointChange",{breakPoint:e})},{immediate:!0})}),e.onActivated(()=>{e.nextTick(()=>{v=new ResizeObserver(f),v.observe(p.value)})}),e.onUnmounted(()=>{v?.disconnect()}),e.onDeactivated(()=>{v?.disconnect()});const b=e.computed(()=>t.isNumber(r.gap)?`${r.gap}px`:t.isArray(r.gap)?`${r.gap[1]}px ${r.gap[0]}px`:"unset"),g=e.computed(()=>({display:"grid",gridGap:b.value,gridTemplateColumns:`repeat(${d.value}, minmax(0, 1fr))`}));return o.useRender(()=>{const o=a?.default()??[];if(r.collapsed){const e=[];let t=null;o.forEach(o=>{"object"==typeof o.type&&"FaLayoutGridItem"===o.type.name&&void 0!==o.props?.suffix&&(t=o),"symbol"==typeof o.type&&Array.isArray(o?.children)&&e.push(...o.children)});let r=0;t&&(r=(t.props[i.value]?.span??t.props?.span??1)+(t.props[i.value]?.offset??t.props?.offset??0));try{let o=!1;e.reduce((e=0,t,s)=>{if(e+=(t.props[i.value]?.span??t.props?.span??1)+(t.props[i.value]?.offset??t.props?.offset??0),Number(e)>c*Number(d.value)-r)throw u.value=s,o=!0,"find it";return e},0),o||(u.value=-1)}catch{}}else u.value=-1;return e.createVNode("div",{ref:p,style:g.value},[o])}),o.useExpose(n,{breakPoint:i})}});exports.default=r;
//# sourceMappingURL=layoutGrid.js.map
