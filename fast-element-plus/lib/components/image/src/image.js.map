{"version":3,"file":"image.js","sources":["../../../../../packages/components/image/src/image.tsx"],"sourcesContent":["import type { VNode } from \"vue\";\nimport { computed, defineComponent, reactive } from \"vue\";\nimport { Picture as ElIconPicture } from \"@element-plus/icons-vue\";\nimport { makeSlots, useProps, useRender } from \"@fast-element-plus/utils\";\nimport { ElIcon, ElImage, imageProps } from \"element-plus\";\n\nexport const faImageProps = {\n\t...imageProps,\n\t/** @description when enabling preview, use this flag to control whether clicking on backdrop can exit preview mode. */\n\thideOnClickModal: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description whether to append image-viewer to body. A nested parent element attribute transform should have this attribute set to `true`. */\n\tpreviewTeleported: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description whether to use lazy load. */\n\tlazy: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\t/** @description 原图 */\n\toriginal: Boolean,\n\t/** @description 标准 */\n\tnormal: Boolean,\n\t/** @description 小图 */\n\tsmall: Boolean,\n\t/** @description 缩略图 */\n\tthumb: Boolean,\n\t/** @description 是否可以预览图片 */\n\tpreview: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n};\n\ntype FaImageSlots = {\n\t/** @description 当图像尚未加载时，自定义的占位符内容 */\n\tplaceholder: never;\n\t/** @description 自定义图像加载失败的内容 */\n\terror: never;\n\t/** @description 当图像预览时自定义内容 */\n\tviewer: { src: string };\n};\n\nexport default defineComponent({\n\tname: \"FaImage\",\n\tprops: faImageProps,\n\tslots: makeSlots<FaImageSlots>(),\n\tsetup(props, { attrs, slots, expose }) {\n\t\tconst state = reactive({\n\t\t\tsrc: computed(() => {\n\t\t\t\tif (!props.src) return props.src;\n\t\t\t\tif (props.original) {\n\t\t\t\t\treturn props.src;\n\t\t\t\t} else if (props.normal) {\n\t\t\t\t\treturn `${props.src}@!normal`;\n\t\t\t\t} else if (props.small) {\n\t\t\t\t\treturn `${props.src}@!small`;\n\t\t\t\t} else if (props.thumb) {\n\t\t\t\t\treturn `${props.src}@!thumb`;\n\t\t\t\t} else {\n\t\t\t\t\t// 默认使用缩略图\n\t\t\t\t\treturn `${props.src}@!thumb`;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tpreviewList: computed(() => (props.preview ? [props.src] : [])),\n\t\t});\n\n\t\tconst bindProps = useProps(props, imageProps, [\"src\", \"previewSrcList\"]);\n\n\t\tuseRender(() => (\n\t\t\t<ElImage {...attrs} {...bindProps.value} class=\"fa-image\" src={state.src} previewSrcList={state.previewList}>\n\t\t\t\t{{\n\t\t\t\t\terror: () =>\n\t\t\t\t\t\tslots.error ? (\n\t\t\t\t\t\t\tslots.error()\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div class=\"fa-image__error-image\">\n\t\t\t\t\t\t\t\t<ElIcon class=\"icon\">\n\t\t\t\t\t\t\t\t\t<ElIconPicture />\n\t\t\t\t\t\t\t\t</ElIcon>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t),\n\t\t\t\t\t...(slots.placeholder && { placeholder: (): VNode[] => slots.placeholder() }),\n\t\t\t\t\t...(slots.viewer && { viewer: (): VNode[] => slots.viewer({ src: state.src }) }),\n\t\t\t\t}}\n\t\t\t</ElImage>\n\t\t));\n\t},\n});\n"],"names":["faImageProps","imageProps","hideOnClickModal","type","Boolean","default","previewTeleported","lazy","original","normal","small","thumb","preview","defineComponent","name","props","slots","makeSlots","setup","attrs","expose","state","reactive","src","computed","previewList","bindProps","useProps","useRender","_createVNode","ElImage","_mergeProps","mergeProps","value","class","previewSrcList","error","createVNode","ElIcon","ElIconPicture","Picture","placeholder","viewer"],"mappings":"0WAMaA,EAAe,IACxBC,EAAUA,WAEbC,iBAAkB,CACjBC,KAAMC,QACNC,SAAS,GAGVC,kBAAmB,CAClBH,KAAMC,QACNC,SAAS,GAGVE,KAAM,CACLJ,KAAMC,QACNC,SAAS,GAGVG,SAAUJ,QAEVK,OAAQL,QAERM,MAAON,QAEPO,MAAOP,QAEPQ,QAAS,CACRT,KAAMC,QACNC,SAAS,IAaIQ,oBAAgB,CAC9BC,KAAM,UACNC,MAAOf,EACPgB,MAAOC,EAAAA,YACPC,KAAAA,CAAMH,GAAOI,MAAEA,EAAOH,MAAAA,EAAAA,OAAOI,IACtBC,MAAAA,EAAQC,EAAAA,SAAS,CACtBC,IAAKC,EAAQA,UAAC,IACRT,EAAMQ,IACPR,EAAMP,SACFO,EAAMQ,IACHR,EAAMN,OACT,GAAGM,EAAMQ,cACNR,EAAML,MACT,GAAGK,EAAMQ,cACNR,EAAMJ,MACT,GAAGI,EAAMQ,cARMR,EAAMQ,MAc9BE,YAAaD,EAAAA,UAAS,IAAOT,EAAMH,QAAU,CAACG,EAAMQ,KAAO,OAGtDG,EAAYC,EAAAA,SAASZ,EAAOd,EAAUA,WAAE,CAAC,MAAO,mBAE7C2B,EAAAA,WAAC,IAAAC,EAAAA,YAAAC,EAAAA,QAAAC,EAAAC,WACIb,EAAWO,EAAUO,MAAK,CAAAC,MAAA,WAAAX,IAAwBF,EAAME,IAAGY,eAAkBd,EAAMI,cAAW,CAEzGW,MAAOA,IACNpB,EAAMoB,MACLpB,EAAMoB,QAAOP,EAAAQ,YAAA,MAAA,CAAAH,MAAA,yBAAAL,CAAAA,EAAAQ,YAAAC,SAAA,CAAAJ,MAAA,QAAA,CAAA7B,QAAAA,IAAAwB,CAAAA,EAAAQ,YAAAE,EAAAC,QAAA,KAAA,cAQXxB,EAAMyB,aAAe,CAAEA,YAAaA,IAAezB,EAAMyB,kBACzDzB,EAAM0B,QAAU,CAAEA,OAAQA,IAAe1B,EAAM0B,OAAO,CAAEnB,IAAKF,EAAME,UAI3E"}