{"version":3,"file":"string.js","sources":["../../../packages/utils/string.ts"],"sourcesContent":["import { isString } from \"lodash-unified\";\n\n/**\n * 字符串工具类\n */\nexport const stringUtil = {\n\t/**\n\t * 根据当前时间生成问候语\n\t */\n\tgetGreet(): string {\n\t\tconst now = new Date();\n\t\tconst hour = now.getHours();\n\t\tlet greet = \"\";\n\n\t\tif (hour < 5) {\n\t\t\tgreet = \"夜深了，注意身体哦！\";\n\t\t} else if (hour < 9) {\n\t\t\tgreet = \"早上好！\" + \"欢迎回来！\";\n\t\t} else if (hour < 12) {\n\t\t\tgreet = \"上午好！\" + \"欢迎回来！\";\n\t\t} else if (hour < 14) {\n\t\t\tgreet = \"中午好！\" + \"欢迎回来！\";\n\t\t} else if (hour < 18) {\n\t\t\tgreet = \"下午好！\" + \"欢迎回来！\";\n\t\t} else if (hour < 24) {\n\t\t\tgreet = \"晚上好！\" + \"欢迎回来！\";\n\t\t} else {\n\t\t\tgreet = \"您好！\" + \"欢迎回来！\";\n\t\t}\n\t\treturn greet;\n\t},\n\t/**\n\t * 对象URL参数化\n\t */\n\tobjectToQueryString(obj: any): string {\n\t\tlet params = \"\";\n\t\tfor (const key in obj) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) {\n\t\t\t\tif (params !== \"\") {\n\t\t\t\t\tparams += \"&\";\n\t\t\t\t}\n\t\t\t\tparams += `${encodeURIComponent(key)}=${encodeURIComponent(obj[key])}`;\n\t\t\t}\n\t\t}\n\t\treturn params;\n\t},\n\t/**\n\t * 获取Url参数\n\t */\n\tgetUrlParams(url: string): Record<string, any> {\n\t\tconst regex = /[?&][^=?&]+=[^?&]+/g;\n\t\tconst params: Record<string, any> = {};\n\n\t\tlet match;\n\t\twhile ((match = regex.exec(url)) !== null) {\n\t\t\tconst [key, value] = match[0].substring(1).split(\"=\");\n\t\t\tparams[key] = decodeURIComponent(value);\n\t\t}\n\n\t\treturn params;\n\t},\n\t/**\n\t * 是否为JSON字符串\n\t */\n\tisJson(value: string): boolean {\n\t\tif (!isString(value)) return false;\n\n\t\tvalue = value.replace(/\\s/g, \"\").replace(/\\n|\\r/, \"\");\n\n\t\tif (/^\\{(.*?)\\}$/.test(value)) return /\"(.*?)\":(.*?)/g.test(value);\n\n\t\tif (/^\\[(.*?)\\]$/.test(value)) {\n\t\t\treturn value\n\t\t\t\t.replace(/^\\[/, \"\")\n\t\t\t\t.replace(/\\]$/, \"\")\n\t\t\t\t.replace(/},{/g, \"}\\n{\")\n\t\t\t\t.split(/\\n/)\n\t\t\t\t.map((s) => {\n\t\t\t\t\treturn stringUtil.isJson(s);\n\t\t\t\t})\n\t\t\t\t.reduce((prev, curr) => {\n\t\t\t\t\treturn !!curr;\n\t\t\t\t});\n\t\t}\n\n\t\treturn false;\n\t},\n\t/**\n\t * 生成随机字符串\n\t */\n\tgenerateRandomString(length: number): string {\n\t\tconst characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\t\tlet randomString = \"\";\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst randomIndex = Math.floor(Math.random() * characters.length);\n\t\t\trandomString += characters.charAt(randomIndex);\n\t\t}\n\t\treturn randomString;\n\t},\n\t/**\n\t * @description 生成唯一 uuid\n\t */\n\tgenerateUUID(): string {\n\t\tlet uuid = \"\";\n\t\tfor (let i = 0; i < 32; i++) {\n\t\t\tconst random = (Math.random() * 16) | 0;\n\t\t\tif (i === 8 || i === 12 || i === 16 || i === 20) uuid += \"-\";\n\t\t\tuuid += (i === 12 ? 4 : i === 16 ? (random & 3) | 8 : random).toString(16);\n\t\t}\n\t\treturn uuid;\n\t},\n\t/**\n\t * 复制\n\t */\n\tasync copy(value: string): Promise<void> {\n\t\t// navigator.clipboard 需要https等安全上下文\n\t\tif (navigator?.clipboard && window.isSecureContext) {\n\t\t\tawait navigator.clipboard.writeText(value);\n\t\t} else {\n\t\t\tconst textareaEl = document.createElement(\"textarea\");\n\t\t\ttextareaEl.value = value;\n\t\t\t// 使文本域不显示\n\t\t\ttextareaEl.style.position = \"absolute\";\n\t\t\ttextareaEl.style.opacity = \"0\";\n\t\t\ttextareaEl.style.left = \"-999999px\";\n\t\t\ttextareaEl.style.top = \"-999999px\";\n\t\t\tdocument.body.appendChild(textareaEl);\n\t\t\ttextareaEl.focus();\n\t\t\ttextareaEl.select();\n\t\t\tdocument.execCommand(\"copy\");\n\t\t\ttextareaEl.remove();\n\t\t}\n\t},\n};\n"],"names":["stringUtil","getGreet","hour","Date","getHours","greet","objectToQueryString","obj","params","key","Object","prototype","hasOwnProperty","call","encodeURIComponent","getUrlParams","url","regex","match","exec","value","substring","split","decodeURIComponent","isJson","isString","replace","test","map","s","reduce","prev","curr","generateRandomString","length","characters","randomString","i","randomIndex","Math","floor","random","charAt","generateUUID","uuid","toString","copy","navigator","clipboard","window","isSecureContext","writeText","textareaEl","document","createElement","style","position","opacity","left","top","body","appendChild","focus","select","execCommand","remove"],"mappings":"kHAKaA,EAAa,CAIzB,QAAAC,GACO,MACAC,OADUC,MACCC,WACjB,IAAIC,EAAQ,GAiBL,OAdEA,EADLH,EAAO,EACF,aACEA,EAAO,EACT,YACEA,EAAO,GACT,YACEA,EAAO,GACT,YACEA,EAAO,GACT,YACEA,EAAO,GACT,YAEA,WAEFG,CACR,EAIA,mBAAAC,CAAoBC,GACnB,IAAIC,EAAS,GACb,IAAA,MAAWC,KAAOF,EACbG,OAAOC,UAAUC,eAAeC,KAAKN,EAAKE,KAC9B,KAAXD,IACOA,GAAA,KAEDA,GAAA,GAAGM,mBAAmBL,MAAQK,mBAAmBP,EAAIE,OAG1D,OAAAD,CACR,EAIA,YAAAO,CAAaC,GACZ,MAAMC,EAAQ,sBACRT,EAA8B,CAAA,EAEhC,IAAAU,EACJ,KAAqC,QAA7BA,EAAQD,EAAME,KAAKH,KAAgB,CACpC,MAACP,EAAKW,GAASF,EAAM,GAAGG,UAAU,GAAGC,MAAM,KAC1Cd,EAAAC,GAAOc,mBAAmBH,EAClC,CAEO,OAAAZ,CACR,EAIAgB,OAAOJ,KACDK,EAAAA,SAASL,KAEdA,EAAQA,EAAMM,QAAQ,MAAO,IAAIA,QAAQ,QAAS,IAE9C,cAAcC,KAAKP,GAAe,iBAAiBO,KAAKP,KAExD,cAAcO,KAAKP,IACfA,EACLM,QAAQ,MAAO,IACfA,QAAQ,MAAO,IACfA,QAAQ,OAAQ,QAChBJ,MAAM,MACNM,KAAKC,GACE7B,EAAWwB,OAAOK,KAEzBC,QAAO,CAACC,EAAMC,MACLA,KASb,oBAAAC,CAAqBC,GACpB,MAAMC,EAAa,iEACnB,IAAIC,EAAe,GACnB,IAAA,IAASC,EAAI,EAAGA,EAAIH,EAAQG,IAAK,CAChC,MAAMC,EAAcC,KAAKC,MAAsBL,GAAhBI,KAAKE,UACpBL,GAAAD,EAAWO,OAAOJ,EACnC,CACO,OAAAF,CACR,EAIA,YAAAO,GACC,IAAIC,EAAO,GACX,IAAA,IAASP,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAC5B,MAAMI,EAA0B,GAAhBF,KAAKE,SAAiB,EAC5B,IAANJ,GAAiB,KAANA,GAAkB,KAANA,GAAkB,KAANA,IAAkBO,GAAA,KAChDA,IAAM,KAANP,EAAW,EAAU,KAANA,EAAqB,EAATI,EAAc,EAAIA,GAAQI,SAAS,GACxE,CACO,OAAAD,CACR,EAIA,UAAME,CAAK1B,GAEN,IAAA,MAAA2B,eAAA,EAAAA,UAAWC,YAAaC,OAAOC,sBAC5BH,UAAUC,UAAUG,UAAU/B,OAC9B,CACA,MAAAgC,EAAaC,SAASC,cAAc,YAC1CF,EAAWhC,MAAQA,EAEnBgC,EAAWG,MAAMC,SAAW,WAC5BJ,EAAWG,MAAME,QAAU,IAC3BL,EAAWG,MAAMG,KAAO,YACxBN,EAAWG,MAAMI,IAAM,YACdN,SAAAO,KAAKC,YAAYT,GAC1BA,EAAWU,QACXV,EAAWW,SACXV,SAASW,YAAY,QACrBZ,EAAWa,QACZ,CACD"}