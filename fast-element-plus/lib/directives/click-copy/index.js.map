{"version":3,"file":"index.js","sources":["../../../../packages/directives/click-copy/index.ts"],"sourcesContent":["/**\n * v-copy\n * 复制某个值至剪贴板\n * 接收参数：string类型/Ref<string>类型/Reactive<string>类型\n */\nimport { ElMessage } from \"element-plus\";\nimport { stringUtil, withInstallDirective } from \"@fast-china/utils\";\nimport type { Directive, DirectiveBinding } from \"vue\";\n\ninterface ElType extends HTMLElement {\n\tcopyData: string | number;\n\t__handleClick__: () => void;\n}\n\nconst CopyDirective: Directive = {\n\tmounted(el: ElType, binding: DirectiveBinding) {\n\t\tel.copyData = binding.value;\n\n\t\tel.__handleClick__ = async (): Promise<void> => {\n\t\t\tif (!el.copyData) return;\n\t\t\ttry {\n\t\t\t\tawait stringUtil.copy(String(el.copyData));\n\t\t\t\tElMessage({\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\tmessage: \"复制成功\",\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tElMessage({\n\t\t\t\t\ttype: \"error\",\n\t\t\t\t\tmessage: \"复制失败\",\n\t\t\t\t});\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t};\n\t\tel.addEventListener(\"click\", el.__handleClick__);\n\t},\n\tupdated(el: ElType, binding: DirectiveBinding) {\n\t\tel.copyData = binding.value;\n\t},\n\tbeforeUnmount(el: ElType) {\n\t\tel.removeEventListener(\"click\", el.__handleClick__);\n\t},\n};\n\nexport const vCopy = withInstallDirective(CopyDirective, \"copy\");\nexport default vCopy;\n"],"names":["CopyDirective","mounted","el","binding","copyData","value","__handleClick__","async","stringUtil","copy","String","ElMessage","type","message","error","addEventListener","updated","beforeUnmount","removeEventListener","vCopy","withInstallDirective"],"mappings":"2KAcMA,EAA2B,CAChC,OAAAC,CAAQC,EAAYC,GACnBD,EAAGE,SAAWD,EAAQE,MAEtBH,EAAGI,gBAAkBC,UACpB,GAAKL,EAAGE,SACR,UACOI,EAAAA,WAAWC,KAAKC,OAAOR,EAAGE,WAChCO,YAAU,CACTC,KAAM,UACNC,QAAS,QAEX,OAASC,GAKR,MAJAH,YAAU,CACTC,KAAM,QACNC,QAAS,SAEJC,CACP,GAEDZ,EAAGa,iBAAiB,QAASb,EAAGI,gBACjC,EACA,OAAAU,CAAQd,EAAYC,GACnBD,EAAGE,SAAWD,EAAQE,KACvB,EACA,aAAAY,CAAcf,GACbA,EAAGgB,oBAAoB,QAAShB,EAAGI,gBACpC,GAGYa,EAAQC,EAAAA,qBAAqBpB,EAAe"}