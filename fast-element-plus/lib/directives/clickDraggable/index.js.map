{"version":3,"file":"index.js","sources":["../../../../packages/directives/clickDraggable/index.ts"],"sourcesContent":["/*\n\t需求：实现一个拖拽指令，可在父元素区域任意拖拽元素。\n\n\t思路：\n\t\t1、设置需要拖拽的元素为absolute，其父元素为relative。\n\t\t2、鼠标按下(onmousedown)时记录目标元素当前的 left 和 top 值。\n\t\t3、鼠标移动(onmousemove)时计算每次移动的横向距离和纵向距离的变化值，并改变元素的 left 和 top 值\n\t\t4、鼠标松开(onmouseup)时完成一次拖拽\n\n\t使用：在 Dom 上加上 v-draggable 即可\n\t<div class=\"dialog-model\" v-draggable></div>\n*/\nimport type { Directive } from \"vue\";\nimport { withInstallDirective } from \"@fast-element-plus/utils\";\n\ninterface ElType extends HTMLElement {\n\tparentNode: any;\n}\n\nconst DraggableDirective: Directive = {\n\tmounted(el: ElType) {\n\t\tel.style.cursor = \"move\";\n\t\tel.style.position = \"absolute\";\n\t\tel.onmousedown = (e): void => {\n\t\t\tconst disX = e.pageX - el.offsetLeft;\n\t\t\tconst disY = e.pageY - el.offsetTop;\n\t\t\tdocument.onmousemove = (e): void => {\n\t\t\t\tlet x = e.pageX - disX;\n\t\t\t\tlet y = e.pageY - disY;\n\t\t\t\tconst maxX = el.parentNode.offsetWidth - el.offsetWidth;\n\t\t\t\tconst maxY = el.parentNode.offsetHeight - el.offsetHeight;\n\t\t\t\tif (x < 0) {\n\t\t\t\t\tx = 0;\n\t\t\t\t} else if (x > maxX) {\n\t\t\t\t\tx = maxX;\n\t\t\t\t}\n\n\t\t\t\tif (y < 0) {\n\t\t\t\t\ty = 0;\n\t\t\t\t} else if (y > maxY) {\n\t\t\t\t\ty = maxY;\n\t\t\t\t}\n\t\t\t\tel.style.left = `${x}px`;\n\t\t\t\tel.style.top = `${y}px`;\n\t\t\t};\n\t\t\tdocument.onmouseup = (): void => {\n\t\t\t\tdocument.onmousemove = document.onmouseup = null;\n\t\t\t};\n\t\t};\n\t},\n};\n\nexport const vDraggable = withInstallDirective(DraggableDirective, \"draggable\");\nexport default vDraggable;\n"],"names":["DraggableDirective","mounted","el","style","cursor","position","onmousedown","e","disX","pageX","offsetLeft","disY","pageY","offsetTop","document","onmousemove","x","y","maxX","parentNode","offsetWidth","maxY","offsetHeight","left","top","onmouseup","vDraggable","withInstallDirective"],"mappings":"0LAmBMA,EAAgC,CACrC,OAAAC,CAAQC,GACPA,EAAGC,MAAMC,OAAS,OAClBF,EAAGC,MAAME,SAAW,WACjBH,EAAAI,YAAeC,IACX,MAAAC,EAAOD,EAAEE,MAAQP,EAAGQ,WACpBC,EAAOJ,EAAEK,MAAQV,EAAGW,UACjBC,SAAAC,YAAeR,IACnB,IAAAS,EAAIT,EAAEE,MAAQD,EACdS,EAAIV,EAAEK,MAAQD,EAClB,MAAMO,EAAOhB,EAAGiB,WAAWC,YAAclB,EAAGkB,YACtCC,EAAOnB,EAAGiB,WAAWG,aAAepB,EAAGoB,aACzCN,EAAI,EACHA,EAAA,EACMA,EAAIE,IACVF,EAAAE,GAGDD,EAAI,EACHA,EAAA,EACMA,EAAII,IACVJ,EAAAI,GAEFnB,EAAAC,MAAMoB,KAAO,GAAGP,MAChBd,EAAAC,MAAMqB,IAAM,GAAGP,KAAC,EAEpBH,SAASW,UAAY,KACXX,SAAAC,YAAcD,SAASW,UAAY,IAAA,CAAA,CAG/C,GAGYC,EAAaC,EAAAA,qBAAqB3B,EAAoB"}